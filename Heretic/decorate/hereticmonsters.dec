// Heretic Monsters

// EggFX
ACTOR EggFXNew : EggFX replaces EggFX
{
  Radius 8
  Height 8
  Speed 18
  MorphProjectile.PlayerClass "ChickenPlayer"
  MorphProjectile.MonsterClass "Chicken"
  MorphProjectile.MorphStyle MRF_UNDOBYTOMEOFPOWER|MRF_UNDOBYCHAOSDEVICE
  States
  {
  Spawn:
    EGGM ABCDE 4
    Loop
  Death:
    FX01 FFGH 3 Bright
    Stop
  }
}

ACTOR ChickenNew : Chicken replaces Chicken
{
 var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
 var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
 var int user_checkmapskill; var int user_ressurrectstr; var int user_canusecrisisatk; // For checking if a monster has been given Skill/Map inventory items yet.

  Health 10
  Radius 9
  Height 22
  Mass 40
  Speed 4
  Painchance 200
  Painchance "Fist", 255 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 255 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 255 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 255
  Painchance "GravityMP", 255
  Painchance "GravityHPMP", 255 
  DamageFactor "Normal", 0.5
  Monster
  -COUNTKILL
  +WINDTHRUST
  +DONTMORPH
  +FLOORCLIP
  SeeSound "chicken/pain"
  AttackSound "chicken/attack"
  PainSound "chicken/pain"
  DeathSound "chicken/death"
  ActiveSound "chicken/active"
  Obituary "$OB_CHICKEN"
  States
  {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    CHKN A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    CHKN AB 10 A_Look
    goto Spawn+1
  See:
    CHKN A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    CHKN AB 3
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 90) { A_SetTics(2); }
	 A_Chase;
	}
    Loop
  Melee:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    CHKN A 8 A_FaceTarget
    CHKN C 10 A_CustomMeleeAttack(random[ChicAttack](1,2))
    Goto See
  Pain:
    CHKN D 5 A_Feathers
    CHKN C 5 A_Pain
    Goto See
  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    CHKN E 6 A_Scream
    CHKN F 6 A_Feathers
    CHKN G 6
    CHKN H 6 A_NoBlocking
    CHKN IJK 6 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    CHKN L -1
    Stop
  Ice:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 A_ChangeFlag("CANTSEEK", TRUE)
    IMPX G 5 A_GenericFreezeDeath
    IMPX G 1 A_FreezeDeathChunks
    wait
  }
}
actor FChicken : ChickenNew
{
 -COUNTKILL 
 +FRIENDLY +THRUSPECIES +DONTHARMSPECIES
 Species "FriendlyMonsters"
 dropitem NoItemSpawn 1
}

actor HereticImpNew : HereticImp // replaces HereticImp
{
 var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
 var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
 var int user_checkmapskill; var int user_ressurrectstr; var int user_canusecrisisatk; // For checking if a monster has been given Skill/Map inventory items yet.

 Painchance 200
 Painchance "Fist", 255 // Fist attacks have a +50% chance of stunning an enemy
 Painchance "Kick", 255 // Kick attacks have a +150% chance of stunning an enemy
 Painchance "Gauntlets", 255 // Fist attacks have a +50% chance of stunning an enemy
 Painchance "GravityHP", 255
 Painchance "GravityMP", 255
 Painchance "GravityHPMP", 255 
 +DONTHARMSPECIES
 Species "Gargoyle"

 states
 {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    IMPX A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    IMPX ABCB 10 A_Look
    goto Spawn+1
  See:
    IMPX A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    IMPX AABBCCBB 3
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 90) { A_SetTics(2); }
	 A_Chase;
	}
    Loop
  Melee:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    IMPX DE 6 A_FaceTarget
    IMPX F 6 A_CustomMeleeAttack(random[ImpMeAttack](5,12), "himp/attack", "himp/attack")
    Goto See
  Missile:
    IMPX A 10 A_FaceTarget
    IMPX B 6 A_ImpMsAttack
    TNT1 B 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    IMPX CBAB 6
    Goto Missile+2
  Pain:
    IMPX G 3
    IMPX G 3 A_Pain
    Goto See
  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    IMPX G 4 A_ImpDeath
    IMPX H 5 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    Wait
  XDeath:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    IMPX S 5 A_ImpXDeath1
    IMPX TU 5
    IMPX V 5 A_Gravity
    IMPX W 5 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    Wait
  Ice:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 A_ChangeFlag("CANTSEEK", TRUE)
    IMPX G 5 A_GenericFreezeDeath
    IMPX G 1 A_FreezeDeathChunks
    wait
  Raise:
    IMPX H 5 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    IMPX G 4
    goto See
 }
}
actor FHereticImp : HereticImpNew
{
 -COUNTKILL 
 +FRIENDLY +THRUSPECIES +DONTHARMSPECIES
 Species "FriendlyMonsters"
 dropitem NoItemSpawn 1
}

ACTOR HereticImpBallNew : HereticImpBall replaces HereticImpBall { DamageType "Fire" DamageType "Magic" }
actor HereticImpLeaderNew : HereticImpLeader // replaces HereticImpLeader
{
 var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
 var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
 var int user_checkmapskill; var int user_ressurrectstr; var int user_canusecrisisatk; // For checking if a monster has been given Skill/Map inventory items yet.

 Painchance 200
 Painchance "Fist", 255 // Fist attacks have a +50% chance of stunning an enemy
 Painchance "Kick", 255 // Kick attacks have a +150% chance of stunning an enemy
 Painchance "Gauntlets", 255 // Fist attacks have a +50% chance of stunning an enemy
 Painchance "GravityHP", 255
 Painchance "GravityMP", 255
 Painchance "GravityHPMP", 255 
 +DONTHARMSPECIES
 Species "Gargoyle"

 Translation "141:141=144:144", "145:160=145:153", "248:254=248:251", "66:94=66:80", "95:110=95:103"

 states
 {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    IMPX A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    IMPX ABCB 10 A_Look
    goto Spawn+1
  See:
    IMPX A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    IMPX AABBCCBB 3
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 90) { A_SetTics(2); }
	 A_Chase;
	}
    Loop
  Melee:
    Stop
  Missile:
    IMPX D 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    IMPX DE 6 A_FaceTarget
    IMPX F 6 A_CustomComboAttack("HereticImpBall", 32, random[ImpMsAttack2](5,12), "himp/leaderattack")
    Goto See
  Pain:
    IMPX G 3
    IMPX G 3 A_Pain
    Goto See
  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    IMPX G 4 A_ImpDeath
    IMPX H 5 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    Wait
  XDeath:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    IMPX S 5 A_ImpXDeath1
    IMPX TU 5
    IMPX V 5 A_Gravity
    IMPX W 5 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    Wait
  Ice:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 A_ChangeFlag("CANTSEEK", TRUE)
    IMPX G 5 A_GenericFreezeDeath
    IMPX G 1 A_FreezeDeathChunks
    wait
  Raise:
    IMPX H 5 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    IMPX G 4
    goto See
 }
}
actor FHereticImpLeader : HereticImpLeaderNew
{
 -COUNTKILL 
 +FRIENDLY +THRUSPECIES +DONTHARMSPECIES
 Species "FriendlyMonsters"
 dropitem NoItemSpawn 1
}

actor MummyNew : Mummy // replaces Mummy
{
 var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
 var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
 var int user_checkmapskill; var int user_ressurrectstr; var int user_canusecrisisatk; // For checking if a monster has been given Skill/Map inventory items yet.

 Painchance 128
 Painchance "Fist", 192 // Fist attacks have a +50% chance of stunning an enemy
 Painchance "Kick", 255 // Kick attacks have a +150% chance of stunning an enemy
 Painchance "Gauntlets", 192 // Fist attacks have a +50% chance of stunning an enemy
 Painchance "GravityHP", 255
 Painchance "GravityMP", 255
 Painchance "GravityHPMP", 255
 +DONTHARMSPECIES
 Species "Golem"

 states
 {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    MUMM A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    MUMM AB 10 A_Look
    goto Spawn+1
  See:
    MUMM A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    MUMM ABCD 4
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_SetTics(3); }
	 A_Chase;
	}
    Loop
  Melee:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    MUMM E 6
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 150) { A_SetTics(4); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 75) { A_SetTics(5); }
	 A_FaceTarget;
	}
    MUMM F 6
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 150) { A_SetTics(4); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 75) { A_SetTics(5); }
	 A_FaceTarget;
	 A_CustomMeleeAttack(random[MummyAttack](1,8)*2, "mummy/attack2", "mummy/attack");
	}
    MUMM G 6
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 150) { A_SetTics(4); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 75) { A_SetTics(5); }
	 A_FaceTarget;
	}
    Goto See
  Pain:
    MUMM H 4
    MUMM H 4 A_Pain
    Goto See
  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    MUMM I 5
    MUMM J 5 A_Scream
    MUMM K 5 A_SpawnItemEx("MummySoul", 0, 0, 10, 0, 0, 1)
    MUMM L 5
    MUMM M 5 A_NoBlocking
    MUMM NO 5 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    MUMM P -1
    Stop
  Ice:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 A_ChangeFlag("CANTSEEK", TRUE)
    MUMM H 5 A_GenericFreezeDeath
    MUMM H 1 A_FreezeDeathChunks
    wait
  Raise:
    MUMM O 5 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    MUMM NMLKJI 5
    goto See
 }
}
actor FMummy : MummyNew
{
 -COUNTKILL 
 +FRIENDLY +THRUSPECIES +DONTHARMSPECIES
 Species "FriendlyMonsters"
 dropitem NoItemSpawn 1
}

actor MummyGhostNew : MummyGhost // replaces MummyGhost
{
 var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
 var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
 var int user_checkmapskill; var int user_ressurrectstr; var int user_canusecrisisatk; // For checking if a monster has been given Skill/Map inventory items yet.

 Painchance 128
 Painchance "Fist", 192 // Fist attacks have a +50% chance of stunning an enemy
 Painchance "Kick", 255 // Kick attacks have a +150% chance of stunning an enemy
 Painchance "Gauntlets", 192 // Fist attacks have a +50% chance of stunning an enemy
 Painchance "GravityHP", 255
 Painchance "GravityMP", 255
 Painchance "GravityHPMP", 255 
 +DONTHARMSPECIES
 Species "Golem"

 states
 {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    MUMM A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    MUMM AB 10 A_Look
    goto Spawn+1
  See:
    MUMM A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    MUMM ABCD 4
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_SetTics(3); }
	 A_Chase;
	}
    Loop
  Melee:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    MUMM E 6
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 150) { A_SetTics(4); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 75) { A_SetTics(5); }
	 A_FaceTarget;
	}
    MUMM F 6
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 150) { A_SetTics(4); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 75) { A_SetTics(5); }
	 A_FaceTarget;
	 A_CustomMeleeAttack(random[MummyAttack](1,8)*2, "mummy/attack2", "mummy/attack");
	}
    MUMM G 6
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 150) { A_SetTics(4); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 75) { A_SetTics(5); }
	 A_FaceTarget;
	}
    Goto See
  Pain:
    MUMM H 4
    MUMM H 4 A_Pain
    Goto See
  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    MUMM I 5
    MUMM J 5 A_Scream
    MUMM K 5 A_SpawnItemEx("MummySoul", 0, 0, 10, 0, 0, 1)
    MUMM L 5
    MUMM M 5 A_NoBlocking
    MUMM NO 5 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    MUMM P -1
    Stop
  Ice:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 A_ChangeFlag("CANTSEEK", TRUE)
    MUMM H 5 A_GenericFreezeDeath
    MUMM H 1 A_FreezeDeathChunks
    wait
  Raise:
    MUMM O 5 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    MUMM NMLKJI 5
    goto See
 }
}
actor FMummyGhost : MummyGhostNew
{
 -COUNTKILL 
 +FRIENDLY +THRUSPECIES +DONTHARMSPECIES
 Species "FriendlyMonsters"
 dropitem NoItemSpawn 1
}

ACTOR MummyFX1New : MummyFX1 replaces MummyFX1 { DamageType "Fire" DamageType "Magic" }
actor MummyLeaderNew : MummyLeader // replaces MummyLeader
{
 var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
 var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
 var int user_checkmapskill; var int user_ressurrectstr; var int user_canusecrisisatk; // For checking if a monster has been given Skill/Map inventory items yet.

 Painchance 64
 Painchance "Fist", 96 // Fist attacks have a +50% chance of stunning an enemy
 Painchance "Kick", 160 // Kick attacks have a +150% chance of stunning an enemy
 Painchance "Gauntlets", 96 // Fist attacks have a +50% chance of stunning an enemy
 Painchance "GravityHP", 255
 Painchance "GravityMP", 255
 Painchance "GravityHPMP", 255 
 +DONTHARMSPECIES
 Species "Golem"

 states
 {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    MUMA A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    MUMA AB 10 A_Look
    goto Spawn+1
  See:
    MUMA A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    MUMA ABCD 4
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("AVOIDMELEE",1); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_SetTics(3); }
	 A_Chase;
	}
    Loop
  Melee:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    MUMM E 6
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 150) { A_SetTics(4); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 75) { A_SetTics(5); }
	 A_FaceTarget;
	}
    MUMM F 6
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 150) { A_SetTics(4); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 75) { A_SetTics(5); }
	 A_FaceTarget;
	 A_CustomMeleeAttack(random[MummyAttack](1,8)*2, "mummy/attack2", "mummy/attack");
	}
    MUMM G 6
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 150) { A_SetTics(4); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 75) { A_SetTics(5); }
	 A_FaceTarget;
	}
    Goto See
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    MUMA X 5
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_SetTics(3); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_SetTics(4); }
	 A_FaceTarget;
	}
    MUMA Y 5 Bright
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_SetTics(3); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_SetTics(4); }
	 A_FaceTarget;
	}
    MUMA X 5
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_SetTics(3); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_SetTics(4); }
	 A_FaceTarget;
	}
    MUMA Y 5 Bright
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_SetTics(3); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_SetTics(4); }
	 A_FaceTarget;
	}
    MUMA X 5
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_SetTics(3); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_SetTics(4); }
	 A_FaceTarget;
	}
    MUMA Y 5 Bright 
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_SetTics(3); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_SetTics(4); }
	 A_FaceTarget;
	 A_CustomComboAttack("MummyFX1", 32, random[MummyAttack2](1,8)*2, "mummy/attack2");
	}
    Goto See
  Pain:
    MUMA H 4
    MUMA H 4 A_Pain
    Goto See
  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    MUMM I 5
    MUMM J 5 A_Scream
    MUMM K 5 A_SpawnItemEx("MummySoul", 0, 0, 10, 0, 0, 1)
    MUMM L 5
    MUMM M 5 A_NoBlocking
    MUMM NO 5 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    MUMM P -1
    Stop
  Ice:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 A_ChangeFlag("CANTSEEK", TRUE)
    MUMA H 5 A_GenericFreezeDeath
    MUMA H 1 A_FreezeDeathChunks
    wait
  Raise:
    MUMM O 5 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    MUMM NMLKJI 5
    goto See
 }
}
actor FMummyLeader : MummyLeaderNew
{
 -COUNTKILL 
 +FRIENDLY +THRUSPECIES +DONTHARMSPECIES
 Species "FriendlyMonsters"
 dropitem NoItemSpawn 1
}

actor MummyLeaderGhostNew : MummyLeaderGhost // replaces MummyLeaderGhost
{
 var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
 var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
 var int user_checkmapskill; var int user_ressurrectstr; var int user_canusecrisisatk; // For checking if a monster has been given Skill/Map inventory items yet.

 Painchance 64
 Painchance "Fist", 96 // Fist attacks have a +50% chance of stunning an enemy
 Painchance "Kick", 160 // Kick attacks have a +150% chance of stunning an enemy
 Painchance "Gauntlets", 96 // Fist attacks have a +50% chance of stunning an enemy
 Painchance "GravityHP", 255
 Painchance "GravityMP", 255
 Painchance "GravityHPMP", 255 
 +DONTHARMSPECIES
 Species "Golem"

 states
 {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    MUMA A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    MUMA AB 10 A_Look
    goto Spawn+1
  See:
    MUMA A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    MUMA ABCD 4
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("AVOIDMELEE",1); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_SetTics(3); }
	 A_Chase;
	}
    Loop
  Melee:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    MUMM E 6
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 150) { A_SetTics(4); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 75) { A_SetTics(5); }
	 A_FaceTarget;
	}
    MUMM F 6
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 150) { A_SetTics(4); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 75) { A_SetTics(5); }
	 A_FaceTarget;
	 A_CustomMeleeAttack(random[MummyAttack](1,8)*2, "mummy/attack2", "mummy/attack");
	}
    MUMM G 6
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 150) { A_SetTics(4); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 75) { A_SetTics(5); }
	 A_FaceTarget;
	}
    Goto See
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    MUMA X 5
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_SetTics(3); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_SetTics(4); }
	 A_FaceTarget;
	}
    MUMA Y 5 Bright
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_SetTics(3); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_SetTics(4); }
	 A_FaceTarget;
	}
    MUMA X 5
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_SetTics(3); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_SetTics(4); }
	 A_FaceTarget;
	}
    MUMA Y 5 Bright
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_SetTics(3); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_SetTics(4); }
	 A_FaceTarget;
	}
    MUMA X 5
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_SetTics(3); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_SetTics(4); }
	 A_FaceTarget;
	}
    MUMA Y 5 Bright 
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_SetTics(3); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_SetTics(4); }
	 A_FaceTarget;
	 A_CustomComboAttack("MummyFX1", 32, random[MummyAttack2](1,8)*2, "mummy/attack2");
	}
    Goto See
  Pain:
    MUMA H 4
    MUMA H 4 A_Pain
    Goto See
  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    MUMM I 5
    MUMM J 5 A_Scream
    MUMM K 5 A_SpawnItemEx("MummySoul", 0, 0, 10, 0, 0, 1)
    MUMM L 5
    MUMM M 5 A_NoBlocking
    MUMM NO 5 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    MUMM P -1
    Stop
  Ice:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 A_ChangeFlag("CANTSEEK", TRUE)
    MUMA H 5 A_GenericFreezeDeath
    MUMA H 1 A_FreezeDeathChunks
    wait
  Raise:
    MUMM O 5 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    MUMM NMLKJI 5
    goto See
 }
}
actor FMummyLeaderGhost : MummyLeaderGhostNew
{
 -COUNTKILL 
 +FRIENDLY +THRUSPECIES +DONTHARMSPECIES
 Species "FriendlyMonsters"
 dropitem NoItemSpawn 1
}

ACTOR KnightAxeNew : KnightAxe replaces KnightAxe { DamageType "Magic" }
ACTOR RedAxeNew : RedAxe replaces RedAxe { DamageType "Magic" }
ACTOR KnightNew : Knight // replaces Knight
{
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; var int user_canusecrisisatk; // For checking if a monster has been given Skill/Map inventory items yet.

  Painchance 100
  Painchance "Fist", 150 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 250 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 150 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 255
  Painchance "GravityMP", 255
  Painchance "GravityHPMP", 255 

  States
  {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    KNIG A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    KNIG AB 10 A_Look
    goto Spawn+1
  See:
    KNIG A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    KNIG ABCD 4
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("AVOIDMELEE",1); A_SetTics(3); }
	 A_Chase;
	}
    Loop
  Melee:
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    KNIG E 10 A_FaceTarget
    KNIG F 8 A_FaceTarget
    KNIG G 8 A_KnightAttack
    KNIG E 10 A_FaceTarget
    KNIG F 8 A_FaceTarget
    KNIG G 8 A_KnightAttack
    Goto See
  Pain:
    KNIG H 3
    KNIG H 3 A_Pain
    Goto See
  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    KNIG I 6
    KNIG J 6 A_Scream
    KNIG K 6
    KNIG L 6 A_NoBlocking
    KNIG MN 6 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    KNIG O -1
    Stop
  Ice:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 A_ChangeFlag("CANTSEEK", TRUE)
    KNIG H 5 A_GenericFreezeDeath
    KNIG H 1 A_FreezeDeathChunks
    wait
  Raise:
    KNIG N 6 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    KNIG MLKJI 6
    goto See
  }
}
actor FKnight : KnightNew
{
 -COUNTKILL 
 +FRIENDLY +THRUSPECIES +DONTHARMSPECIES
 Species "FriendlyMonsters"
 dropitem NoItemSpawn 1
}

ACTOR KnightGhostNew : KnightGhost // replaces KnightGhost
{
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; var int user_canusecrisisatk; // For checking if a monster has been given Skill/Map inventory items yet.

  Painchance 100
  Painchance "Fist", 150 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 250 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 150 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 255
  Painchance "GravityMP", 255
  Painchance "GravityHPMP", 255 
  +DONTHARMSPECIES
  Species "UndeadWarrior"

  States
  {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    KNIG A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    KNIG AB 10 A_Look
    goto Spawn+1
  See:
    KNIG A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    KNIG ABCD 4
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("AVOIDMELEE",1); A_SetTics(3); }
	 A_Chase;
	}
    Loop
  Melee:
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    KNIG E 10 A_FaceTarget
    KNIG F 8 A_FaceTarget
    KNIG G 8 A_KnightAttack
    KNIG E 10 A_FaceTarget
    KNIG F 8 A_FaceTarget
    KNIG G 8 A_KnightAttack
    Goto See
  Pain:
    KNIG H 3
    KNIG H 3 A_Pain
    Goto See
  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    KNIG I 6
    KNIG J 6 A_Scream
    KNIG K 6
    KNIG L 6 A_NoBlocking
    KNIG MN 6 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    KNIG O -1
    Stop
  Ice:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 A_ChangeFlag("CANTSEEK", TRUE)
    KNIG H 5 A_GenericFreezeDeath
    KNIG H 1 A_FreezeDeathChunks
    wait
  Raise:
    KNIG N 6 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    KNIG MLKJI 6
    goto See
  }
}
actor FKnightGhost : KnightGhostNew
{
 -COUNTKILL 
 +FRIENDLY +THRUSPECIES +DONTHARMSPECIES
 Species "FriendlyMonsters"
 dropitem NoItemSpawn 1
}

ACTOR WizardFX1New : WizardFX1 replaces WizardFX1 { DamageType "Magic" }
ACTOR WizardNew : Wizard // replaces Wizard
{
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; var int user_canusecrisisatk; // For checking if a monster has been given Skill/Map inventory items yet.

  Painchance 64
  Painchance "Fist", 96 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 160 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 96 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 255
  Painchance "GravityMP", 255
  Painchance "GravityHPMP", 255 

  Obituary "%o was cursed by a Disciple of D'Sparil."
  HitObituary "%o was scratched by a Disciple of D'Sparil."

  States
  {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    WZRD A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    WZRD AB 10 A_Look
    goto Spawn+1
  See:
    WZRD A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    WZRD A 3
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("AVOIDMELEE",1); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 90) { A_SetTics(2); }
	 A_Chase;
	}
    WZRD A 4
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("AVOIDMELEE",1); A_SetTics(3); }
	 A_Chase;
	}
    WZRD A 3
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("AVOIDMELEE",1); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 90) { A_SetTics(2); }
	 A_Chase;
	}
    WZRD A 4
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("AVOIDMELEE",1); A_SetTics(3); }
	 A_Chase;
	}
    WZRD B 3
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("AVOIDMELEE",1); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 90) { A_SetTics(2); }
	 A_Chase;
	}
    WZRD B 4
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("AVOIDMELEE",1); A_SetTics(3); }
	 A_Chase;
	}
    WZRD B 3
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("AVOIDMELEE",1); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 90) { A_SetTics(2); }
	 A_Chase;
	}
    WZRD B 4
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("AVOIDMELEE",1); A_SetTics(3); }
	 A_Chase;
	}
    Loop
  Melee:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    WZRD N 6
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 90) { A_SetTics(4); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 45) { A_SetTics(5); }
	 A_FaceTarget;
	}
	WZRD O 6
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 90) { A_SetTics(4); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 45) { A_SetTics(5); }
	 A_FaceTarget;
	}
	WZRD P 12 
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 90) { A_SetTics(8); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 67) { A_SetTics(9); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 45) { A_SetTics(11); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 23) { A_SetTics(10); }
	 A_FaceTarget;
     A_CustomMeleeAttack(random(1,5)*8, "wizard/melee", none, "Melee", true);
	}
	Goto See
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    WZRD C 4
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 67) { A_SetTics(3); }
	 A_WizAtk1;
	}
    WZRD C 4
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 67) { A_SetTics(3); }
	 A_WizAtk2;
	}
    WZRD C 4
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 67) { A_SetTics(3); }
	 A_WizAtk1;
	}
    WZRD C 4
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 67) { A_SetTics(3); }
	 A_WizAtk2;
	}
    WZRD C 4
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 67) { A_SetTics(3); }
	 A_WizAtk1;
	}
    WZRD C 4
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 67) { A_SetTics(3); }
	 A_WizAtk2;
	}
    WZRD C 4
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 67) { A_SetTics(3); }
	 A_WizAtk1;
	}
    WZRD C 4
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 67) { A_SetTics(3); }
	 A_WizAtk2;
	}
    WZRD D 12
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 67) { A_SetTics(9); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 45) { A_SetTics(11); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 23) { A_SetTics(10); }
	 A_WizAtk3;
	}
    Goto See
  Pain:
    WZRD E 3 A_GhostOff
    WZRD E 3 A_Pain
    Goto See
  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    WZRD F 6 A_GhostOff
    WZRD G 6 A_Scream
    WZRD HI 6
    WZRD J 6 A_NoBlocking
    WZRD KL 6 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    WZRD M -1 A_SetFloorClip
    Stop
  Ice:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 A_ChangeFlag("CANTSEEK", TRUE)
    WZRD Q 5 A_FreezeDeath
    WZRD Q 1 A_FreezeDeathChunks
    wait
  Raise:
    WZRD M 6 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    WZRD LKJIHGF 6
    goto See
  }
}
actor FWizard : WizardNew
{
 -COUNTKILL 
 +FRIENDLY +THRUSPECIES +DONTHARMSPECIES
 Species "FriendlyMonsters"
 dropitem NoItemSpawn 1
}

ACTOR HeadFX1New : HeadFX1 replaces HeadFX1 
{
  var int user_random; var int user_ailment1; var int user_ailmentmaxchance;
  DamageType "Ice" 
  DamageType "Magic" 
  +HITMASTER
  States
  {
  Spawn:
    FX05 ABC 6 Bright
    Loop
  Death:
    TNT1 A 0 Bright
	{
	 if (IsPointerEqual(AAPTR_MASTER, AAPTR_PLAYER1) == TRUE) 
	 {
	  A_SetUserVar("user_ailmentmaxchance",12);
	  if (CallACS("GetBuffTimer",7) > 0) { A_SetUserVar("user_ailmentmaxchance",user_ailmentmaxchance*4); }
	  if (CountInv("EvadeAnAttack",AAPTR_PLAYER1) > 0) { return state("Death2"); }
	  if (CountInv("InvulnerabilitySpell",AAPTR_PLAYER1) > 0) { return state("Death2"); }
	  if (random(1,user_ailmentmaxchance) <= 3)
	  {
	   ACS_NamedExecuteAlways("BuffTimer",0,8,15,random(105,175)); // Deceleratle for 4-6 seconds [tics] (do not ignore God/Invuln/Mercy-Invuln)
	  }
	 }
	 return state("");
	}
  Death2:
    FX05 D 5 Bright A_LichIceImpact
    FX05 EFG 5 Bright
    Stop
  }
}
ACTOR HeadFX2New : HeadFX2 replaces HeadFX2 
{
  var int user_random; var int user_ailment1; var int user_ailmentmaxchance;
  DamageType "Ice" 
  DamageType "Magic" 
  +HITMASTER

  States
  {
  Spawn:
    FX05 HIJ 6 Bright
    Loop
  Death:
    TNT1 A 0 Bright
	{
	 if (IsPointerEqual(AAPTR_MASTER, AAPTR_PLAYER1) == TRUE) 
	 {
	  A_SetUserVar("user_ailmentmaxchance",24);
	  if (CallACS("GetBuffTimer",7) > 0) { A_SetUserVar("user_ailmentmaxchance",user_ailmentmaxchance*4); }
	  if (CountInv("EvadeAnAttack",AAPTR_PLAYER1) > 0) { return state("Death2"); }
	  if (CountInv("InvulnerabilitySpell",AAPTR_PLAYER1) > 0) { return state("Death2"); }
	  if (random(1,user_ailmentmaxchance) <= 3)
	  {
	   ACS_NamedExecuteAlways("BuffTimer",0,8,15,random(35,52)); // Deceleratle for 1-1.5 seconds [tics] (do not ignore God/Invuln/Mercy-Invuln)
	  }
	 }
	 return state("");
	}
  Death2:
    FX05 DEFG 5 Bright
    Stop
  }
}
ACTOR WhirlwindNew : Whirlwind replaces Whirlwind { DamageType "Wind" DamageType "Magic" }
ACTOR HeadFX3New : HeadFX3 replaces HeadFX3 { DamageType "Fire" DamageType "Magic" }
ACTOR IronlichNew : Ironlich // replaces Ironlich
{
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; var int user_canusecrisisatk; // For checking if a monster has been given Skill/Map inventory items yet.

  Painchance 32
  Painchance "Fist", 48 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 80 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 48 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 255
  Painchance "GravityMP", 255
  Painchance "GravityHPMP", 255 

  States
  {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    LICH A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    LICH A 10 A_Look
    goto Spawn+1
  See:
    LICH A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    LICH A 4
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("AVOIDMELEE",1); A_SetTics(3); }
	 A_Chase;
	}
    Loop
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    LICH A 5 A_FaceTarget
    LICH B 20 A_LichAttack
    Goto See
  Pain:
    LICH A 4
    LICH A 4 A_Pain
    Goto See
  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    LICH C 7
    LICH D 7 A_Scream
    LICH EF 7
    LICH G 7 A_NoBlocking
    LICH H 7 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    LICH I -1 A_BossDeath
    Stop
  Ice:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 A_ChangeFlag("CANTSEEK", TRUE)
    LICH A 5 A_GenericFreezeDeath
    LICH A 1 A_FreezeDeathChunks
    wait
  Raise:
    LICH H 7 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    LICH GFEDC 7
    goto See
  }
}
actor FIronlich : IronlichNew
{
 -COUNTKILL 
 +FRIENDLY +THRUSPECIES +DONTHARMSPECIES
 Species "FriendlyMonsters"
 dropitem NoItemSpawn 1
}

ACTOR SabreclawGhostTrail
{
	Radius 16
	Height 56
	Speed 1
	Damage 0
	RenderStyle Translucent
	Alpha 0.7
	PROJECTILE
	+CLIENTSIDEONLY
	states
	{
	Spawn:
        CLNK Q 0
		CLNK Q 1 A_FadeOut(0.10)
		goto Spawn+1
	}
}

ACTOR SabreclawGhostTrail2
{
	Radius 16
	Height 56
	Speed 1
	Damage 0
	RenderStyle Translucent
	Alpha 0.7
	PROJECTILE
	+CLIENTSIDEONLY
	states
	{
	Spawn:
        CLNK P 0
		CLNK P 1 A_FadeOut(0.10)
		goto Spawn+1
	}
}

ACTOR ClinkAxe
{
  Radius 10
  Height 8
  Speed 25
  FastSpeed 30
  Damage ((random(1,8)*2))
  Damagetype "Physical"
  Projectile
  +NODAMAGETHRUST
  -ACTIVATEIMPACT
  -ACTIVATEPCROSS
  +THRUGHOST
  +WINDTHRUST
  Renderstyle Add
  Scale 0.6
  DeathSound "hknight/hit"
  States
  {
  Spawn:
    CLAX A 3 Bright A_PlaySound("hknight/axewhoosh")
    CLAX BC 3 Bright
    Loop
  Death:
    CLAX DEF 6 Bright
    Stop
  }
}

// Makes the SabreClaw more 50% more vulnerable to melee-type attacks when lunging at something :V
actor ClinkLungeAttackStatus : PowerProtection 
{ 
 Damagefactor "Melee", 1.5 
 DamageFactor "Sceptre", 1.5
 Damagefactor "Fist", 1.5
 Damagefactor "Kick", 1.5
 Damagefactor "Gauntlets", 1.5
 Damagefactor "Chainsaw", 1.5
 inventory.icon "" 
}

ACTOR ClinkNew : Clink replaces Clink
{
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; var int user_canusecrisisatk; // For checking if a monster has been given Skill/Map inventory items yet.

  MeleeRange 52
  Painchance 32
  Painchance "Fist", 48 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 80 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 48 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 255
  Painchance "GravityMP", 255
  Painchance "GravityHPMP", 255 

  States
  {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    CLNK A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    CLNK AB 10 A_Look
    Loop
  See:
    CLNK A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    CLNK ABCD 3
	{
	 if (CountInv("ClinkLungeAttackStatus",AAPTR_DEFAULT) > 0) { A_TakeInventory("ClinkLungeAttackStatus",9999); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("AVOIDMELEE",1); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 90) { A_SetTics(2); }

	 if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 45) { A_Chase; } else { A_Chase("Melee",""); }
	}
    Loop
  Missile:
    CLNK E 0
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 90) 
	 {
	  if (random(1,2) == 1) { return state("AxeMissile"); } else { return state("LungeAttack"); }	  
	  return state("See");
	 }
	 else
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 45) 
	 {
	  if (random(1,2) >= 3) { return state("AxeMissile"); } else { return state("LungeAttack"); }	  
	  return state("See"); 
	 }
	 return state("See");
	}
    goto See

  AxeMissile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    CLNK E 5 A_FaceTarget
    CLNK F 5 A_FaceTarget
    CLNK G 5
	{
	 A_FaceTarget;
     if (A_JumpIfCloser(52,"")) { A_CustomMeleeAttack(random[ClinkAttack](3,9), "clink/attack", "clink/attack"); } else { A_CustomMissile("ClinkAxe",30,0,0); }
	}
    Goto See

  LungeAttack:
	CLNK A 0 A_JumpIfCloser(208,1)
	Goto AxeMissile
	CLNK A 0 A_Jump(64, "AxeMissile")
	CLNK P 6 A_FaceTarget
	CLNK P 0
	{
	 if (CountInv("ClinkLungeAttackStatus",AAPTR_DEFAULT) < 1) { A_GiveInventory("ClinkLungeAttackStatus",1); }
	 A_FaceTarget;
	}
	CLNK Q 1 ThrustThingZ(0,40,0,1)
	CLNK Q 0 A_SpawnItemEx("SabreclawGhostTrail",0,0,0,0,0,0,0,128,0)
    CLNK E 0 A_FaceTarget
    CLNK Q 0 A_Recoil (-10)
	CLNK QQQQ 1 A_JumpIfCloser(71, "MeleeStrike")
	CLNK Q 0 A_SpawnItemEx("SabreclawGhostTrail",0,0,0,0,0,0,0,128,0)
	CLNK QQQQ 1 A_JumpIfCloser(71, "MeleeStrike")
	CLNK Q 0 A_SpawnItemEx("SabreclawGhostTrail",0,0,0,0,0,0,0,128,0)
	CLNK QQQQ 1 A_JumpIfCloser(71, "MeleeStrike")
	CLNK Q 0 A_SpawnItemEx("SabreclawGhostTrail",0,0,0,0,0,0,0,128,0)
	CLNK QQQP 1 A_JumpIfCloser(71, "MeleeStrike")
	CLNK P 0 A_SpawnItemEx("SabreclawGhostTrail2",0,0,0,0,0,0,0,128,0)
	CLNK PPPP 1 A_JumpIfCloser(71, "MeleeStrike")
	CLNK P 0 A_SpawnItemEx("SabreclawGhostTrail2",0,0,0,0,0,0,0,128,0)
	CLNK P 1 A_JumpIfCloser(71, "MeleeStrike")
	Goto See
  MeleeStrike:
	CLNK G 0 A_FaceTarget
	CLNK G 7
	{
     if (CountInv("ClinkLungeAttackStatus",AAPTR_DEFAULT) > 0) { A_TakeInventory("ClinkLungeAttackStatus",9999); }
	 A_CustomMeleeAttack(random(6,18), "clink/attack", "clink/attack", "Melee", 1);
	}
	Goto See

  Melee:
    TNT1 A 0 
	{
	 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1); // makes a Stealth Monster become more visible
     if (CountInv("ClinkLungeAttackStatus",AAPTR_DEFAULT) > 0) { A_TakeInventory("ClinkLungeAttackStatus",9999); }
    }
    CLNK E 5 A_FaceTarget
    CLNK F 4 A_FaceTarget
    CLNK G 7 A_CustomMeleeAttack(random[ClinkAttack](3,9), "clink/attack", "clink/attack")
    Goto See
  Pain:
    CLNK H 3 { if (CountInv("ClinkLungeAttackStatus",AAPTR_DEFAULT) > 0) { A_TakeInventory("ClinkLungeAttackStatus",9999); } }
    CLNK H 3 A_Pain
    Goto See
  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    CLNK IJ 6
	{
     if (CountInv("ClinkLungeAttackStatus",AAPTR_DEFAULT) > 0) { A_TakeInventory("ClinkLungeAttackStatus",9999); }
	}
    CLNK K 5 A_Scream
    CLNK L 5 A_NoBlocking
    CLNK MN 5 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    CLNK O -1
    Stop
  Ice:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 A_ChangeFlag("CANTSEEK", TRUE)
    CLNK H 5 A_GenericFreezeDeath
    CLNK H 1 A_FreezeDeathChunks
    wait
  Raise:
    CLNK N 5 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    CLNK MLKJI 5
    goto See
  }
}
actor FClink : ClinkNew
{
 -COUNTKILL 
 +FRIENDLY +THRUSPECIES +DONTHARMSPECIES
 Species "FriendlyMonsters"
 dropitem NoItemSpawn 1
}

ACTOR BeastBallNew : BeastBall replaces BeastBall { DamageType "Fire" }
ACTOR BeastNew : Beast replaces Beast
{
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; var int user_canusecrisisatk; // For checking if a monster has been given Skill/Map inventory items yet.

  Painchance 100
  Painchance "Fist", 150 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 250 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 150 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 255
  Painchance "GravityMP", 255
  Painchance "GravityHPMP", 255 

  States
  {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    BEAS A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    BEAS AB 10 A_Look
    goto Spawn+1
  See:
    BEAS A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    BEAS ABCDEF 3
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("AVOIDMELEE",1); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 90) { A_SetTics(2); }
	 A_Chase;
	}
    Loop
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    BEAS H 10 A_FaceTarget
    BEAS I 10 A_CustomComboAttack("BeastBall", 32, random[BeastAttack](1,8)*3, "beast/attack")
    Goto See
  Pain:
    BEAS G 3
    BEAS G 3 A_Pain
    Goto See
  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    BEAS R 6
    BEAS S 6 A_Scream
    BEAS TUV 6
    BEAS W 6 A_NoBlocking
    BEAS XY 6 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    BEAS Z -1
    Stop
  XDeath:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    BEAS J 5
    BEAS K 6 A_Scream
    BEAS L 5
    BEAS M 6
    BEAS N 5
    BEAS O 6 A_NoBlocking
    BEAS P 5
    BEAS Q -1
    Stop
  Ice:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 A_ChangeFlag("CANTSEEK", TRUE)
    BEAS G 5 A_GenericFreezeDeath
    BEAS G 1 A_FreezeDeathChunks
    wait
  Raise:
    BEAS P 5 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    BEAS O 6 
    BEAS N 5 
    BEAS M 6 
    BEAS L 5 
    BEAS K 6 
    BEAS J 5 
    goto See
  }
}
actor FBeast : BeastNew
{
 -COUNTKILL 
 +FRIENDLY +THRUSPECIES +DONTHARMSPECIES
 Species "FriendlyMonsters"
 dropitem NoItemSpawn 1
}

ACTOR MinotaurFX1New : MinotaurFX1 replaces MinotaurFX1 { DamageType "Fire" DamageType "Magic" }
ACTOR MinotaurFX2New : MinotaurFX2 replaces MinotaurFX2 { DamageType "Fire" DamageType "Magic" }
ACTOR MinotaurFX3New : MinotaurFX3 replaces MinotaurFX3 { DamageType "Fire" DamageType "Magic" }
ACTOR MaulotaurNew : Minotaur replaces Minotaur
{
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; var int user_canusecrisisatk; // For checking if a monster has been given Skill/Map inventory items yet.

  Painchance 25
  Painchance "Fist", 38 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 63 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 38 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 85
  Painchance "GravityMP", 85
  Painchance "GravityHPMP", 85 

  +AVOIDMELEE
  States
  {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    MNTR A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    MNTR AB 10 A_MinotaurLook
    goto Spawn+1
  Roam:
    MNTR A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    MNTR ABCD 5 A_MinotaurRoam
    Loop
  See:
    MNTR A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    MNTR ABCD 5 
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("AVOIDMELEE",1); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 45) { A_SetTics(4); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 90) { A_SetTics(3); }
	 A_MinotaurChase;
	}
    Loop
  Melee:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    MNTR V 10 A_FaceTarget
    MNTR W 7 A_FaceTarget
    MNTR X 12 A_MinotaurAtk1
    Goto See
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    MNTR V 10 A_MinotaurDecide
    MNTR Y 4 A_FaceTarget
    MNTR Z 9 A_MinotaurAtk2
    Goto See
  Hammer:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    MNTR V 10 A_FaceTarget
    MNTR W 7 A_FaceTarget
    MNTR X 12 A_MinotaurAtk3
    Goto See
  HammerLoop:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    MNTR X 12
    Goto Hammer
  Charge:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    MNTR U 2 A_MinotaurCharge
    Loop
  Pain:
    MNTR E 3
    MNTR E 6 A_Pain
    Goto See
  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    MNTR F 6 A_MinotaurDeath
    MNTR G 5
    MNTR H 6 A_Scream
    MNTR I 5
    MNTR J 6
    MNTR K 5
    MNTR L 6
    MNTR M 5 A_NoBlocking
    MNTR N 6
    MNTR O 5
    MNTR P 6
    MNTR Q 5
    MNTR R 6
    MNTR S 5 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    MNTR T -1 A_BossDeath
    Stop
  FadeOut:
    MNTR E 6
    MNTR E 2 A_Scream
    MNTR E 5 A_SpawnItemEx("MinotaurSmokeExit")
    MNTR E 5
    MNTR E 5 A_NoBlocking
    MNTR E 5
    MNTR E 5 A_SetTranslucent(0.66, 0)
    MNTR E 5 A_SetTranslucent(0.33, 0)
    MNTR E 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    MNTR E 10 A_BossDeath
    Stop
  Ice:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 A_ChangeFlag("CANTSEEK", TRUE)
    MNTR E 5 A_GenericFreezeDeath
    MNTR E 1 A_FreezeDeathChunks
    wait
  Raise:
    MNTR S 5 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    MNTR R 6 
    MNTR Q 5 
    MNTR P 6 
    MNTR O 5 
    MNTR N 6 
    MNTR M 5 
    MNTR L 6 
    MNTR K 5 
    MNTR J 6 
    MNTR I 5 
    MNTR H 6 
    MNTR G 5 
    MNTR F 6 
    goto See
  }
}
actor FMaulotaur : MaulotaurNew
{
 -COUNTKILL 
 +FRIENDLY +THRUSPECIES +DONTHARMSPECIES
 Species "FriendlyMonsters"
 dropitem NoItemSpawn 1
}

ACTOR SnakeProjANew : SnakeProjA replaces SnakeProjA { DamageType "Ice" DamageType "Magic" }
ACTOR SnakeProjBNew : SnakeProjB replaces SnakeProjB { DamageType "Fire" DamageType "Magic" }
ACTOR SnakeNew : Snake // replaces Snake
{
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; var int user_canusecrisisatk; // For checking if a monster has been given Skill/Map inventory items yet.

  Painchance 48
  Painchance "Fist", 72 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 120 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 72 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 255
  Painchance "GravityMP", 255
  Painchance "GravityHPMP", 255 
  Species "Ophidian"
  +DONTHARMSPECIES

  States
  {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    SNKE A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    SNKE AB 10 A_Look
    goto Spawn+1
  See:
    SNKE A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    SNKE ABCD 4
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("AVOIDMELEE",1); A_SetTics(3); }
	 A_Chase;
	}
    Loop
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    SNKE FF 5 A_FaceTarget
    SNKE FFF 4 A_CustomMissile("SnakeProjA", 32, 0, 0, CMF_CHECKTARGETDEAD)
    SNKE FFF 5 A_FaceTarget
    SNKE F 4 A_CustomMissile("SnakeProjB", 32, 0, 0, CMF_CHECKTARGETDEAD)
    Goto See
  Pain:
    SNKE E 3
    SNKE E 3 A_Pain
    Goto See
  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    SNKE G 5
    SNKE H 5 A_Scream
    SNKE IJKL 5
    SNKE M 5 A_NoBlocking
    SNKE NO 5 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    SNKE P -1
    Stop
  Ice:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 A_ChangeFlag("CANTSEEK", TRUE)
    SNKE E 5 A_GenericFreezeDeath
    SNKE E 1 A_FreezeDeathChunks
    wait
  Raise:
    SNKE P 5 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    SNKE ONMLKJIHG 5 
    goto See
  }
}
actor FSnake : SnakeNew
{
 -COUNTKILL 
 +FRIENDLY +THRUSPECIES +DONTHARMSPECIES
 Species "FriendlyMonsters"
 dropitem NoItemSpawn 1
}

ACTOR SorcererFX1New : SorcererFX1 replaces SorcererFX1 { DamageType "Fire" }
ACTOR DSparilMountedNew : Sorcerer1 replaces Sorcerer1
{
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; var int user_canusecrisisatk; // For checking if a monster has been given Skill/Map inventory items yet.

  Health 24000
  Painchance 56
  Painchance "Fist", 84 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 140 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 84 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 1
  Painchance "GravityMP", 1
  Painchance "GravityHPMP", 1 

  +AVOIDMELEE
  States
  {
  Pain.Charm: Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See
  Spawn:
    SRCR A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    SRCR AB 10 A_Look
    goto Spawn+1
  See:
    SRCR A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    SRCR ABCD 5 
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("AVOIDMELEE",1); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 45) { A_SetTics(4); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 90) { A_SetTics(3); }
	 A_Sor1Chase;
	}
    Loop
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    SRCR Q 7 A_FaceTarget
    SRCR R 6 A_FaceTarget
    SRCR S 10 A_Srcr1Attack
    Goto See
  Missile2:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    SRCR S 10 A_FaceTarget
    SRCR Q 7 A_FaceTarget
    SRCR R 6 A_FaceTarget
    SRCR S 10 A_Srcr1Attack
    Goto See
  Pain:
    SRCR Q 6 A_Sor1Pain
    Goto See
  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    SRCR E 7
    SRCR F 7 A_Scream
    SRCR G 7
    SRCR HIJK 6 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    SRCR L 25 A_PlaySound("dsparil/zap", CHAN_BODY, 1, FALSE, ATTN_NONE)
    SRCR MN 5
    SRCR O 4
    SRCR L 20 A_PlaySound("dsparil/zap", CHAN_BODY, 1, FALSE, ATTN_NONE)
    SRCR MN 5
    SRCR O 4
    SRCR L 12
    SRCR P -1 A_SorcererRise
  Ice:
    goto Death
  }
}

ACTOR SorcererFX1New : SorcererFX1 replaces SorcererFX1 { DamageType "Fire" }
ACTOR Sorcerer2FX1New : Sorcerer2FX1 replaces Sorcerer2FX1 { Damage 10 DamageType "Thunder" DamageType "Magic" }
ACTOR Sorcerer2FX2New : Sorcerer2FX2 replaces Sorcerer2FX2 { Damage 10 DamageType "Magic" }
ACTOR DSparilUnmountedNew : Sorcerer2 replaces Sorcerer2
{
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; var int user_canusecrisisatk; // For checking if a monster has been given Skill/Map inventory items yet.

  Health 56000
  Painchance 32
  Painchance "Fist", 48 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 80 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 48 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 1
  Painchance "GravityMP", 1
  Painchance "GravityHPMP", 1 

  +AVOIDMELEE
  States
  {
  Pain.Charm: Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See
  Spawn:
    SOR2 A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    SOR2 MN 10 A_Look
    goto Spawn+1
  See:
    SOR2 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    SOR2 MNOP 4
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("AVOIDMELEE",1); A_SetTics(3); }
	 A_Chase;
	}
    Loop
  Rise:
    SOR2 A 0 
    SOR2 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    SOR2 AB 4
    SOR2 C 4 A_PlaySound("dsparil/rise", CHAN_BODY, 1, FALSE, ATTN_NONE)
    SOR2 DEF 4
    SOR2 G 12 A_PlaySound("dsparil/sight", CHAN_BODY, 1, FALSE, ATTN_NONE)
    Goto See
  Pain:
    SOR2 Q 3
    SOR2 Q 6 A_Pain
    Goto See
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    SOR2 R 9 A_Srcr2Decide
    SOR2 S 9 A_FaceTarget
    SOR2 T 20 A_Srcr2Attack
    Goto See
  Teleport:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0) // makes sure D'Sparil is as stealth as possible when proceeding to teleport if flagged as stealth
    SOR2 LKJIHG 6
    Goto See
  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    SDTH A 8 A_Sor2DthInit
    SDTH B 8
    SDTH C 8 A_PlaySound("dsparil/scream", CHAN_BODY, 1, FALSE, ATTN_NONE)
  DeathLoop:
    SDTH DE 7
    SDTH F 7 A_Sor2DthLoop
    SDTH G 6 A_PlaySound("dsparil/explode", CHAN_BODY, 1, FALSE, ATTN_NONE)
    SDTH H 6 A_SpawnItemEx("DSparilStaff",0,0,0,random(-12,12),random(-12,12),random(-12,12))
    SDTH I 18
    SDTH J 6 A_NoBlocking
    SDTH K 6 A_PlaySound("dsparil/bones", CHAN_BODY, 1, FALSE, ATTN_NONE)
    SDTH LMN 6 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    SDTH O -1 A_BossDeath
    Stop
  Ice:
    goto Death
  }
}

//****************
// New Monsters
//****************

// Death Knight
ACTOR DeathKnight 30114 
{ 
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; var int user_canusecrisisatk; // For checking if a monster has been given Skill/Map inventory items yet.

  Health 1250
  Radius 24
  Height 72
  Mass 700 
  Speed 10
  PainChance 20 
  Painchance "Fist", 30 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 50 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 30 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 255
  Painchance "GravityMP", 255
  Painchance "GravityHPMP", 255 

  MeleeDamage 10
  MONSTER
  +FLOORCLIP 
  +NOTARGET 
  +NORADIUSDMG
  +MISSILEMORE
  +BOSS
  +DEFLECT
  +AVOIDMELEE
  Obituary "%o got thought %g could kill a Death Knight."
  HitObituary "A Death Knight hacked %o into pieces." 
  MeleeSound "monster/dknhit" 
  SeeSound "monster/dknsit" 
  PainSound "monster/dknpai" 
  DeathSound "monster/dkndth" 
  ActiveSound "monster/dknact" 
  +DONTHARMSPECIES
  Species "UndeadWarrior"

  States 
  { 
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn: 
    DKNT A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    DKNT AB 10 A_Look 
    goto Spawn+1 
  See:
    DKNT A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    DKNT A 0 A_Jump(32,"SeeShielded")
    DKNT A 0 A_UnSetReflectiveInvulnerable
    DKNT AABBCCDD 3
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("AVOIDMELEE",1); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 90) { A_SetTics(2); }
	 A_Chase;
	}
    loop
  SeeShielded:
    DKNT P 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    DKNT P 0 A_SetReflectiveInvulnerable
    DKNT PPQQRRSS 3 A_Chase
    goto See
  Melee:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    DKNT E 0 A_UnSetReflectiveInvulnerable
    DKNT E 6 A_FaceTarget
    DKNT F 1 A_Playsound ("monster/dknswg")
    DKNT F 6 A_FaceTarget
    DKNT G 6 A_MeleeAttack 
    Goto See
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    DKNT A 0 A_Jump(88,"Attack1")
    DKNT A 0 A_Jump(88,"Attack2")
    DKNT E 0 Bright A_UnSetReflectiveInvulnerable
    DKNT E 6 Bright A_FaceTarget
    DKNT F 6 Bright A_Playsound ("monster/kntswg")
    DKNT G 0 Bright A_CustomMissile ("DKDart",32,0,-3,0)
    DKNT G 0 Bright A_CustomMissile ("DKDart",32,0,-1,0)
    DKNT G 0 Bright A_CustomMissile ("DKDart",32,0,1,0)
    DKNT G 5 Bright A_CustomMissile ("DKDart",32,0,3,0)
    DKNT A 0 A_Jump(64,"Attack2")
    Goto See
  Attack1:
    DKNT T 0 Bright A_SetReflectiveInvulnerable
    DKNT T 6 Bright A_FaceTarget
    DKNT U 1 Bright A_FaceTarget
    DKNT U 0 Bright A_CustomMissile("FHeadShot",44,-4,-12,0)      
    DKNT U 5 Bright A_CustomMissile("FHeadShot",44,-4,12,0)
    DKNT U 0 Bright A_UnSetReflectiveInvulnerable
    DKNT U 0 A_Jump(64,"Attack2")
    Goto See
  Attack2:
    DKNT T 0 Bright A_SetReflectiveInvulnerable
    DKNT T 3 Bright A_FaceTarget      
    DKNT U 3 Bright A_CustomMissile("DKbolt",44,-4,0,0)
    DKNT T 3 Bright A_FaceTarget      
    DKNT U 3 Bright A_CustomMissile("DKbolt",44,-4,0,0)
    DKNT T 3 Bright A_FaceTarget      
    DKNT U 3 Bright A_CustomMissile("DKbolt",44,-4,0,0)
    DKNT T 3 Bright A_FaceTarget      
    DKNT U 3 Bright A_CustomMissile("DKbolt",44,-4,0,0)
    DKNT T 3 Bright A_FaceTarget      
    DKNT U 3 Bright A_CustomMissile("DKbolt",44,-4,0,0)
    DKNT T 3 Bright A_FaceTarget      
    DKNT U 2 Bright A_CustomMissile("DKbolt",44,-4,0,0)
    DKNT U 0 Bright A_UnSetReflectiveInvulnerable
    Goto See
  Pain:
    DKNT H 2 
    DKNT H 2 A_Pain
    DKNT T 105 A_SetReflectiveInvulnerable
    DKNT T 0 A_UnSetReflectiveInvulnerable
    DKNT P 0 A_Jump (16,1)
    Goto SeeShielded
    DKNT H 1
    Goto See
  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    DKNT I 0 Bright A_CustomMissile("DKSword",44,32,-90,0)
    DKNT I 8 Bright A_CustomMissile("DKShield",44,-32,90,0)
    DKNT J 8 Bright A_Scream 
    DKNT K 8 Bright
    DKNT L 8 Bright A_NoBlocking 
    DKNT M 8 Bright 
    DKNT N 8 Bright ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    DKNT O -1 
    Stop 
  Ice:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 A_ChangeFlag("CANTSEEK", TRUE)
    DKNT H 5 A_GenericFreezeDeath
    DKNT H 1 A_FreezeDeathChunks
    wait
  Raise:
    DKNT Q 8 Bright ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)  
    DKNT NMLKJI 8 Bright
    Goto See 
  } 
}

Actor DeathKnightGhost : DeathKnight
{
  +SHADOW
  +GHOST
  RenderStyle Translucent
  Alpha 0.4
  +DONTHARMSPECIES
  Species "UndeadWarrior"
}

ACTOR DKDart
{
   Radius 3
   Height 12
   Speed 25
   Damage 5
   ExplosionDamage 64
   ExplosionRadius 64
   RENDERSTYLE ADD
   ALPHA 1.00
   PROJECTILE
   +THRUGHOST
   Seesound "monster/dkndrt"
   DeathSound "weapons/firex2"
   States
   {
   Spawn:
      DKAT ABC 3 Bright
      loop
   Death:
      DKAT D 0 Bright A_SetTranslucent (0.85,1)
      DKAT D 3 Bright
      DKAT E 3 Bright A_Explode
      DKAT FG 3 Bright
      DKAT H 0 Bright A_CustomMissile("DKFire",0,0,45,2)
      DKAT H 0 Bright A_CustomMissile("DKFire",0,0,90,2)
      DKAT H 0 Bright A_CustomMissile("DKFire",0,0,135,2)
      DKAT H 0 Bright A_CustomMissile("DKFire",0,0,180,2)
      DKAT H 0 Bright A_CustomMissile("DKFire",0,0,225,2)
      DKAT H 0 Bright A_CustomMissile("DKFire",0,0,270,2)
      DKAT H 0 Bright A_CustomMissile("DKFire",0,0,315,2)
      DKAT H 3 Bright A_CustomMissile("DKFire",0,0,0,2)
      DKAT IJKLM 3 Bright
      stop
   }
}

ACTOR FHeadShot
{
   Radius 12
   Height 12
   Speed 15
   Damage 10
   RENDERSTYLE ADD
   ALPHA 1.00
   PROJECTILE
   DamageType Fire
   +SEEKERMISSILE
   +THRUGHOST
   Seesound "monster/dknmsl"
   DeathSound "weapons/boom1"
   States
   {
   Spawn:
      FHED ABCD 3 Bright A_SeekerMissile (5,15)
      loop
   Death:
      RIP1 DEFGH 5 Bright
      stop
   }
}

ACTOR DKbolt
{
   Radius 8
   Height 8
   Speed 15
   Damage 8
   PROJECTILE
   RENDERSTYLE ADD
   ALPHA 0.80
   DamageType Fire
   +THRUGHOST
   SeeSound "Weapons/boltfi"
   DeathSound "weapons/firex4"
   States
   {
   Spawn:
      BOLT A 1 Bright A_BishopMissileWeave
      BOLT A 0 A_SpawnItem("RedPuff",0,0)
      loop
   Death:
      HBAL EFHI 2 Bright
      stop
   }
}

ACTOR DKSword
{   
   Radius 8
   Height 8
   Speed 1
   PROJECTILE
   RENDERSTYLE Normal
   -NOGRAVITY
   +LOWGRAVITY
   States
   {
   Spawn:
      SWRD KLMNOPQ 3 BRIGHT
      goto Death 
   Death:
      SWRD RS 4 BRIGHT
      SWRD T 4 BRIGHT
      SWRD U 4
      SWRD T 4 BRIGHT
      SWRD U 8
      SWRD T 4 BRIGHT
      SWRD U 16
      SWRD T 4 BRIGHT
      SWRD U -1
   }
}

ACTOR DKShield
{   
   Radius 8
   Height 8
   Speed 1
   PROJECTILE
   RENDERSTYLE Normal
   -NOGRAVITY
   +LOWGRAVITY
   States
   {
   Spawn:
      SHLD ABCDEFGHI 3
      goto death 
   Death:
      SHLD H -1
   }
}

ACTOR DKFire
{
   Radius 2
   Height 6
   Speed 4
   Damage 0
   ExplosionDamage 4
   ExplosionRadius 8
   RENDERSTYLE ADD
   ALPHA 0.95
   PROJECTILE
   +THRUGHOST
   DeathSound "weapons/scorch"
   States
   {
   Spawn:
      DKAT NOPQRSTNOPQRSTNOPQRST 3 Bright A_Explode
      goto death
   Death:
      DKAT UVW 3 Bright A_Explode
      stop
   }
}

ACTOR RedPuff
{   
   Radius 0
   Height 1
   Speed 0
   PROJECTILE
   RENDERSTYLE ADD
   ALPHA 0.85
   States
   {
   Spawn:
      NULL A 3 Bright
      RPUF ABCDE 3 Bright
      Stop 
   }
}

// Undead Warrior/Knight spawner
actor KnightSpawner : CustomInventory replaces Knight
{
 +ISMONSTER
 +RANDOMIZE
 states
 {
    UpgradeClass2b:
     KNIG A 0 A_SpawnItemEx("DeathKnightGhost",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
     stop

    UpgradeClass2:
     KNIG A 0 A_JumpIf( random(1,256) <= ACS_NamedExecuteWithResult("GetEvolveChance") , "UpgradeClass2b")
     KNIG A 0 A_SpawnItemEx("DeathKnight",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
     stop

    UpgradeClass:
     KNIG A 0 A_JumpIf( random(1,2048) <= ACS_NamedExecuteWithResult("GetEvolveChance") , "UpgradeClass2")
     KNIG A 0 A_SpawnItemEx("KnightGhostNew",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
     stop

  Spawn:
   KNIG A 0 
   KNIG A 0 A_JumpIf( random(1,256) <= ACS_NamedExecuteWithResult("GetEvolveChance") , "UpgradeClass")
   KNIG A 0 A_SpawnItemEx("KnightNew",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
   stop
 }
}

// Undead Warrior/Knight spawner
actor KnightGhostSpawner : CustomInventory replaces KnightGhost
{
 +ISMONSTER
 +RANDOMIZE
 states
 {
    UpgradeClass:
     KNIG A 0 A_SpawnItemEx("DeathKnightGhost",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
     stop

  Spawn:
   KNIG A 0 
   KNIG A 0 A_JumpIf( random(1,2048) <= ACS_NamedExecuteWithResult("GetEvolveChance") , "UpgradeClass")
   KNIG A 0 A_SpawnItemEx("KnightGhostNew",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
   stop
 }
}

// Hell Guard
actor HellGuard 3114
{
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; var int user_canusecrisisatk; // For checking if a monster has been given Skill/Map inventory items yet.

  //$Category "ZDoom Monster pack"
  Health 420 // 300
  Radius 24
  Height 64
  Speed 12 // 8
  PainChance 50
  Painchance "Fist", 75 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 125 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 75 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 255
  Painchance "GravityMP", 255
  Painchance "GravityHPMP", 255 
  Mass 750 // 500
  MONSTER 
  +FLOORCLIP
  SeeSound "hellguard/sight"
  PainSound "hellguard/pain"
  DeathSound "hellguard/death"
  ActiveSound "hellguard/idle"
  Obituary "%o was fried to cinders by an abyssal guard."
  MeleeDamage 12 // 8
  Species "Ophidian"
  Species "HellNoble"
  +DONTHARMSPECIES
  DropItem "PhoenixRodAmmo", 132, 5

  States
  {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    HLGD A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    HLGD AB 10 A_Look
    goto Spawn+1
  See:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    HLGD AABBCCDD 3
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("AVOIDMELEE",1); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 90) { A_SetTics(2); }
	 A_Chase;
	}
    Loop
  Missile:
    TNT1 A 0
	{
	 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1); // makes a Stealth Monster become more visible
	 if (user_monsterlevel > 60) { return state("Missile2"); }
	 return state("Missile1");
	}
  Missile1:
    HLGD E 8 A_FaceTarget
    HLGD F 4 Bright A_CustomMissile("HellGuardBall", 28, -8, (random(-4,4)*2), 33, random(-3,3))
    HLGD E 4 A_FaceTarget
    HLGD F 4 Bright A_CustomMissile("HellGuardBall", 28, -8, (random(-2,2)*2), 33, random(-3,3))
    HLGD E 4 A_FaceTarget
    HLGD F 4 Bright A_CustomMissile("HellGuardBall", 28, -8, (random(-4,4)*2), 33, random(-3,3))
    Goto See
  Missile2:
    HLGD E 4 A_FaceTarget
    HLGD F 2 Bright A_CustomMissile("HellGuardBall", 28, -8, (random(-4,4)*2), 33, random(-3,3))
    HLGD E 2 A_FaceTarget
    HLGD F 2 Bright A_CustomMissile("HellGuardBall", 28, -8, (random(-4,4)*2), 33, random(-3,3))
    HLGD E 2 A_FaceTarget
    HLGD F 2 Bright A_CustomMissile("HellGuardBall", 28, -8, (random(-2,2)*2), 33, random(-3,3))
    HLGD E 2 A_FaceTarget
    HLGD F 2 Bright A_CustomMissile("HellGuardBall", 28, -8, (random(-4,4)*2), 33, random(-3,3))
    HLGD E 2 A_FaceTarget
    HLGD F 2 Bright A_CustomMissile("HellGuardBall", 28, -8, (random(-4,4)*2), 33, random(-3,3))
    Goto See
  Pain:
    HLGD G 2
    HLGD G 2 A_Pain
    Goto See
  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    HLGD H 6
    HLGD I 6 A_Scream
    HLGD J 6
    HLGD K 6 A_Fall
    HLGD L 6
    HLGD M 6 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    HLGD N -1
    Stop
  Ice:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 A_ChangeFlag("CANTSEEK", TRUE)
    HLGD G 5 A_GenericFreezeDeath
    HLGD G 1 A_FreezeDeathChunks
    wait
  Raise:
    HLGD O 8 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    HLGD NMLKJI 8
    Goto See
  }
}

actor HellGuardBall
{
    Radius 13
    Height 8
    Speed 12 // 10
    Damage 9 // 6
    PROJECTILE
    RENDERSTYLE ADD
    ALPHA 0.67
    SeeSound "hellguard/shot"
    DeathSound "hellguard/shothit"
    Decal PlasmaScorchLower
    States
    {
    Spawn:
        HGFB ABCD 2 Bright
        Loop
    Death:
        HGFB EFGH 4 Bright
        Stop
    }
}

// Ophidian spawner
actor SnakeSpawner : CustomInventory replaces Snake
{
 +ISMONSTER
 +RANDOMIZE
 states
 {
    UpgradeClass:
     TNT1 A 0 A_SpawnItemEx("HellGuard",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
     stop

  Spawn:
   TNT1 A 0 
   TNT1 A 0 A_JumpIf( random(1,256) <= ACS_NamedExecuteWithResult("GetEvolveChance") , "UpgradeClass")
   TNT1 A 0 A_SpawnItemEx("SnakeNew",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
   stop
 }
}

// Plague Gargoyle
ACTOR PlagueImp : HereticImpLeader 31026
{  
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; var int user_canusecrisisatk; // For checking if a monster has been given Skill/Map inventory items yet.

  Health 120
  Translation "145:168=225:240", "255:248=0:0"
  Scale 1
  
  Obituary "%o was poisoned by a plague gargoyle"
  HitObituary "%o was ripped up by a plague gargoyle"
  Painchance 160
  Painchance "Fist", 240 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 255 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 240 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 255
  Painchance "GravityMP", 255
  Painchance "GravityHPMP", 255 
  +DONTHARMSPECIES
  Species "Gargoyle"

  States
  {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    IMPX A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    IMPX ABCB 10 A_Look
    goto Spawn+1
  See:
    IMPX A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    IMPX AABBCCBB 3
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 90) { A_SetTics(2); }
	 A_Chase;
	}
    Loop
  Melee:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    IMPX DE 6 A_FaceTarget
    IMPX F 6 A_CustomMeleeAttack(random[ImpMeAttack](6,14), "himp/attack", "himp/attack")
    Goto See
  Missile:
    IMPX DE 6 A_FaceTarget
    IMPX F 6 A_CustomMissile ("PlagueShot", 32, 0, random(-6,6))
    Goto See
  Pain:
    IMPX G 3
    IMPX G 3 A_Pain
    Goto See
  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    IMPX G 4 A_ImpDeath
    IMPX H 5 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    Wait
  XDeath:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    IMPX S 5 A_ImpXDeath1
    IMPX TU 5
    IMPX V 5 A_Gravity
    IMPX W 5 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    Wait
  Ice:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 A_ChangeFlag("CANTSEEK", TRUE)
    IMPX G 5 A_GenericFreezeDeath
    IMPX G 1 A_FreezeDeathChunks
    wait
  Crash:
    IMPX I 0 A_ChangeFlag("NOGRAVITY",0)
    IMPX I 0 A_SpawnItemEx("HereticImpChunk1", 0, 0, 0, random(-4,4), random(-4,4), 9, 0, SXF_TRANSFERTRANSLATION + SXF_NOCHECKPOSITION, 0)
    IMPX I 0 A_SpawnItemEx("HereticImpChunk2", 0, 0, 0, random(-4,4), random(-4,4), 9, 0, SXF_TRANSFERTRANSLATION + SXF_NOCHECKPOSITION, 0)
    IMPX I 7 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    IMPX J 7 A_Scream
    IMPX K 7
    IMPX L -1
    Stop
  XCrash:
    IMPX X 7 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    IMPX Y 7
    IMPX Z -1
    Stop
  Raise:
    IMPX L 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0) 
    IMPX L 0 A_RemoveChildren
    IMPX LKJIHG 6
    Goto See
  }
}

ACTOR PlagueShot
{
  var int user_random; var int user_ailment1; var int user_ailmentmaxchance;
  Radius 8
  Height 16
  Speed 16
  Damage (5*random(3,5))
  PROJECTILE
  +THRUGHOST
  +HITMASTER
  scale 0.5
  DeathSound "monster/plaugeBall"
   
  States
  {
  Spawn:
    FVUL AAABBB 1 Bright A_SpawnItemEx("BarbTrail",0,0,0,0,0,0,0,128,0)
    loop
  Death:
    TNT1 A 0 Bright
	{
	 if (IsPointerEqual(AAPTR_MASTER, AAPTR_PLAYER1) == TRUE) 
	 {
	  A_SetUserVar("user_ailmentmaxchance",8);
	  if (CallACS("GetBuffTimer",7) > 0) { A_SetUserVar("user_ailmentmaxchance",user_ailmentmaxchance*4); }
	  if (CountInv("EvadeAnAttack",AAPTR_PLAYER1) > 0) { return state("Death2"); }
	  if (CountInv("InvulnerabilitySpell",AAPTR_PLAYER1) > 0) { return state("Death2"); }
	  if (random(1,user_ailmentmaxchance) <= 3)
	  {
	   ACS_NamedExecuteAlways("BuffTimer",0,8,16,random(140,210)); // Poison for 4-6 seconds [tics] (do not ignore God/Invuln/Mercy-Invuln)
	  }
	 }
	 return state("");
	}
  Death2:
    FVUL CDEF 4 Bright
    stop
  }
}

// Dark/Watcher Gargoyle
ACTOR WatcherImp : HereticImp 
{
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; var int user_canusecrisisatk; // For checking if a monster has been given Skill/Map inventory items yet.

  Health 120
  Radius 16
  Height 36
  Mass 50
  Speed 15
  scale 1.2
  Monster
  +FLOAT
  +NOGRAVITY
  +SPAWNFLOAT
  +DONTOVERLAP
  +MISSILEMORE
  SeeSound "himp/sight"
  AttackSound "himp/attack"
  PainSound "himp/pain"
  DeathSound "himp/death"
  ActiveSound "himp/active"
  Obituary "%o was burnt by a Watcher Gargoyle."
  HitObituary "%o was slashed by a Watcher Gargoyle."

  DamageFactor "Fire", 0.5
  PainChance 50
  Painchance "Fire", 25 // Fire attacks have a -50% chance of stunning an enemy
  Painchance "Fist", 75 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 125 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 75 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 255
  Painchance "GravityMP", 255
  Painchance "GravityHPMP", 255 
  +DONTHARMSPECIES
  Species "Gargoyle"
  
  States
  {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    WATC A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    WATC ABCB 10 A_Look
    goto Spawn+1
  See:
    WATC A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    WATC AABBCCBB 3
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 90) { A_SetTics(2); }
	 A_Chase;
	}
    Loop

  Melee:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    WATC DE 4 BRIGHT A_FaceTarget
    WATC F 4 BRIGHT A_CustomMeleeAttack(random[ImpMeAttack](7,14), "himp/attack")
    WATC "[\]" 4 BRIGHT A_FaceTarget
    WATC ] 0 BRIGHT A_CustomMeleeAttack(random[ImpMeAttack](7,14), "himp/attack")     
    Goto See

  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    WATC E 0 BRIGHT A_jump(85,"Beastball")	
    WATC DE 4 BRIGHT A_FaceTarget
    WATC F 4 BRIGHT A_CustomComboAttack("HereticImpBall2", 28, 14, "himp/leaderattack")	
    WATC "[\]" 4 BRIGHT A_FaceTarget
    WATC ] 0 BRIGHT A_CustomComboAttack("HereticImpBall2", 28, -14, "himp/leaderattack")	
    WATC DE 4 BRIGHT A_FaceTarget
    WATC F 4 BRIGHT A_CustomComboAttack("HereticImpBall2", 28, 14, "himp/leaderattack")    
    Goto See
  Beastball:
    WATC DE 6 BRIGHT A_FaceTarget
    WATC F 6 BRIGHT A_CustomComboAttack(BeastBall2, 28, random[BeastAttack](1,8)*3, "beast/attack")
    Goto See
  Pain:
    WATC G 3
    WATC G 3 A_Pain
    Goto See
  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    WATC G 4 A_ImpDeath
    WATC H 5
    Wait
  XDeath:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    WATC S 5 A_ImpXDeath1
    WATC TU 5
    WATC V 5 A_Gravity
    WATC W 5 
    Wait
  Crash:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    WATC I 7 A_ImpExplode
    WATC J 7 A_Scream
    WATC K 7
    WATC L -1
    Stop
  XCrash:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    WATC X 7
    WATC Y 7
    WATC Z -1
    Stop
  Ice:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 A_ChangeFlag("CANTSEEK", TRUE)
    WATC G 5 A_GenericFreezeDeath
    WATC G 1 A_FreezeDeathChunks
    wait
  Raise:
    WATC H 5 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    WATC G 4
    goto See
  }
}

Actor HereticImpBall2 : HereticImpBall
{
   States
   {
   	Spawn:
		HIB1 ABC 6 Bright
		Loop
	Death:
		HIB1 DEFG 5 Bright
		Stop
   }
}

Actor Beastball2 : BeastBall
{
   States
   {
   	Spawn:
		FRB1 AABBCC 2 A_SpawnItemEx("Puffy", random2[BeastPuff]()*0.015625, random2[BeastPuff]()*0.015625, random2[BeastPuff]()*0.015625, 
									0,0,0,0,SXF_ABSOLUTEPOSITION, 64)
		Loop
	Death:
		HIB2 DEFGH 4
		Stop
	}
}

// Gargoyle Leader spawner
actor GargoyleLeaderSpawner : CustomInventory replaces HereticImpLeader
{
 +FLOAT
 +NOGRAVITY
 +SPAWNFLOAT
 +DONTOVERLAP
 +ISMONSTER
 +RANDOMIZE
 states
 {
      UpgradeClass1a:
       TNT1 A 0 A_SpawnItemEx("PlagueImp",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
       stop

      UpgradeClass1b:
       TNT1 A 0 A_SpawnItemEx("WatcherImp",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
       stop

	UpgradeClass1:
	 TNT1 A 0 A_Jump(256, "UpgradeClass1a", "UpgradeClass1b")
	 stop

  Spawn:
   TNT1 A 0 
   TNT1 A 0 A_JumpIf( random(1,256) <= ACS_NamedExecuteWithResult("GetEvolveChance") , "UpgradeClass1")
   TNT1 A 0 A_SpawnItemEx("HereticImpLeaderNew",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
   stop
 }
}

// Gargoyle spawner
actor GargoyleSpawner : CustomInventory replaces HereticImp
{
 +FLOAT
 +NOGRAVITY
 +SPAWNFLOAT
 +DONTOVERLAP
 +ISMONSTER
 +RANDOMIZE
 states
 {
      UpgradeClass2a:
       TNT1 A 0 A_SpawnItemEx("PlagueImp",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
       stop

      UpgradeClass2b:
       TNT1 A 0 A_SpawnItemEx("WatcherImp",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
       stop

	UpgradeClass2:
	 TNT1 A 0 A_Jump(256, "UpgradeClass2a", "UpgradeClass2b")
	 stop

    UpgradeClass:
     TNT1 A 0 A_JumpIf( random(1,256) <= ACS_NamedExecuteWithResult("GetEvolveChance") , "UpgradeClass2")
     TNT1 A 0 A_SpawnItemEx("HereticImpLeaderNew",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
     stop

  Spawn:
   TNT1 A 0 
   TNT1 A 0 A_JumpIf( random(1,256) <= ACS_NamedExecuteWithResult("GetEvolveChance") , "UpgradeClass")
   TNT1 A 0 A_SpawnItemEx("HereticImpNew",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
   stop
 }
}

// Golem Spawner
actor GolemSpawner : CustomInventory replaces Mummy
{
 +ISMONSTER
 +RANDOMIZE
 states
 {
    UpgradeClass4b:
     TNT1 A 0 A_SpawnItemEx("IceGolemGhost",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
     stop

    UpgradeClass4:
     TNT1 A 0 A_Jump(64,"UpgradeClass4b")
     TNT1 A 0 A_SpawnItemEx("IceGolem",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
     stop

    UpgradeClass3:
     TNT1 A 0 A_JumpIf( random(1,2048) <= ACS_NamedExecuteWithResult("GetEvolveChance") , "UpgradeClass4")
     TNT1 A 0 A_SpawnItemEx("MummyLeaderGhostNew",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
     stop

    UpgradeClass2:
     TNT1 A 0 A_JumpIf( random(1,256) <= ACS_NamedExecuteWithResult("GetEvolveChance") , "UpgradeClass3")
     TNT1 A 0 A_SpawnItemEx("MummyLeaderNew",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
     stop

    UpgradeClass:
     TNT1 A 0 A_JumpIf( random(1,256) <= ACS_NamedExecuteWithResult("GetEvolveChance") , "UpgradeClass2")
     TNT1 A 0 A_SpawnItemEx("MummyGhostNew",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
     stop

  Spawn:
   TNT1 A 0 
   TNT1 A 0 A_JumpIf( random(1,256) <= ACS_NamedExecuteWithResult("GetEvolveChance") , "UpgradeClass")
   TNT1 A 0 A_SpawnItemEx("MummyNew",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
   stop
 }
}

// Golem Ghost Spawner
actor GolemGhostSpawner : CustomInventory replaces MummyGhost
{
 +ISMONSTER
 +RANDOMIZE
 states
 {
    UpgradeClass3b:
     TNT1 A 0 A_SpawnItemEx("IceGolemGhost",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
     stop

    UpgradeClass3:
     TNT1 A 0 A_Jump(64,"UpgradeClass3b")
     TNT1 A 0 A_SpawnItemEx("IceGolem",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
     stop

    UpgradeClass2:
     TNT1 A 0 A_JumpIf( random(1,2048) <= ACS_NamedExecuteWithResult("GetEvolveChance") , "UpgradeClass3")
     TNT1 A 0 A_SpawnItemEx("MummyLeaderGhostNew",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
     stop

    UpgradeClass:
     TNT1 A 0 A_JumpIf( random(1,256) <= ACS_NamedExecuteWithResult("GetEvolveChance") , "UpgradeClass2")
     TNT1 A 0 A_SpawnItemEx("MummyLeaderNew",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
     stop

  Spawn:
   TNT1 A 0 
   TNT1 A 0 A_JumpIf( random(1,256) <= ACS_NamedExecuteWithResult("GetEvolveChance") , "UpgradeClass")
   TNT1 A 0 A_SpawnItemEx("MummyGhostNew",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
   stop
 }
}

// NitroGolem Spawner
actor NitroGolemSpawner : CustomInventory replaces MummyLeader
{
 +ISMONSTER
 +RANDOMIZE
 states
 {
    UpgradeClass2b:
     TNT1 A 0 A_SpawnItemEx("IceGolemGhost",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
     stop

    UpgradeClass2:
     TNT1 A 0 A_Jump(64,"UpgradeClass2b")
     TNT1 A 0 A_SpawnItemEx("IceGolem",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
     stop

    UpgradeClass:
     TNT1 A 0 A_JumpIf( random(1,2048) <= ACS_NamedExecuteWithResult("GetEvolveChance") , "UpgradeClass2")
     TNT1 A 0 A_SpawnItemEx("MummyLeaderGhostNew",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
     stop

  Spawn:
   TNT1 A 0 
   TNT1 A 0 A_JumpIf( random(1,256) <= ACS_NamedExecuteWithResult("GetEvolveChance") , "UpgradeClass")
   TNT1 A 0 A_SpawnItemEx("MummyLeaderNew",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
   stop
 }
}

// NitroGolem Ghost Spawner
actor NitroGolemGhostSpawner : CustomInventory replaces MummyLeaderGhost
{
 +ISMONSTER
 +RANDOMIZE
 states
 {
    UpgradeClass1b:
     TNT1 A 0 A_SpawnItemEx("IceGolemGhost",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
     stop

    UpgradeClass:
     TNT1 A 0 A_Jump(64,"UpgradeClass1b")
     TNT1 A 0 A_SpawnItemEx("IceGolem",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
     stop

  Spawn:
   TNT1 A 0 
   TNT1 A 0 A_JumpIf( random(1,2048) <= ACS_NamedExecuteWithResult("GetEvolveChance") , "UpgradeClass")
   TNT1 A 0 A_SpawnItemEx("MummyLeaderGhostNew",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
   stop
 }
}

// IronLich Spawner
actor LichSpawner : CustomInventory replaces Ironlich
{
 +ISMONSTER
 +RANDOMIZE
 states
 {
    UpgradeClass3:
     TNT1 A 0 A_SpawnItemEx("BloodLich",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
     stop

    UpgradeClass2:
     TNT1 A 0 A_JumpIf( random(1,1024) <= ACS_NamedExecuteWithResult("GetEvolveChance") , "UpgradeClass3")
     TNT1 A 0 A_SpawnItemEx("GoldLich",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
     stop

    UpgradeClass:
     TNT1 A 0 A_JumpIf( random(1,512) <= ACS_NamedExecuteWithResult("GetEvolveChance") , "UpgradeClass2")
     TNT1 A 0 A_SpawnItemEx("IceLich",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
     stop

  Spawn:
   TNT1 A 0 
   TNT1 A 0 A_JumpIf( random(1,256) <= ACS_NamedExecuteWithResult("GetEvolveChance") , "UpgradeClass")
   TNT1 A 0 A_SpawnItemEx("IronLichNew",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
   stop
 }
}

// Ice Lich
ACTOR IceLich : IceGuy
{
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; var int user_canusecrisisatk; // For checking if a monster has been given Skill/Map inventory items yet.

  obituary "%o was frozen by an Ice Lich"
  health 700
  radius 40
  height 72
  mass 500
  speed 6

  painchance 16
  Painchance "Fist", 24 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 40 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 24 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 255
  Painchance "GravityMP", 255
  Painchance "GravityHPMP", 255 

  seesound "ironlich/sight"
  attacksound ""
  painsound "ironlich/pain"
  deathsound "freeze/shatter"
  activesound "ironlich/active"
  Damagefactor "Ice", 0
  Damagefactor "Fire", 2
  MONSTER
  +NOGRAVITY
  +NOBLOOD
  +FLOAT
  +MISSILEMORE
  +DONTBLAST
  +DONTMORPH
  +DONTSQUASH
  +NOICEDEATH
  +DONTSPLASH
  +BOSSDEATH
  states
  {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    ILCH A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    ILCH A 10 A_Look
    goto Spawn+1
  See:
    LICH A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    ILCH A 4
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("AVOIDMELEE",1); A_SetTics(3); }

	 A_Chase;
     A_SpawnItemEx("IceGuyWisp1", random(-20,20), random(-20,20), random(50,70), 0, 0, 0, 32, 128);
	}
    ILCH A 4
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("AVOIDMELEE",1); A_SetTics(3); }

	 A_Chase;
     A_SpawnItemEx("IceGuyWisp1", random(-20,20), random(-20,20), random(50,70), 0, 0, 0, 32, 128);
	}
    ILCH A 4
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("AVOIDMELEE",1); A_SetTics(3); }

	 A_Chase;
	}
    loop
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    ILCH B 0 bright A_JumpIfCloser(300, "Breath")
    ILCH B 0 bright A_FaceTarget
    ILCH B 0 bright A_PlaySoundEx("IceGuyAttack", auto) 
    ILCH B 0 bright A_CustomMissile("IceGuyFX", 44, 10, 0, 1)
    ILCH B 20 bright A_CustomMissile("IceGuyFX", 44, -10, 0, 1)
    goto See
  Breath:
    ILCH B 0 bright A_PlaySoundEx("FrostBreath", auto)
    ILCH B 0 bright A_FaceTarget
    ILCH BBB 2 bright A_CustomMissile("IceBreath", 20, 0, random(-10,10), CMF_CHECKTARGETDEAD)
    ILCH B 0 bright A_PlaySoundEx("FrostBreath", auto)
    ILCH B 0 bright A_FaceTarget
    ILCH BBB 2 bright A_CustomMissile("IceBreath", 20, 0, random(-10,10), CMF_CHECKTARGETDEAD)
    ILCH B 0 bright A_PlaySoundEx("FrostBreath", auto)
    ILCH B 0 bright A_FaceTarget
    ILCH BBB 2 bright A_CustomMissile("IceBreath", 20, 0, random(-10,10), CMF_CHECKTARGETDEAD)
    ILCH B 0 bright A_PlaySoundEx("FrostBreath", auto)
    ILCH B 0 bright A_FaceTarget
    ILCH BBB 2 bright A_CustomMissile("IceBreath", 20, 0, random(-10,10), CMF_CHECKTARGETDEAD)
    ILCH B 0 bright A_PlaySoundEx("FrostBreath", auto)
    ILCH B 0 bright A_FaceTarget
    ILCH BBB 2 bright A_CustomMissile("IceBreath", 20, 0, random(-10,10), CMF_CHECKTARGETDEAD)
    goto See
  Pain:
    ILCH A 0 A_Pain
    goto See
  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    ILCH A 3 A_Scream
    ILCH A 1 A_IceGuyDie
    stop
  }
}

ACTOR IceBreath
{
  var int user_random; var int user_ailment1; var int user_ailmentmaxchance;
  +HITMASTER
  radius 12
  height 8
  speed 8
  damage 5
  alpha 0.2
  projectile
  -NOBLOCKMAP
  -ACTIVATEIMPACT
  -ACTIVATEPCROSS
  +WINDTHRUST
  +SPAWNSOUNDSOURCE
  +BLOODLESSIMPACT
  +ICEDAMAGE
  RenderStyle Add
  states
  {
  Spawn:
    IBRT ABABABABABABABABABAB 2 bright
  Death:
    TNT1 A 0 Bright
	{
	 if (IsPointerEqual(AAPTR_MASTER, AAPTR_PLAYER1) == TRUE) 
	 {
	  A_SetUserVar("user_ailmentmaxchance",16);
	  if (CallACS("GetBuffTimer",7) > 0) { A_SetUserVar("user_ailmentmaxchance",user_ailmentmaxchance*4); }
	  if (CountInv("EvadeAnAttack",AAPTR_PLAYER1) > 0) { return state("Death2"); }
	  if (CountInv("InvulnerabilitySpell",AAPTR_PLAYER1) > 0) { return state("Death2"); }
	  if (random(1,user_ailmentmaxchance) <= 3)
	  {
	   ACS_NamedExecuteAlways("BuffTimer",0,8,15,random(35,52)); // Deceleratle for 1-1.5 seconds [tics] (do not ignore God/Invuln/Mercy-Invuln)
	  }
	 }
	 return state("");
	}
  Death2:
    IBRT AB 2 bright
    stop
  }
}

// Gold Lich
ACTOR Goldlich : Ironlich 31044
{
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; var int user_canusecrisisatk; // For checking if a monster has been given Skill/Map inventory items yet.

  DropItem "BlasterHefty", 84, 50
  DropItem "ArtiEgg", 51, 0
  Mass 2000
  Speed 10
  Health 1400

  Painchance 8
  Painchance "Fist", 12 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 20 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 12 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 255
  Painchance "GravityMP", 255
  Painchance "GravityHPMP", 255 
  
  SeeSound "goldlich/sight"
  PainSound "goldlich/pain"
  DeathSound "goldlich/death"
  ActiveSound "goldlich/active"
  
  Translation "0:17=112:121", "18:35=137:144", "36:42=116:121", "43:51=137:144", "52:58=114:121", "59:65=137:144"
  Obituary "%o was annihilated by the goldlich's power."
  Species "GoldLich"

  States
  {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    LICH A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    LICH A 1 A_Look
    LICH A 3 A_SpawnItemEx("GoldLichGlitter", random(-32,32), random(-32,32), random(8,104),0,0,0, 0,0, 0)
    goto Spawn+1
  See:
    LICH A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    LICH A 4
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("AVOIDMELEE",1); A_SetTics(3); }

	 A_Chase;
	}
    Loop
  Melee:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    LICH A 5 A_FaceTarget
    LICH B 20 A_LichAttack
    Goto See
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    LICH A 1 A_FaceTarget
    LICH A 3 A_SpawnItemEx("GoldLichGlitter", random(-32,32), random(-32,32), random(8,104),0,0,0, 0,0, 0)    
    LICH B 0 A_FaceTarget
    LICH B 0 A_Jump(85, "Missile2")
    LICH B 0 A_Jump(128, "Missile3")
    LICH B 0 A_Jump(255, "Missile4")
    Goto See
  Missile2:
    LICH BBBBBBBB 1 A_SpawnItemEx("GoldLichGlitter", random(-32,32), random(-32,32), random(8,104),0,0,0, 0,0, 0)
    TNT1 A 0 A_SpawnItemEx("TeleportFog")
    TNT1 AAAAAAAA 0 A_Wander
    TNT1 AAAAAAAA 0 A_Wander
    TNT1 A 0 A_SpawnItemEx("TeleportFog")
    TNT1 A 0 A_UnsetSolid
    TNT1 A 0 A_SpawnItemEx("FakeGoldlich", 0,0,0, 0,0,0, 0, SXF_TRANSFERTRANSLATION)
    TNT1 AAAAAAAA 0 A_Wander
    TNT1 AAAAAAAA 0 A_Wander
    TNT1 AAAAAAAA 0 A_Wander
    TNT1 AAAAAAAA 0 A_Wander
    TNT1 A 4 A_SetSolid
    TNT1 A 0 A_SpawnItemEx("TeleportFog")
    Goto See
  Missile3:
    LICH B 0 A_PlaySound("goldlich/attack2")
    LICH B 3 A_SpawnItemEx("GoldLichGlitter", random(-32,32), random(-32,32), random(8,104),0,0,0, 0,0, 0)
    LICH B 1 A_FaceTarget
    LICH B 0 A_CustomMissile("GoldLichBounce",32,0,  0)
    LICH B 0 A_CustomMissile("GoldLichBounce",32,0, 30)
    LICH B 0 A_CustomMissile("GoldLichBounce",32,0, 60)
    LICH B 0 A_CustomMissile("GoldLichBounce",32,0, 90)
    LICH B 0 A_CustomMissile("GoldLichBounce",32,0,120)
    LICH B 0 A_CustomMissile("GoldLichBounce",32,0,150)
    LICH B 0 A_CustomMissile("GoldLichBounce",32,0,180)
    LICH B 0 A_CustomMissile("GoldLichBounce",32,0,210)
    LICH B 0 A_CustomMissile("GoldLichBounce",32,0,240)
    LICH B 0 A_CustomMissile("GoldLichBounce",32,0,270)
    LICH B 0 A_CustomMissile("GoldLichBounce",32,0,300)
    LICH B 0 A_CustomMissile("GoldLichBounce",32,0,330)
    LICH B 3 A_SpawnItemEx("GoldLichGlitter", random(-32,32), random(-32,32), random(8,104),0,0,0, 0,0, 0)
    LICH B 1 A_FaceTarget
    LICH B 3 A_SpawnItemEx("GoldLichGlitter", random(-32,32), random(-32,32), random(8,104),0,0,0, 0,0, 0)
    LICH B 1 A_FaceTarget
    LICH B 3 A_SpawnItemEx("GoldLichGlitter", random(-32,32), random(-32,32), random(8,104),0,0,0, 0,0, 0)
    LICH B 1 A_FaceTarget
    LICH B 3 A_SpawnItemEx("GoldLichGlitter", random(-32,32), random(-32,32), random(8,104),0,0,0, 0,0, 0)
    LICH B 1 A_FaceTarget
    Goto See
  Missile4:
    LICH B 0 A_PlaySound("goldlich/attack1")
    LICH B 3 A_SpawnItemEx("GoldLichGlitter", random(-32,32), random(-32,32), random(8,104),0,0,0, 0,0, 0)
    LICH B 1 A_FaceTarget
    LICH B 0 A_CustomMissile("GoldLichFire")
    LICH B 3 A_SpawnItemEx("GoldLichGlitter", random(-32,32), random(-32,32), random(8,104),0,0,0, 0,0, 0)
    LICH B 1 A_FaceTarget
    LICH B 0 A_CustomMissile("GoldLichFire")
    LICH B 3 A_SpawnItemEx("GoldLichGlitter", random(-32,32), random(-32,32), random(8,104),0,0,0, 0,0, 0)
    LICH B 1 A_FaceTarget
    LICH B 0 A_CustomMissile("GoldLichFire")
    LICH B 3 A_SpawnItemEx("GoldLichGlitter", random(-32,32), random(-32,32), random(8,104),0,0,0, 0,0, 0)
    LICH B 1 A_FaceTarget
    LICH B 0 A_CustomMissile("GoldLichFire")
    LICH B 3 A_SpawnItemEx("GoldLichGlitter", random(-32,32), random(-32,32), random(8,104),0,0,0, 0,0, 0)
    LICH B 1 A_FaceTarget
    LICH B 0 A_CustomMissile("GoldLichFire")
    Goto See

  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    LICH CC 4 A_SpawnItemEx("GoldLichGlitter", random(-36,36), random(-36,36), random(8,104),0,0,0, 0,0, 0)
    
    LICH D 1 A_Scream
    LICH D 3 A_SpawnItemEx("GoldLichGlitter", random(-36,36), random(-36,36), random(8,104),0,0,0, 0,0, 0)
    LICH D 4 A_SpawnItemEx("GoldLichGlitter", random(-36,36), random(-36,36), random(8,104),0,0,0, 0,0, 0)

    LICH EE 4 A_SpawnItemEx("GoldLichGlitter", random(-40,40), random(-40,40), random(0,112),0,0,0, 0,0, 0)

    LICH FF 4 A_SpawnItemEx("GoldLichGlitter", random(-44,44), random(-44,44), random(0,96),0,0,0, 0,0, 0)
    
    LICH G 0 A_NoBlocking
    LICH G 4 A_SpawnItemEx("GoldLichGlitter", random(-52,52), random(-52,52), random(0,80),0,0,0, 0,0, 0)
    LICH G 4 A_SpawnItemEx("GoldLichGlitter", random(-52,52), random(-52,52), random(0,80),0,0,0, 0,0, 0)
    
    LICH HH 4 A_SpawnItemEx("GoldLichGlitter", random(-56,65), random(-56,56), random(0,64),0,0,0, 0,0, 0)
    
    LICH I 4 A_SpawnItemEx("GoldLichGlitter", random(-64,64), random(-64,64), random(0,48),0,0,0, 0,0, 0)
    LICH I -1 A_BossDeath
    Stop
  Ice:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 A_ChangeFlag("CANTSEEK", TRUE)
    LICH A 5 A_GenericFreezeDeath
    LICH A 1 A_FreezeDeathChunks
    wait
  Raise:
    LICH H 7 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    LICH GFEDC 7
    goto See
  }
}


ACTOR GoldLichMiniExplodes
{
  +DONTSPLASH
  +NOGRAVITY
  States
  {
  Spawn:
    FXA1 DEF 3 BRIGHT
    Stop
  }
}
ACTOR GoldLichBounce
{
  Radius 14
  Height 12
  Speed 15
  FastSpeed 24
  Damage 1
  Projectile
  +NOGRAVITY
  +WINDTHRUST  
  -ACTIVATEIMPACT
  -ACTIVATEPCROSS
  -NOBLOCKMAP
  +SEEKERMISSILE
  
  BounceType "Doom"
  BounceCount 2
  
  +BOUNCEONWALLS
  +BOUNCEONFLOORS
  +BOUNCEONCEILINGS
  +BOUNCEONACTORS
  +CANBOUNCEWATER
  
  States
  {
  Spawn:
    FXA1 ABC 4 BRIGHT
    Loop
  Death:
    FXA1 A 0 A_PlaySound("goldlich/attack2Blast")
    FXA1 A 0 BRIGHT A_Stop
    FXA1 A 0 BRIGHT A_Explode(64,160,0)
    FXA1 GGGGGHHHHHIIIII 1 BRIGHT A_SpawnItemEx("GoldLichMiniExplodes", random(-32,32), random(-32,32), random(-32,32),0,0,0, 0,0, 0)
    Stop
  }
}

ACTOR GoldLichFire
{
  Radius 14
  Height 12
  Speed 15
  FastSpeed 24
  Damage 5
  Projectile
  +NOGRAVITY
  +WINDTHRUST  
  -ACTIVATEIMPACT
  -ACTIVATEPCROSS
  -NOBLOCKMAP
  +SEEKERMISSILE
  RenderStyle Add
  var int user_tracks;
  
  States
  {
  Spawn:
    FX06 A 0 A_SetUserVar(user_tracks, 5)
  Weave:
    TNT1 A 0 A_PlaySound("goldlich/attack1")
    FX06 AAAABBBBCCCC 1 BRIGHT A_Weave(3, 0, 4.0, 0.0)
    TNT1 A 0 A_Jump(128, "Track")
    Loop
  Track:
    TNT1 A 0 A_PlaySound("goldlich/attack1")
    TNT1 A 0 A_Jump(user_tracks <= 0, "Track")
    TNT1 A 0 A_SetUserVar(user_tracks, user_tracks - 1)
    FX06 AAAABBBBCCCC 1 BRIGHT A_SeekerMissile(360, 1)
    TNT1 A 0 A_Jump(128, "Weave")
    Loop
  Death:
    FX06 DEFG 5 BRIGHT
    Stop
  }
}

ACTOR GoldLichGlitter
{
  +NOGRAVITY
  States
  {
  Spawn:
    GGLT ABCDE 4 BRIGHT
    Stop
  }
}

ACTOR FakeGoldLich : GoldLich
{
  DropItem "BlasterHefty", 255, 50
  Mass 250
  Health 175
  Species "GoldLich"
}

// Blood Lich
ACTOR BloodLich
{
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; var int user_canusecrisisatk; // For checking if a monster has been given Skill/Map inventory items yet.

  Obituary "%o was reduced to a pile of ash by a Blood Lich."
  Health 2100
  Radius 40
  Height 72
  Mass 2100
  Speed 10
  SeeSound "ironlich/sight"
  AttackSound ""
  PainSound "ironlich/pain"
  DeathSound "ironlich/death"
  ActiveSound "ironlich/active"

  DamageFactor "Fire", 0.5
  PainChance 16
  Painchance "Fire", 8 // Fire attacks have a -50% chance of stunning an enemy
  Painchance "Fist", 24 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 40 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 24 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 255
  Painchance "GravityMP", 255
  Painchance "GravityHPMP", 255 

  MONSTER
  +NOGRAVITY
  +NOTARGET
  +NOFEAR
  +SPAWNCEILING
  +FLOAT
  +MISSILEMORE
  +MISSILEEVENMORE
  +DONTBLAST
  +DONTMORPH
  +DONTRIP
  +DONTSPLASH
  +BOSS
  +BOSSDEATH
  States
  {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    BLCH A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
	BLCH A 10 A_Look
	goto Spawn+1
  See:
    BLCH A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
	BLCH A 4
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("AVOIDMELEE",1); A_SetTics(3); }

	 A_Chase;
	}
	Loop
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
	BLCH B 0 Bright A_JumpIfCloser(300, "Breath")
	BLCH B 0 Bright A_Jump(96,"Curse")
	BLCH B 0 Bright A_FaceTarget
	BLCH B 0 Bright A_PlaySoundEx("MageStaffFire", CHAN_AUTO) 
	BLCH B 0 Bright A_CustomMissile("BloodLichFireball", 54, 10, -2, 1)
	BLCH B 6 Bright A_CustomMissile("BloodLichFireball", 54, -10, 2, 1)
	Goto See
  Breath:
	BLCH B 0 Bright A_PlaySoundEx("FlameBreath", CHAN_AUTO)
	BLCH B 0 Bright A_FaceTarget
	BLCH BBB 2 Bright A_CustomMissile("FireBreath", 20, 0, frandom(-3,3), CMF_CHECKTARGETDEAD)
	BLCH B 0 Bright A_PlaySoundEx("FlameBreath", CHAN_AUTO)
	BLCH B 0 Bright A_FaceTarget
	BLCH BBB 2 Bright A_CustomMissile("FireBreath", 20, 0, frandom(-3,3), CMF_CHECKTARGETDEAD)
	BLCH B 0 Bright A_PlaySoundEx("FlameBreath", CHAN_AUTO)
	BLCH B 0 Bright A_FaceTarget
	BLCH BBB 2 Bright A_CustomMissile("FireBreath", 20, 0, frandom(-3,3), CMF_CHECKTARGETDEAD)
	BLCH B 0 Bright A_PlaySoundEx("FlameBreath", CHAN_AUTO)
	BLCH B 0 Bright A_FaceTarget
	BLCH BBB 2 Bright A_CustomMissile("FireBreath", 20, 0, frandom(-3,3), CMF_CHECKTARGETDEAD)
	BLCH B 0 Bright A_PlaySoundEx("FlameBreath", CHAN_AUTO)
	BLCH B 0 Bright A_FaceTarget
	BLCH BBB 2 Bright A_CustomMissile("FireBreath", 20, 0, frandom(-3,3), CMF_CHECKTARGETDEAD)
	Goto See
  Curse:
	BLCH B 0 Bright A_JumpIfCloser(300, "Breath")
	BLCH B 0 Bright A_FaceTarget
	BLCH B 6 Bright A_CustomMissile("CurseSpell", 20, 0, 0, 1)
	Goto See
  Pain:
	BLCH A 0 A_Pain
	Goto See

  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
	BLCH C 7 A_PainDie("HereticImpLeader")
	BLCH D 7 A_Scream
	BLCH EF 7
	BLCH G 7 A_NoBlocking
	BLCH H 7
	BLCH I -1 A_BossDeath
	Stop
  Ice:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 A_ChangeFlag("CANTSEEK", TRUE)
    BLCH A 5 A_GenericFreezeDeath
    BLCH A 1 A_FreezeDeathChunks
    wait
  Raise:
    BLCH H 7 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    BLCH GFEDC 7
    goto See

  }
}

ACTOR FireBreath
{
    Radius 12
    Height 8
    Speed 12
    Damage 3
    Alpha 0.2
    PROJECTILE
    -NOBLOCKMAP
    -ACTIVATEIMPACT
    -ACTIVATEPCROSS
    +SPAWNSOUNDSOURCE
    +RIPPER
    +BLOODLESSIMPACT
    DamageType "Fire"
    RenderStyle Add
    States
    {
    Spawn:
	FRBS EFGEFGEFGEFGEFGEFG 3
    Death:
    	TNT1 A 0
    	Stop
    }
}

ACTOR BloodLichFireball
{
    Speed 17
    Height 8
    Damage 4
    PROJECTILE
    +EXTREMEDEATH
    DamageType "Fire"
    DeathSound "MageStaffExplode"
    States
    {
    Spawn:
	MSP4 ABCD 2 Bright
	Loop
    Death:
	MSP4 E 4 Bright A_SetTranslucent(1,1)
	MSP4 F 5 Bright A_Explode(80,192,0)
	MSP4 GH 5 Bright
	MSP4 I 4 Bright
	Stop
    }
}

ACTOR CurseSpell
{
  var int user_random; var int user_ailment1; var int user_ailmentmaxchance;
  PROJECTILE
  +SEEKERMISSILE
  +HITMASTER
  +BLOODLESSIMPACT
  RenderStyle Add
  Damage 0
  DamageType "Dark"
  Speed 15
  Radius 10
  Height 6
  States
  {
  Spawn:
	TNT1 A 0
	CURS A 0 A_PlaySound("CurseActive", CHAN_AUTO, 1.0, 1)
	CURS ABCDEF 3 Bright A_SeekerMissile(50,50,2)
	Loop
  Death:
    TNT1 A 0 Bright
	{	 
	 if (IsPointerEqual(AAPTR_MASTER, AAPTR_PLAYER1) == TRUE) 
	 {
	  A_SetUserVar("user_ailmentmaxchance",4);
	  if (CallACS("GetBuffTimer",7) > 0) { A_SetUserVar("user_ailmentmaxchance",user_ailmentmaxchance*4); }
	  if (CountInv("EvadeAnAttack",AAPTR_PLAYER1) > 0) { return state("Death2"); }
	  if (CountInv("InvulnerabilitySpell",AAPTR_PLAYER1) > 0) { return state("Death2"); }
	  if (random(1,user_ailmentmaxchance) <= 2)
	  {
	   A_SetUserVar("user_random",random(1,12));
	   if (user_random == 1) { ACS_NamedExecuteAlways("BuffTimer",0,8,21,random(315,525)); } // Silence for 9-15 seconds [tics] (do not ignore God/Invuln/Mercy-Invuln)
	   else if (user_random == 2) { ACS_NamedExecuteAlways("BuffTimer",0,8,19,random(315,525)); } // Blind for 9-15 seconds [tics] (do not ignore God/Invuln/Mercy-Invuln)
	   else if (user_random == 3) { ACS_NamedExecuteAlways("BuffTimer",0,8,20,random(315,525)); } // Sleep for 9-15 seconds [tics] (do not ignore God/Invuln/Mercy-Invuln)
	   else if (user_random == 4) { ACS_NamedExecuteAlways("BuffTimer",0,8,14,random(630,1050)); } // Sap for 18-30 seconds [tics] (do not ignore God/Invuln/Mercy-Invuln)
	   else if (user_random == 5) { ACS_NamedExecuteAlways("BuffTimer",0,8,14,random(630,1050)); } // Sap for 18-30 seconds [tics] (do not ignore God/Invuln/Mercy-Invuln)
	   else if (user_random == 6) { ACS_NamedExecuteAlways("BuffTimer",0,8,14,random(630,1050)); } // Sap for 18-30 seconds [tics] (do not ignore God/Invuln/Mercy-Invuln)
	   else if (user_random == 7) { ACS_NamedExecuteAlways("BuffTimer",0,8,13,random(630,1050)); } // Blunt for 18-30 seconds [tics] (do not ignore God/Invuln/Mercy-Invuln)
	   else if (user_random == 8) { ACS_NamedExecuteAlways("BuffTimer",0,8,13,random(630,1050)); } // Blunt for 18-30 seconds [tics] (do not ignore God/Invuln/Mercy-Invuln)
	   else if (user_random == 9) { ACS_NamedExecuteAlways("BuffTimer",0,8,13,random(630,1050)); } // Blunt for 18-30 seconds [tics] (do not ignore God/Invuln/Mercy-Invuln)
	   else if (user_random == 10) { ACS_NamedExecuteAlways("BuffTimer",0,8,15,random(630,1050)); } // Deceleratle for 18-30 seconds [tics] (do not ignore God/Invuln/Mercy-Invuln)
	   else if (user_random == 11) { ACS_NamedExecuteAlways("BuffTimer",0,8,15,random(630,1050)); } // Deceleratle for 18-30 seconds [tics] (do not ignore God/Invuln/Mercy-Invuln)
	   else if (user_random == 12) { ACS_NamedExecuteAlways("BuffTimer",0,8,15,random(630,1050)); } // Deceleratle for 18-30 seconds [tics] (do not ignore God/Invuln/Mercy-Invuln)
	  }
	 }
	 return state("");
	}
  Death2:
	TNT1 A 0 A_StopSound(CHAN_AUTO)
	CURS GHIJKL 3 Bright
	Stop
  }
}

ACTOR Banshee
{
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; var int user_canusecrisisatk; // For checking if a monster has been given Skill/Map inventory items yet.

  Health 720
  Radius 12 // 15
  Height 48 // 60
  Mass 515
  Speed 15
  Scale 0.8
  +FLOAT
  +NOGRAVITY
  +DONTOVERLAP
  +QUICKTORETALIATE 
  +FLOORCLIP 
  +NOTARGET
  SeeSound "Banshee/Sight"
  PainSound "Banshee/Pain"
  DeathSound "Banshee/Death"
  ActiveSound "Banshee/Active"
  MeleeSound "Banshee/Raise"
  MONSTER
  Obituary "%o Heard The Banshee's Wail"
  DropItem "BlasterAmmo", 128, 10
  DropItem "ArtiTomeOfPower", 8, 0  
  
  DamageFactor "Fire", 0.5
  PainChance 100
  Painchance "Fire", 50 // Fire attacks have a -50% chance of stunning an enemy
  Painchance "Fist", 150 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 250 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 150 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 255
  Painchance "GravityMP", 255
  Painchance "GravityHPMP", 255 

  States
  {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    BANS A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    BANS A 1 A_Look
    goto Spawn+1
  See:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    TNT1 A 0 A_UnSetInvulnerable
    BANS A 2
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }

     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 150) { A_SetTics(1); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("AVOIDMELEE",1); }

	 A_TakeInventory("BansheeMissile5Token",24);
     A_TakeInventory("BansheePainToken",2);

	 A_VileChase;
	}
    BANS A 2
    {
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }

     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 150) { A_SetTics(1); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("AVOIDMELEE",1); }

	 A_VileChase;
     A_SpawnItem("BansheeTrail",0,0);
	} 
    BANS A 0 A_Jump(2,"BansheeTeleport")
    Loop
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    BANS A 0 A_Jump(2,"Missile3")
    BANS A 0 A_Jump(50,"Missile4")
    BANS A 0 A_Jump(256,"Missile2", "Melee", "Missile1", "Missile5", "Missile6")
    Goto See
  Missile1:
    BANS B 0 A_FaceTarget
    BANS BCD 2
    BANS B 0 A_DualPainAttack("LostSoulNew")
    Goto See
  Missile2:  
    BANS B 0 A_FaceTarget
    BANS BCD 2
    BANS D 0 A_CustomMissile("BansheeFire",  50, 0,  -8)
    BANS D 0 A_CustomMissile("BansheeFire",  50, 0,   0)
    BANS D 0 A_CustomMissile("BansheeFire",  50, 0,   8)
    Goto See
  Missile3:  
    BANS B 0 A_FaceTarget
    BANS BCD 2 
    BANS B 0 A_Jump(256,"BansheeTeleport")
    Goto See
  Missile4:  
    BANS B 0 A_FaceTarget
    BANS BCD 2
    BANS D 0 A_CustomMissile("BansheeFire3")
    Goto See
  Missile5:  
    BANS B 0 A_FaceTarget
    BANS BCD 1
    BANS D 0 A_CustomMissile("BansheeFire4")
    BANS D 0 A_GiveInventory("BansheeMissile5Token",1)
    BANS D 0 A_JumpIfInventory("BansheeMissile5Token",30,"See")
    BANS D 1 A_CPosRefire
    Goto Missile5+2
  Missile6:  
    BANS B 0 A_FaceTarget
    BANS BCD 2
    BANS D 0 A_CustomMissile("BansheeFire5", 50, 0,-160)
    BANS D 0 A_CustomMissile("BansheeFire5", 50, 0,-128)
    BANS D 0 A_CustomMissile("BansheeFire5", 50, 0,-96 )
    BANS D 0 A_CustomMissile("BansheeFire5", 50, 0,-64 )
    BANS D 0 A_CustomMissile("BansheeFire5", 50, 0,-32 )
    BANS D 0 A_CustomMissile("BansheeFire5", 50, 0, 0  )
    BANS D 0 A_CustomMissile("BansheeFire5", 50, 0, 32 )
    BANS D 0 A_CustomMissile("BansheeFire5", 50, 0, 64 )
    BANS D 0 A_CustomMissile("BansheeFire5", 50, 0, 96 )
    BANS D 0 A_CustomMissile("BansheeFire5", 50, 0, 128)
    BANS D 4 A_CustomMissile("BansheeFire5", 50, 0, 160)
    Goto See
  Melee:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    BANS B 0 A_FaceTarget
    BANS BCD 1
    BANS D 0 A_CustomMissile("BansheeFire2", 50, 0,-160)
    BANS D 0 A_CustomMissile("BansheeFire2", 50, 0,-128)
    BANS D 0 A_CustomMissile("BansheeFire2", 50, 0,-96 )
    BANS D 0 A_CustomMissile("BansheeFire2", 50, 0,-64 )
    BANS D 0 A_CustomMissile("BansheeFire2", 50, 0,-32 )
    BANS D 0 A_CustomMissile("BansheeFire2", 50, 0, 0  )
    BANS D 0 A_CustomMissile("BansheeFire2", 50, 0, 32 )
    BANS D 0 A_CustomMissile("BansheeFire2", 50, 0, 64 )
    BANS D 0 A_CustomMissile("BansheeFire2", 50, 0, 96 )
    BANS D 0 A_CustomMissile("BansheeFire2", 50, 0, 128)
    BANS D 4 A_CustomMissile("BansheeFire2", 50, 0, 160)
    Goto See
  BansheeTeleport:
    BANS A 0 A_SetInvulnerable
    BANS A 1 A_SetTranslucent(0.90)
    BANS A 1 A_SetTranslucent(0.80)
    BANS A 1 A_SetTranslucent(0.70)
    BANS A 1 A_SetTranslucent(0.60)
    BANS A 1 A_SetTranslucent(0.50)
    BANS A 1 A_SetTranslucent(0.40)
    BANS A 1 A_SetTranslucent(0.30)
    BANS A 1 A_SetTranslucent(0.20)
    BANS A 1 A_SetTranslucent(0.10)
    BANS A 0 A_Jump(128,25)
    TNT1 AAAAAAAAAAAAAAAAAAAAAAAA 0 A_ExtChase(0,0,1,1)
    TNT1 A 0 A_Jump(128,25)
    TNT1 AAAAAAAAAAAAAAAAAAAAAAAA 0 A_ExtChase(0,0,1,1)
    BANS A 1 A_SetTranslucent(0.10)
    BANS A 1 A_SetTranslucent(0.20)
    BANS A 1 A_SetTranslucent(0.30)
    BANS A 1 A_SetTranslucent(0.40)
    BANS A 1 A_SetTranslucent(0.50)
    BANS A 1 A_SetTranslucent(0.60)
    BANS A 1 A_SetTranslucent(0.70)
    BANS A 1 A_SetTranslucent(0.80)
    BANS A 1 A_SetTranslucent(0.90)
    BANS A 1 A_SetTranslucent(1.0)
    BANS A 0 A_UnSetInvulnerable
    goto See    

  Heal:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    BANS B 8 BRIGHT
    BANS C 8 BRIGHT
    {
	 if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120)
	 {
	  A_CustomMissile("ReviveProj2", 0, 0, 0, 0);
	  A_CustomMissile("ReviveProj2", 0, 0, 72, 0);
	  A_CustomMissile("ReviveProj2", 0, 0, 144, 0);
	  A_CustomMissile("ReviveProj2", 0, 0, 216, 0);
	  A_CustomMissile("ReviveProj2", 0, 0, 288, 0);
	 }
	 else
	 if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60)
	 {
	  A_CustomMissile("ReviveProj2", 0, 0, 0, 0);
	  A_CustomMissile("ReviveProj2", 0, 0, 120, 0);
	  A_CustomMissile("ReviveProj2", 0, 0, 240, 0);
	 }
    }
    BANS D 8 BRIGHT
    Goto See

  Pain:
    BANS A 5 A_GiveInventory("BansheePainToken",5)
    BANS A 5 A_Pain
    BANS A 5 A_JumpIfInventory("BansheePainToken",25,"Missile4")
    Goto See
  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    BANS G 2 A_Scream
    BANS H 2 A_NoBlocking
    BANS I 2 A_CustomMissile("SpawnFire", 0, 0, 0)
    BANS I 2 A_CustomMissile("SpawnFire", 0, 0, 0)
    BANS IJKLMNOPQR 2
    BANS R -1
    Stop
  }
}

actor BansheeFire
{
  Game Doom
  SpawnID 51
  Radius 13
  Height 8
  Speed 15
  Damage 2
  Projectile
  +RANDOMIZE
  +RIPPER
  +DEHEXPLOSION
  +ROCKETTRAIL
  SeeSound "Banshee/ASpawn"
  DeathSound "Banshee/ADeath"
  Obituary "%o Heard The Banshee's Wail."
  Decal "DoomImpScorch"
  DamageType Fire
  States
  {
  Spawn:
    BANB A 1 BRIGHT A_SpawnItem("BansheeFireTrail",0,0)
    BANB A 4
    loop
  Death:
    BAL1 CDE 3 bright
    stop
  }
}

actor BansheeFire2
{
  Game Doom
  SpawnID 51
  Radius 13
  Height 8
  Speed 15
  Damage 2
  Projectile
  +RANDOMIZE
  +DEHEXPLOSION
  +ROCKETTRAIL
  SeeSound "Banshee/ASpawn"
  DeathSound "Banshee/ADeath"
  Obituary "%o Heard The Banshee's Wail."
  Decal "DoomImpScorch"
  DamageType Fire
  States
  {
  Spawn:
    BANB A 1 BRIGHT A_SpawnItem("BansheeFireTrail",0,0)
    BANB A 4
    loop
  Death:
    BAL1 CDE 3 bright
    stop
  }
}

actor BansheeFire3
{
  Game Doom
  SpawnID 51
  Radius 24
  Height 24
  Speed 15
  Damage 100
  Projectile
  +NOGRAVITY
  +SPAWNCEILING
  +SEEKERMISSILE
  +RANDOMIZE
  +DEHEXPLOSION
  +ROCKETTRAIL
  Scale 3.0
  SeeSound "Banshee/ASpawn"
  DeathSound "Banshee/ADeath"
  Obituary "%o Heard The Banshee's Wail."
  Decal "Scorch"
  DamageType Fire
  States
  {
  Spawn:
    BANB A 1 BRIGHT A_SeekerMissile (50,50)
    BANB A 0 BRIGHT A_SpawnItem("BansheeFireTrail",0,0)
    BANB A 1 BRIGHT A_GiveInventory("BansheeFire3Token",1)
    BANB A 1 BRIGHT A_JumpIfInventory("BansheeFire3Token",30,"Die")
    Goto Spawn
  Die:
    BANB A 0 A_Die
  Death:
    BAL1 CDE 3 bright
    stop
  }
}

actor BansheeFire4
{
  Game Doom
  SpawnID 51
  Radius 13
  Height 8
  Speed 25
  Damage 2
  Projectile
  +RANDOMIZE
  +DEHEXPLOSION
  +ROCKETTRAIL
  SeeSound "Banshee/ASpawn"
  DeathSound "Banshee/ADeath"
  Obituary "%o Heard The Banshee's Wail."
  DamageType Fire
  States
  {
  Spawn:
    BANF ABCDEFGH 3
    BANF H 0 A_DIE
    Stop
  Death:
    BANF H 3 bright
    stop
  }
}

actor BansheeFire5
{
  Game Doom
  SpawnID 51
  Radius 13
  Height 8
  Speed 20 
  Damage 2
  Projectile
  +SEEKERMISSILE
  +FLOORHUGGER
  +RIPPER
  +RANDOMIZE
  +DEHEXPLOSION
  +ROCKETTRAIL
  SeeSound "Banshee/ASpawn"
  DeathSound "Banshee/ADeath"
  Obituary "%o Heard The Banshee's Wail."
  DamageType Fire
  States
  {
  Spawn:
    BAFT A 1 BRIGHT A_SeekerMissile (50,50)
    BAFT A 2 A_SpawnItem("BansheeFireTrail2",0,0)
    BAFT A 1 BRIGHT A_GiveInventory("BansheeFire3Token",1)
    BAFT A 1 BRIGHT A_JumpIfInventory("BansheeFire3Token",30,"Die")
    Goto Spawn
  Die:
    BAFT A 0 A_Die
  Death:
    BAFT BCDEFGH 3 bright
    stop
  }
}

ACTOR BansheeTrail
{   
   Radius 20
   Height 56
   Speed 0
   PROJECTILE
   RENDERSTYLE Translucent
   ALPHA 0.90
   States
   {
   Spawn:
      TNT1 A 3
      BANS A 3 A_FadeOut(0.10)
      goto spawn+1
   }
}

ACTOR BansheeFireTrail
{   
   Radius 20
   Height 56
   Speed 0
   PROJECTILE
   RENDERSTYLE Translucent
   Scale 0.50
   ALPHA 0.90
   States
   {
   Spawn:
      TNT1 A 3
      BANF ABCDEFGH 3 Bright A_FadeOut(0.10)
      Stop
   }
}

ACTOR BansheeFireTrail2
{   
   Radius 20
   Height 56
   Speed 0
   PROJECTILE
   RENDERSTYLE Translucent
   Scale 0.50
   ALPHA 0.90
   States
   {
   Spawn:
      TNT1 A 3
      BAFT ABCDEFG 3 Bright A_FadeOut(0.10)
      Stop
   }
}

actor BansheePainToken : Ammo
{
	Inventory.MaxAmount 50
}

actor BansheeFire3Token : Ammo
{
	Inventory.MaxAmount 50
}

actor BansheeMissile5Token : Ammo
{
	Inventory.MaxAmount 50
}

// Disciple Spawner
actor WizardSpawner : CustomInventory replaces Wizard
{
 +FLOAT
 +NOGRAVITY
 +DONTOVERLAP
 +ISMONSTER
 +RANDOMIZE
 states
 {
    UpgradeClass:
     TNT1 A 0 A_SpawnItemEx("Banshee",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
     stop

  Spawn:
   TNT1 A 0 
   TNT1 A 0 A_JumpIf( random(1,2048) <= ACS_NamedExecuteWithResult("GetEvolveChance") , "UpgradeClass")
   TNT1 A 0 A_SpawnItemEx("WizardNew",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
   stop
 }
}

// Ice Golem
Actor IceGolem
{
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; var int user_canusecrisisatk; // For checking if a monster has been given Skill/Map inventory items yet.

  Health 450
  Radius 22
  Height 62
  Mass 900
  Speed 16
  Monster
  +FloorClip
  +NoBlood
  RenderStyle Translucent
  Alpha 0.8
  Scale 1.0
  SeeSound "mummy/sight"
  AttackSound "mummy/attack1"
  PainSound "mummy/pain"
  ActiveSound "mummy/active"
  HitObituary "%o was bludgeoned by an ice golem"

  RadiusDamageFactor 0.625
  DamageFactor "Normal", 0.925
  DamageFactor "Fire", 1.8
  DamageFactor "Ice", 0.334
  Painchance 32
  Painchance "Fire", 56 // Fire attacks have a +80% chance of stunning an enemy
  Painchance "Ice", 11 // Ice attacks have a -67% chance of stunning an enemy
  Painchance "Fist", 48 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 80 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 48 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 255
  Painchance "GravityMP", 255
  Painchance "GravityHPMP", 255 

  +DONTHARMSPECIES
  Species "Golem"

  States
  {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    IGLM A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    IGLM AB 10 A_Look
    goto Spawn+1
  See:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    IGLM A 0 A_JumpIfHealthLower((user_MaxHP/2), 1)
    Goto See+3
    IGLM A 0 A_Jump(16, "RegenerateStart")
    IGLM ABCD 5
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 180) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",1); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 120) { A_ChangeFlag("MISSILEEVENMORE",1); A_ChangeFlag("MISSILEMORE",0); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("MISSILEMORE",1); A_ChangeFlag("MISSILEEVENMORE",0); }
	 else { A_ChangeFlag("MISSILEMORE",0); A_ChangeFlag("MISSILEEVENMORE",0); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 60) { A_ChangeFlag("AVOIDMELEE",1); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 45) { A_SetTics(4); }
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 90) { A_SetTics(3); }
	 A_Chase;
	}
    Loop
  Melee:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    IGLM E 0 A_Jump(128, "Melee2")
    MUMM E 6
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 150) { A_SetTics(4); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 75) { A_SetTics(5); }
	 A_FaceTarget;
	}
    MUMM F 6
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 150) { A_SetTics(4); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 75) { A_SetTics(5); }
	 A_FaceTarget;
	 A_CustomMeleeAttack(Random(15,27)*3, "mummy/attack2", "mummy/attack");
	}
    MUMM G 6
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 150) { A_SetTics(4); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 75) { A_SetTics(5); }
	 A_FaceTarget;
	}
    Goto See
  Melee2:
    MUMM H 6
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 150) { A_SetTics(4); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 75) { A_SetTics(5); }
	 A_FaceTarget;
	}
    MUMM I 6
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 150) { A_SetTics(4); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 75) { A_SetTics(5); }
	 A_FaceTarget;
	 A_CustomMeleeAttack(Random(15,27)*3, "mummy/attack2", "mummy/attack");
	}
    MUMM J 6
	{
     if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 150) { A_SetTics(4); }
     else if (GetCVar("dvds_monsterlevelbehavior") > 0 && user_monsterlevel > 75) { A_SetTics(5); }
	 A_FaceTarget;
	}
    Goto See
  RegenerateStart:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    IGLM K 10
	{
     A_PlayWeaponSound("misc/freeze");
     A_ChangeFlag("CANTSEEK",1);
     A_ChangeFlag("NOPAIN",1);
     A_ChangeFlag("NOTHRUST",1);
     A_GiveInventory("IceGolemArmor",1);
	}
  Regenerate:
    IGLM K 0 { if (health < user_MaxHP) { HealThing((user_MaxHP/random(18,22))); } else { return state("RegenerateEnd"); } return state(""); }
    IGLM KKKKKKKKKK 1 A_SpawnItemEx("IceGolemParticleA", Random(24, 32), 0, 4, 0, 0, (Random(20, 35)*0.1), Random(0, 360), 128)
    IGLM K 0 { if (health < user_MaxHP) { HealThing((user_MaxHP/random(18,22))); } else { return state("RegenerateEnd"); } return state(""); }
    IGLM KKKKKKKKKK 1 A_SpawnItemEx("IceGolemParticleA", Random(24, 32), 0, 4, 0, 0, (Random(20, 35)*0.1), Random(0, 360), 128)
    IGLM K 0 { if (health < user_MaxHP) { HealThing((user_MaxHP/random(18,22))); } else { return state("RegenerateEnd"); } return state(""); }
    IGLM KKKKKKKKKK 1 A_SpawnItemEx("IceGolemParticleA", Random(24, 32), 0, 4, 0, 0, (Random(20, 35)*0.1), Random(0, 360), 128)
    IGLM K 0 { if (health < user_MaxHP) { HealThing((user_MaxHP/random(18,22))); } else { return state("RegenerateEnd"); } return state(""); }
    IGLM KKKKKKKKKK 1 A_SpawnItemEx("IceGolemParticleA", Random(24, 32), 0, 4, 0, 0, (Random(20, 35)*0.1), Random(0, 360), 128)
    IGLM K 0 { if (health < user_MaxHP) { HealThing((user_MaxHP/random(18,22))); } else { return state("RegenerateEnd"); } return state(""); }
    IGLM KKKKKKKKKK 1 A_SpawnItemEx("IceGolemParticleA", Random(24, 32), 0, 4, 0, 0, (Random(20, 35)*0.1), Random(0, 360), 128)
    IGLM K 0 { if (health < user_MaxHP) { HealThing((user_MaxHP/random(18,22))); } else { return state("RegenerateEnd"); } return state(""); }
    IGLM KKKKKKKKKK 1 A_SpawnItemEx("IceGolemParticleA", Random(24, 32), 0, 4, 0, 0, (Random(20, 35)*0.1), Random(0, 360), 128)
    IGLM K 0 { if (health < user_MaxHP) { HealThing((user_MaxHP/random(18,22))); } else { return state("RegenerateEnd"); } return state(""); }
    IGLM KKKKKKKKKK 1 A_SpawnItemEx("IceGolemParticleA", Random(24, 32), 0, 4, 0, 0, (Random(20, 35)*0.1), Random(0, 360), 128)
    IGLM K 0 { if (health < user_MaxHP) { HealThing((user_MaxHP/random(18,22))); } else { return state("RegenerateEnd"); } return state(""); }
    IGLM KKKKKKKKKK 1 A_SpawnItemEx("IceGolemParticleA", Random(24, 32), 0, 4, 0, 0, (Random(20, 35)*0.1), Random(0, 360), 128)
    IGLM K 0 { if (health < user_MaxHP) { HealThing((user_MaxHP/random(18,22))); } else { return state("RegenerateEnd"); } return state(""); }
    IGLM KKKKKKKKKK 1 A_SpawnItemEx("IceGolemParticleA", Random(24, 32), 0, 4, 0, 0, (Random(20, 35)*0.1), Random(0, 360), 128)
    IGLM K 0 { if (health < user_MaxHP) { HealThing((user_MaxHP/random(18,22))); } else { return state("RegenerateEnd"); } return state(""); }
    IGLM KKKKKKKKKK 1 A_SpawnItemEx("IceGolemParticleA", Random(24, 32), 0, 4, 0, 0, (Random(20, 35)*0.1), Random(0, 360), 128)
    IGLM K 0
	{
	 if (health < user_MaxHP)
	 {
	  if (random(1,8) == 1) { return state("Regenerate"); }
	  return state("");
	 }
	 return state("");
	}
  RegenerateEnd:
    IGLM K 0
    {
     A_ChangeFlag("CANTSEEK",0);
	 A_ChangeFlag("NOPAIN",0);
     A_ChangeFlag("NOTHRUST",0);
     A_TakeInventory("IceGolemArmor",9999);
	}
    Goto See
  Pain:
    IGLM L 4
    IGLM L 4 A_Pain
    Goto See
  Pain.Fire:
    IGLM L 4
    IGLM L 4 A_Pain
    IGLM L 4
    Goto See
  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    IGLM L 12
    IGLM L 0 A_SetTranslucent(1.0, 0)
    IGLM L 1 A_IceGuyDie
    Stop
  }
}

Actor IceGolemGhost : IceGolem
{
  +SHADOW
  +GHOST
  RenderStyle Translucent
  Alpha 0.32
}

Actor IceGolemArmor : PowerProtection
{
 damagefactor "normal", 0.01 
 inventory.icon ""
 Powerup.Duration 2147483646
}

Actor IceGolemParticleA
{
  Height 0
  Radius 0
  Mass 0
  +Missile
  +NoBlockMap
  +NoGravity
  +DontSplash
  +NoClip
  RenderStyle Add
  Scale 0.0275
  States
  {
  Spawn:
    IGLP A 0 A_SpawnItemEx("IceGolemParticleTrail", -(MomX*1.2), -(MomY*1.2), (MomZ*-1.2), (MomX*0.8), (MomY*0.8), (MomZ*0.8), -Angle, 138)
    IGLP A 1 A_FadeOut(0.065)
    Loop
  }
}

Actor IceGolemParticleTrail : IceGolemParticleA
{
  States
  {
  Spawn:
    IGLP A 1 A_FadeOut(0.075)
    Loop
  }
}
