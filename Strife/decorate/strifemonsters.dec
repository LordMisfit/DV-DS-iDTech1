// PEASANTS
ACTOR PeasantNew : Peasant replaces Peasant
{
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
  DamageFactor "PoisonBolt", 10.0

  Health 31
  PainChance 200
  Speed 8
  Radius 20
  Height 56
  Monster
  +NEVERTARGET
  -COUNTKILL
  +NOSPLASHALERT
  +FLOORCLIP
  +JUSTHIT
  +CANTSEEK
  MinMissileChance 150
  MaxStepHeight 16
  MaxDropoffHeight 32
  SeeSound "peasant/sight"
  AttackSound "peasant/attack"
  PainSound "peasant/pain"
  DeathSound "peasant/death"
  HitObituary "$OB_PEASANT" // "%o should have never picked a fight with a civilian."
  States
  {
  Pain.Charm: Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See
  Spawn:
    PEAS A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    PEAS A 10 A_Look2
    goto Spawn+1
  See:
    PEAS A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    PEAS AABBCCDD 5 A_Wander
    loop
  Melee:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    PEAS E 10 A_FaceTarget
    PEAS F 8 A_CustomMeleeAttack(2*random[PeasantAttack](1, 5)+2)
    PEAS E 8
    Goto See
  Pain:
    PEAS O 3
    PEAS O 3 A_Pain
    Goto Melee
  Wound:
    PEAS G 5
    PEAS H 10 A_GetHurt
    PEAS I 6
    Goto Wound+1
  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    PEAS G 5
    PEAS H 5 A_Scream
    PEAS I 6
    PEAS J 5 A_NoBlocking
    PEAS K 5
    PEAS L 6
    PEAS M 8
    PEAS N 1400
    GIBS U 5
    GIBS V 1400
    Stop
  XDeath:
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    GIBS M 5 A_TossGib
    GIBS N 5 A_XScream
    GIBS O 5 A_NoBlocking
    GIBS PQRS 4 A_TossGib
    Goto Death+9
  Burn:
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    BURN A 3 Bright A_PlaySoundEx("human/imonfire", "Voice")
    BURN B 3 Bright A_DropFire
    BURN C 3 Bright A_Wander
    BURN D 3 Bright A_NoBlocking
    BURN E 5 Bright A_DropFire
    BURN FGH 5 Bright A_Wander
    BURN I 5 Bright A_DropFire
    BURN JKL 5 Bright A_Wander
    BURN M 5 Bright A_DropFire
    BURN NOPQPQ 5 Bright
    BURN RSTU 7 Bright
    BURN V -1
    Stop
  Disintegrate:
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    DISR A 5 A_PlaySoundEx("misc/disruptordeath", "Voice")
    DISR BC 5
    DISR D 5 A_NoBlocking
    DISR EF 5
    DISR GHIJ 4
    MEAT D 700
    Stop
  }
}

ACTOR Peasant1New : PeasantNew replaces Peasant1
{
  ConversationID 6
  Speed 4
}

ACTOR Peasant2New : PeasantNew replaces Peasant2
{
  ConversationID 7
  Speed 5
}

ACTOR Peasant3New : PeasantNew replaces Peasant3
{
  ConversationID 8
  Speed 5
}

ACTOR Peasant4New : PeasantNew replaces Peasant4
{
  ConversationID 9
  Translation 0
  Speed 7
}

ACTOR Peasant5New : PeasantNew replaces Peasant5
{
  ConversationID 10
  Translation 0
  Speed 7
}

ACTOR Peasant6New : PeasantNew replaces Peasant6
{
  ConversationID 11
  Translation 0
  Speed 7
}

ACTOR Peasant7New : PeasantNew replaces Peasant7
{
  ConversationID 12
  Translation 2
}

ACTOR Peasant8New : PeasantNew replaces Peasant8
{
  ConversationID 13
  Translation 2
}

ACTOR Peasant9New : PeasantNew replaces Peasant9
{
  ConversationID 14
  Translation 2
}

ACTOR Peasant10New : PeasantNew replaces Peasant10
{
  ConversationID 15
  Translation 1
}

ACTOR Peasant11New : PeasantNew replaces Peasant11
{
  ConversationID 16
  Translation 1
}

ACTOR Peasant12New : PeasantNew replaces Peasant12
{
  ConversationID 17
  Translation 1
}

ACTOR Peasant13New : PeasantNew replaces Peasant13
{
  ConversationID 18
  Translation 3
}

ACTOR Peasant14New : PeasantNew replaces Peasant14
{
  ConversationID 19
  Translation 3
}

ACTOR Peasant15New : PeasantNew replaces Peasant15
{
  ConversationID 20
  Translation 3
}

ACTOR Peasant16New : PeasantNew replaces Peasant16
{
  ConversationID 21
  Translation 5
}

ACTOR Peasant17New : PeasantNew replaces Peasant17
{
  ConversationID 22
  Translation 5
}

ACTOR Peasant18New : PeasantNew replaces Peasant18
{
  ConversationID 23
  Translation 5
}

ACTOR Peasant19New : PeasantNew replaces Peasant19
{
  ConversationID 24
  Translation 4
}

ACTOR Peasant20New : PeasantNew replaces Peasant20
{
  ConversationID 25
  Translation 4
}

ACTOR Peasant21New : PeasantNew replaces Peasant21
{
  ConversationID 26
  Translation 4
}

ACTOR Peasant22New : PeasantNew replaces Peasant22
{
  ConversationID 27
  Translation 6
}

// BEGGARS
ACTOR BeggarNew : Beggar replaces Beggar // Base Class
{
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
  DamageFactor "PoisonBolt", 10.0

  Health 20
  PainChance 250
  Speed 3
  Radius 20
  Height 56
  Monster
  +JUSTHIT
  -COUNTKILL
  +NOSPLASHALERT
  +CANTSEEK
  MinMissileChance 150
  Tag "$TAG_BEGGAR" // "Beggar"
  MaxStepHeight 16
  MaxDropoffHeight 32
  HitObituary "$OB_BEGGAR" // "%o was beaten to death by the poor."
  AttackSound "beggar/attack"
  PainSound "beggar/pain"
  DeathSound "beggar/death"

  States
  {
  Pain.Charm: Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See
  Spawn:
    BEGR A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    BEGR A 10 A_Look
    goto Spawn+1
  See:
    BEGR A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    BEGR AABBCC 4 A_Wander
    Loop
  Melee:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    BEGR D 8
    BEGR D 8 A_CustomMeleeAttack(2*random[PeasantAttack](1, 5)+2)
    BEGR E 1 A_Chase
    BEGR D 8 A_SentinelRefire
    Loop
  Pain:
    BEGR A 3 A_Pain
    BEGR A 3 A_Chase
    Goto Melee
  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    BEGR F 4
    BEGR G 4 A_Scream
    BEGR H 4
    BEGR I 4 A_NoBlocking
    BEGR JKLM 4
    BEGR N -1
    Stop
  XDeath:
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    BEGR F 5 A_TossGib
    GIBS M 5 A_TossGib
    GIBS N 5 A_XScream
    GIBS O 5 A_NoBlocking
    GIBS PQRST 4 A_TossGib
    GIBS U 5
    GIBS V 1400
    Stop
  Burn:
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    BURN A 3 Bright A_PlaySoundEx("human/imonfire", "Voice")
    BURN B 3 Bright A_DropFire
    BURN C 3 Bright A_Wander
    BURN D 3 Bright A_NoBlocking
    BURN E 5 Bright A_DropFire
    BURN FGH 5 Bright A_Wander
    BURN I 5 Bright A_DropFire
    BURN JKL 5 Bright A_Wander
    BURN M 5 Bright A_DropFire
    BURN NOPQPQ 5 Bright
    BURN RSTU 7 Bright
    BURN V -1
    Stop
  Disintegrate:
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    DISR A 5 A_PlaySoundEx("misc/disruptordeath", "Voice")
    DISR BC 5
    DISR D 5 A_NoBlocking
    DISR EF 5
    DISR GHIJ 4
    MEAT D 700
    Stop
  }
}

ACTOR Beggar1New : BeggarNew replaces Beggar1 
{
  ConversationID 38
}

ACTOR Beggar2New : BeggarNew replaces Beggar2 
{
  ConversationID 39
}

ACTOR Beggar3New : BeggarNew replaces Beggar3 
{
  ConversationID 40
}

ACTOR Beggar4New : BeggarNew replaces Beggar4 
{
  ConversationID 41
}

ACTOR Beggar5New : BeggarNew replaces Beggar5 
{
  ConversationID 42
}

// MERCHANTS
ACTOR MerchantNew : Merchant replaces Merchant
{
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.

  Health 94
  PainChance 256 // a merchant should always enter the pain state when getting hurt
  Radius 20
  Height 56
  Mass 5000
  CrushPainSound "misc/pcrush"
  +SOLID
  +SHOOTABLE
  +NOTDMATCH
  +NOSPLASHALERT
  +NOBLOOD
  +NODAMAGE
  +CANTSEEK
  States
  {
  Pain.Charm: Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See
  Spawn:
    MRST A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    MRST A 10 A_Look2
    goto Spawn+1
    MRLK A 30 A_ActiveSound
    goto Spawn+1
    MRLK B 30
    goto Spawn+1
    MRBD ABCDEDCB 4
    MRBD A 5
    MRBD F 6
    goto Spawn+1
  See:
  Pain:
    MRPN A 1
    MRPN A 2 A_AlertMonsters
    MRPN B 3 A_Pain
    MRPN C 3
    MRPN D 9 Door_CloseWaitOpen(999, 64, 960)
    MRPN C 4
    MRPN B 3
    MRPN A 3 A_ClearSoundTarget
    Goto Spawn
  Yes:
    MRYS A 20
    // Fall through
  Greetings:
    MRGT ABCDEFGHI 5
    Goto Spawn
  No:
    MRNO AB 6
    MRNO C 10
    MRNO BA 6
    Goto Greetings
  }
}

ACTOR WeaponSmithNew : MerchantNew replaces WeaponSmith
{
  ConversationID 2
  PainSound "smith/pain"
  Tag "$TAG_WEAPONSMITH" // "Weapon Smith"
}

ACTOR BarKeepNew : MerchantNew replaces BarKeep
{
  ConversationID 3
  Translation 4
  PainSound "barkeep/pain"
  ActiveSound "barkeep/active"
  Tag "$TAG_BARKEEP" // "Bar Keep"
}

ACTOR ArmorerNew : MerchantNew replaces Armorer
{
  ConversationID 4
  Translation 5
  PainSound "armorer/pain"
  Tag "$TAG_ARMORER" // "Armorer"
}

ACTOR MedicNew : MerchantNew replaces Medic
{
  ConversationID 5
  Translation 6
  PainSound "medic/pain"
  Tag "$TAG_MEDIC" // "Medic"
}

// THE FRONT
ACTOR RebelNew : Rebel replaces Rebel // Base class for Rebels
{
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
  DamageFactor "PoisonBolt", 10.0

  Health 120		// 2x the HP
  PainChance 187	// 75% the original pain chance
  Speed 10			// 25% more speed than before
  Radius 20
  Height 56
  Monster
  +FRIENDLY
  -COUNTKILL
  +NOSPLASHALERT
  +CANTSEEK
  species "Players"
  MinMissileChance 150
  Tag "$TAG_REBEL" // "Rebel"
  SeeSound "rebel/sight"
  PainSound "rebel/pain"
  DeathSound "rebel/death"
  ActiveSound "rebel/active"
  Obituary "$OB_REBEL" // "%o was gunned down by a Rebel."

  States
  {
  Pain.Charm: Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See
  Spawn:
    HMN1 P 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    HMN1 P 5 A_Look2
    goto Spawn+1
    HMN1 Q 8
    goto Spawn+1
    HMN1 R 8
    goto Spawn+1
    HMN1 ABCDABCD 6 A_Wander
    goto Spawn+1
  See:
    HMN1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    HMN1 AABBCCDD 3 A_Chase
    Loop
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    HMN1 E 5 A_FaceTarget
    HMN1 F 0 A_PlaySound ("monsters/rifle", CHAN_WEAPON)
    HMN1 F 0 A_FaceTarget
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckHitscanType") == 0, "BulletShot1")
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckHitscanType") == 1, "TracerShot1")

   BulletShot1:
    HMN1 F 0 A_CustomBulletAttack (8, 0, 1, 3*random(1,5), "StrifePuff", 2048, CBAF_NORANDOM)
    goto EndShot1
   TracerShot1:
    HMN1 F 0 A_CustomMissile("StrifeGenBulletTracer", 32, 12, frandom(-4.0,4.0), CMF_OFFSETPITCH, frandom(-0.0,0.0))
    goto EndShot1

   EndShot1:
    HMN1 F 5 
    HMN1 E 0 A_PlaySound ("monsters/rifle", CHAN_WEAPON)
    HMN1 E 0 A_FaceTarget
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckHitscanType") == 0, "BulletShot2")
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckHitscanType") == 1, "TracerShot2")

   BulletShot2:
    HMN1 E 0 A_CustomBulletAttack (8, 0, 1, 3*random(1,5), "StrifePuff", 2048, CBAF_NORANDOM)
    goto EndShot2
   TracerShot2:
    HMN1 E 0 A_CustomMissile("StrifeGenBulletTracer", 32, 12, frandom(-4.0,4.0), CMF_OFFSETPITCH, frandom(-0.0,0.0))
    goto EndShot2

   EndShot2:
    HMN1 E 5
    HMN1 F 0 A_PlaySound ("monsters/rifle", CHAN_WEAPON)
    HMN1 F 0 A_FaceTarget
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckHitscanType") == 0, "BulletShot3")
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckHitscanType") == 1, "TracerShot3")

   BulletShot3:
    HMN1 F 0 A_CustomBulletAttack (8, 0, 1, 3*random(1,5), "StrifePuff", 2048, CBAF_NORANDOM)
    goto EndShot3
   TracerShot3:
    HMN1 F 0 A_CustomMissile("StrifeGenBulletTracer", 32, 12, frandom(-4.0,4.0), CMF_OFFSETPITCH, frandom(-0.0,0.0))
    goto EndShot3

   EndShot3:
    HMN1 F 8
    HMN1 F 0 
    HMN1 O 0 A_Jump(96,"See")
    HMN1 O 0 A_MonsterRefire(48,"See")
    Goto See

  Pain:
    HMN1 O 2
    HMN1 O 2 A_Pain
    HMN1 O 0 A_Jump(80,"Missile")
    Goto See
  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    HMN1 G 5
    HMN1 H 5 A_Scream
    HMN1 I 3 A_NoBlocking
    HMN1 J 4
    HMN1 KLM 3
    HMN1 N -1
    Stop
  XDeath:
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    RGIB A 4 A_TossGib
    RGIB B 4 A_XScream
    RGIB C 3 A_NoBlocking
    RGIB DEF 3 A_TossGib
    RGIB G 3
    RGIB H 1400
    Stop
  Burn:
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    BURN A 3 Bright A_PlaySoundEx("human/imonfire", "Voice")
    BURN B 3 Bright A_DropFire
    BURN C 3 Bright A_Wander
    BURN D 3 Bright A_NoBlocking
    BURN E 5 Bright A_DropFire
    BURN FGH 5 Bright A_Wander
    BURN I 5 Bright A_DropFire
    BURN JKL 5 Bright A_Wander
    BURN M 5 Bright A_DropFire
    BURN NOPQPQ 5 Bright
    BURN RSTU 7 Bright
    BURN V -1
    Stop
  Disintegrate:
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    DISR A 5 A_PlaySoundEx("misc/disruptordeath", "Voice")
    DISR BC 5
    DISR D 5 A_NoBlocking
    DISR EF 5
    DISR GHIJ 4
    MEAT D 700
    Stop
  }
}

ACTOR Rebel1New : RebelNew replaces Rebel1
{
  ConversationID 43
  DropItem "ClipOfBullets"
}

ACTOR Rebel2New : RebelNew replaces Rebel2
{
  ConversationID 44
}

ACTOR Rebel3New : RebelNew replaces Rebel3
{
  ConversationID 45
}

ACTOR Rebel4New : RebelNew replaces Rebel4
{
  ConversationID 46
}

ACTOR Rebel5New : RebelNew replaces Rebel5
{
  ConversationID 47
}

ACTOR Rebel6New : RebelNew replaces Rebel6
{
  ConversationID 48
}

// THE ORDER
ACTOR AcolyteNew : Acolyte replaces Acolyte
{
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
  DamageFactor "PoisonBolt", 10.0

  DamageFactor "Fire", 0.875
  DamageFactor "Ice", 0.9375
  DamageFactor "Thunder", 1.25

  Painchance 150
  Painchance "Fist", 225 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 255 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 225 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 255
  Painchance "GravityMP", 255
  Painchance "GravityHPMP", 255 
  DropItem "AssaultGun" 1
  
  States
  {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    AGRD A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    AGRD A 5 A_Look2
    goto Spawn+1
    AGRD B 8 A_ClearShadow
    goto Spawn+1
    AGRD D 8
    goto Spawn+1
    AGRD ABCDABCD 5 A_Wander
    goto Spawn+1
  See:
    AGRD A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    AGRD A 6 Fast Slow A_AcolyteBits
    AGRD BCD 6 Fast Slow A_Chase
    Loop
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    AGRD E 8 Fast Slow A_FaceTarget
    AGRD F 0 A_PlaySound ("monsters/rifle", CHAN_WEAPON)
    AGRD F 0 A_FaceTarget
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckHitscanType") == 0, "BulletShot1")
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckHitscanType") == 1, "TracerShot1")

   BulletShot1:
    AGRD F 0 A_CustomBulletAttack (8, 0, 1, 3*random(1,5), "StrifePuff", 2048, CBAF_NORANDOM)
    goto EndShot1
   TracerShot1:
    AGRD F 0 A_CustomMissile("StrifeGenBulletTracer", 32, 12, frandom(-4.0,4.0), CMF_OFFSETPITCH, frandom(-0.0,0.0))
    goto EndShot1

   EndShot1:
    AGRD F 4 Fast Slow 
    AGRD E 0 A_PlaySound ("monsters/rifle", CHAN_WEAPON)
    AGRD E 0 A_FaceTarget
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckHitscanType") == 0, "BulletShot2")
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckHitscanType") == 1, "TracerShot2")

   BulletShot2:
    AGRD E 0 A_CustomBulletAttack (8, 0, 1, 3*random(1,5), "StrifePuff", 2048, CBAF_NORANDOM)
    goto EndShot2
   TracerShot2:
    AGRD E 0 A_CustomMissile("StrifeGenBulletTracer", 32, 12, frandom(-4.0,4.0), CMF_OFFSETPITCH, frandom(-0.0,0.0))
    goto EndShot2

   EndShot2:
    AGRD E 4 Fast Slow
    AGRD F 0 A_PlaySound ("monsters/rifle", CHAN_WEAPON)
    AGRD F 0 A_FaceTarget
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckHitscanType") == 0, "BulletShot3")
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckHitscanType") == 1, "TracerShot3")
	
   BulletShot3:
    AGRD F 0 A_CustomBulletAttack (8, 0, 1, 3*random(1,5), "StrifePuff", 2048, CBAF_NORANDOM)
    goto EndShot3
   TracerShot3:
    AGRD F 0 A_CustomMissile("StrifeGenBulletTracer", 32, 12, frandom(-4.0,4.0), CMF_OFFSETPITCH, frandom(-0.0,0.0))
    goto EndShot3

   EndShot3:
    AGRD F 6 Fast Slow 
    AGRD F 0 
    Goto See
  Pain:
    AGRD O 8 Fast Slow A_Pain
    Goto See
  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 A_GiveToTarget ("Coin", random(3,8))
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    AGRD G 4
    AGRD H 4 A_Scream
    AGRD I 4
    AGRD J 3
    AGRD K 3 A_NoBlocking
    AGRD L 3
    AGRD M 3 A_AcolyteDie
    AGRD N -1
    Stop
  XDeath:
    TNT1 A 0 A_GiveToTarget ("Coin", random(3,8))
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    GIBS A 5 A_NoBlocking
    GIBS BC 5 A_TossGib
    GIBS D 4 A_TossGib
    GIBS E 4 A_XScream
    GIBS F 4 A_TossGib
    GIBS GH 4
    GIBS I 5
    GIBS J 5 A_AcolyteDie
    GIBS K 5
    GIBS L 1400
    Stop
  Ice:
    TNT1 A 0 A_GiveToTarget ("Coin", random(3,8))
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 A_ChangeFlag("CANTSEEK", TRUE)
    AGRD O 5 A_FreezeDeath
    AGRD O 1 A_FreezeDeathChunks
    Wait
  Raise:
    AGRD M 3 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    AGRD LKJ 3 
    AGRD IHG 4 
    goto See
  Burn:
    TNT1 A 0 A_GiveToTarget ("Coin", random(3,8))
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    BURN A 3 Bright A_PlaySoundEx("human/imonfire", "Voice")
    BURN B 3 Bright A_DropFire
    BURN C 3 Bright A_Wander
    BURN D 3 Bright A_NoBlocking
    BURN E 5 Bright A_DropFire
    BURN FGH 5 Bright A_Wander
    BURN I 5 Bright A_DropFire
    BURN JKL 5 Bright A_Wander
    BURN M 5 Bright A_DropFire
    BURN NOPQPQ 5 Bright
    BURN RSTU 7 Bright
    BURN V -1
    Stop
  Disintegrate:
    TNT1 A 0 A_GiveToTarget ("Coin", random(3,8))
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    DISR A 5 A_PlaySoundEx("misc/disruptordeath", "Voice")
    DISR BC 5
    DISR D 5 A_NoBlocking
    DISR EF 5
    DISR GHIJ 4
    MEAT D 700
    Stop
  }
}

ACTOR AcolyteBlueNew : AcolyteNew replaces AcolyteBlue
{
  ConversationID 60
  Health 60
  Translation 6
}

ACTOR AcolyteDGreenNew : AcolyteNew replaces AcolyteDGreen
{
  ConversationID 57
  +MISSILEMORE
  +MISSILEEVENMORE
  Translation 3
}

ACTOR AcolyteGoldNew : AcolyteNew replaces AcolyteGold
{
  ConversationID 58
  +MISSILEMORE
  +MISSILEEVENMORE
  Translation 4
}

ACTOR AcolyteGrayNew : AcolyteNew replaces AcolyteGray
{
  ConversationID 56
  +MISSILEMORE
  +MISSILEEVENMORE
  Translation 2
}

ACTOR AcolyteLGreenNew : AcolyteNew replaces AcolyteLGreen
{
  ConversationID 59
  Health 60
  Translation 6
}

ACTOR AcolyteRedNew : AcolyteNew replaces AcolyteRed
{
  ConversationID 54
  +MISSILEMORE
  +MISSILEEVENMORE
  Translation 2
}

ACTOR AcolyteRustNew : AcolyteNew replaces AcolyteRust
{
  ConversationID 55
  +MISSILEMORE
  +MISSILEEVENMORE
  Translation 2
}

ACTOR AcolyteShadowNew : AcolyteNew replaces AcolyteShadow
{
  ConversationID 61
  +MISSILEMORE
  DropItem "ClipOfBullets"
  States
  {
  See:
    AGRD A 6 A_BeShadowyFoe
    Goto Super::See+1
  Pain:
    AGRD O 0 Fast Slow A_SetShadow
    AGRD O 8 Fast Slow A_Pain
    Goto See
  }
}

ACTOR AcolyteTanNew : AcolyteNew replaces AcolyteTan
{
  ConversationID 53
  +MISSILEMORE
  +MISSILEEVENMORE
  DropItem "ClipOfBullets"
}

ACTOR TemplarNew : Templar replaces Templar
{
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
  DamageFactor "PoisonBolt", 0.05

  DamageFactor "Fire", 0.75
  DamageFactor "Ice", 0.875
  DamageFactor "Thunder", 1.5

  Painchance 100
  Painchance "Fist", 150 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 250 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 150 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 128
  Painchance "GravityMP", 128
  Painchance "GravityHPMP", 128

  ConversationID 62
  +NOBLOOD
  +SEESDAGGERS
  +NOSPLASHALERT
  DropItem "EnergyPod"
  DropItem "Mauler" 1

  States
  {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    PGRD A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    PGRD A 5 A_Look2
    goto Spawn+1
    PGRD B 10
    goto Spawn+1
    PGRD C 10
    goto Spawn+1
    PGRD B 10 A_Wander
    goto Spawn+1
  See:
    PGRD A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    PGRD AABBCCDD 3 A_Chase
    Loop
  Melee:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    PGRD E 8 A_FaceTarget
    PGRD F 8 A_CustomMeleeAttack(random[ReaverMelee](1, 8)*3, "reaver/blade")
    Goto See
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    PGRD G 8 Bright A_FaceTarget
    AGRD F 0 A_PlaySound ("templar/shoot", CHAN_WEAPON)
    PGRD H 0 A_FaceTarget
    PGRD H 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckShotgunnerSpreads") == 0, "OriginalAttack")
    PGRD H 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckShotgunnerSpreads") == 1, "RetailAttack")

   // Original Attack [10 pellets @ 2*1d4 damage, original Templar's version of the Mauler]
   OriginalAttack:
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckHitscanType") == 0, "OriginalBulletShot1")
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckHitscanType") == 1, "OriginalTracerShot1")

   OriginalBulletShot1:
    PGRD H 0 A_CustomBulletAttack (11.25, 7, 10, 2*random(1,4), "MaulerPuff", 2048, CBAF_NORANDOM) // A_TemplarAttack
    goto EndMissile
   OriginalTracerShot1:
    PGRD HHHHHHHHHH 0 A_CustomMissile("StrifeMaulerTracer", 32, 12, frandom(-5.625,5.625), CMF_OFFSETPITCH, frandom(-3.5,3.5))
    goto EndMissile

   // "Retail" Attack [20 pellets @ 5*1d3 damage, with a wider spread: like the Strife player's Mauler (harder to deal with)]
   RetailAttack:
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckHitscanType") == 0, "RetailBulletShot1")
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckHitscanType") == 1, "RetailTracerShot1")

   RetailBulletShot1:
    PGRD H 0 A_CustomBulletAttack (22.5, 14, 20, 5*random(1,3), "MaulerPuff", 2048, CBAF_NORANDOM) // A_TemplarAttack
    goto EndMissile
   RetailTracerShot1:
    PGRD HHHHHHHHHHHHHHHHHHHH 0 A_CustomMissile("StrifeMaulerTracerRetail", 32, 12, frandom(-11.25,11.25), CMF_OFFSETPITCH, frandom(-7.0,7.0))
    goto EndMissile

  EndMissile:
    PGRD H 8 Bright 
    Goto See
  Pain:
    PGRD A 2
    PGRD A 2 A_Pain
    Goto See

  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 A_GiveToTarget ("Coin", random(6,12))
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    PGRD I 4 A_TossGib
    PGRD J 4 A_Scream
    PGRD K 4 A_TossGib
    PGRD L 4 A_NoBlocking
    PGRD MN 4
    PGRD O 4 A_TossGib
    PGRD "PQRSTUVWXYZ[" 4
    PGRD "\" -1
    Stop

  Ice:
    TNT1 A 0 A_GiveToTarget ("Coin", random(6,12))
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 A_ChangeFlag("CANTSEEK", TRUE)
    PGRD A 5 A_FreezeDeath
    PGRD A 1 A_FreezeDeathChunks
    Wait
  Raise:
    PGRD "\" 4 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    PGRD "PQRSTUVWXYZ[" 4 
    PGRD ONMLKJI 4
    goto See
  }
}

ACTOR InquisitorNew : Inquisitor // replaces Inquisitor
{
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
  DamageFactor "PoisonBolt", 0.05

  DamageFactor "Fire", 0.25
  DamageFactor "Ice", 0.5
  DamageFactor "Thunder", 1.75

  ConversationID 93
  +DROPOFF
  +NOBLOOD
  +BOSS
  +FLOORCLIP
  +DONTMORPH
  +NORADIUSDMG

  States
  {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    ROB3 A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    ROB3 AB 10 A_Look
    goto Spawn+1
  See:
    ROB3 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    ROB3 B 3 A_InquisitorWalk
    ROB3 B 3 A_Chase
    ROB3 CCDD 4 A_Chase
    ROB3 E 3 A_InquisitorWalk
    ROB3 E 3 A_InquisitorDecide
    Loop
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    ROB3 A 2 A_InquisitorDecide
    ROB3 F 6 A_FaceTarget

    AGRD F 0 A_PlaySound ("reaver/attack", CHAN_WEAPON)
    AGRD F 0 A_FaceTarget
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckHitscanType") == 0, "BulletShot1")
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckHitscanType") == 1, "TracerShot1")

   BulletShot1:
    ROB3 G 0 Bright A_CustomBulletAttack(11.0, 0, 3, random(1,8) * 3, "StrifePuff", 0, CBAF_NORANDOM) // A_ReaverRanged
	goto EndMissile1
   TracerShot1:
    ROB3 GGG 0 Bright A_CustomMissile("StrifeReaverBulletTracer", 80, -28, frandom(-5.5,5.5), CMF_OFFSETPITCH, frandom(-0.0,0.0))
	goto EndMissile1
  EndMissile1:
    ROB3 G 8
    AGRD F 0 A_PlaySound ("reaver/attack", CHAN_WEAPON)
    AGRD F 0 A_FaceTarget
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckHitscanType") == 0, "BulletShot2")
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckHitscanType") == 1, "TracerShot2")

   BulletShot2:
    ROB3 G 0 A_CustomBulletAttack(11.0, 0, 3, random(1,8) * 3, "StrifePuff", 0, CBAF_NORANDOM) // A_ReaverRanged
	goto EndMissile2
   TracerShot2:
    ROB3 GGG 0 A_CustomMissile("StrifeReaverBulletTracer", 80, -28, frandom(-5.5,5.5), CMF_OFFSETPITCH, frandom(-0.0,0.0))
	goto EndMissile2
  EndMissile2:
    ROB3 G 8 
    Goto See
  Grenade:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    ROB3 K 12 A_FaceTarget
    ROB3 J 6 Bright A_InquisitorAttack
    ROB3 K 12
    Goto See
  Jump:
    ROB3 H 8 Bright A_InquisitorJump
    ROB3 I 4 Bright A_InquisitorCheckLand
    ROB3 H 4 Bright A_InquisitorCheckLand
    Goto Jump+1

  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto See
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto See
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 A_GiveToTarget ("Coin", random(100,150))
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    ROB3 L 0 A_StopSoundEx("Item")
    ROB3 L 4 A_TossGib
    ROB3 M 4 A_Scream
    ROB3 N 4 A_TossGib
    ROB3 O 4 Bright A_Explode(128, 128, 1, 1)
    ROB3 P 4 Bright A_TossGib
    ROB3 Q 4 Bright A_NoBlocking
    ROB3 RSTUV 4 A_TossGib
    ROB3 W 4 Bright A_Explode(128, 128, 1, 1)
    ROB3 XY 4 Bright A_TossGib
    ROB3 Z 4 A_TossGib
    ROB3 "[" 4 A_TossGib
    ROB3 "\" 3 A_TossGib
    ROB3 "]" 3 Bright A_Explode(128, 128, 1, 1)
    RBB3 A 3 Bright A_TossArm
    RBB3 B 3 Bright A_TossGib
    RBB3 CD 3 A_TossGib
    RBB3 E -1
    Stop
  Raise:
    RBB3 C 3 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    RBB3 DBA 3 
    ROB3 "]" 3 
    ROB3 "\" 3 
    ROB3 "[" 3 
    ROB3 ZYXWVUTSRQPONML 4 
    goto See
  }
}

ACTOR ReaverNew : Reaver replaces Reaver
{
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
  DamageFactor "PoisonBolt", 0.05

  DamageFactor "Fire", 0.5
  DamageFactor "Ice", 0.75
  DamageFactor "Thunder", 1.75

  ConversationID 52
  Painchance 128
  Painchance "Fist", 192 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 255 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 192 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 32
  Painchance "GravityMP", 32
  Painchance "GravityHPMP", 32 

  +NOBLOOD
  +INCOMBAT
  States
  {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    ROB1 A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    ROB1 A 10 A_Look
    goto Spawn+1
  See:
    ROB1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    ROB1 BBCCDDEE 3 A_Chase
    Loop
  Melee:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    ROB1 H 6 Slow A_FaceTarget
    ROB1 I 8 Slow A_CustomMeleeAttack(random[ReaverMelee](1, 8)*3, "reaver/blade")
    ROB1 H 6 Slow
    Goto See
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    ROB1 F 8 Slow A_FaceTarget

    AGRD F 0 A_PlaySound ("reaver/attack", CHAN_WEAPON)
    AGRD F 0 A_FaceTarget
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckHitscanType") == 0, "BulletShot1")
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckHitscanType") == 1, "TracerShot1")

   BulletShot1:
    ROB1 G 0 Slow Bright A_CustomBulletAttack(11.0, 0, 3, random(1,8) * 3, "StrifePuff", 0, CBAF_NORANDOM) // A_ReaverRanged
    goto EndMissile
   TracerShot1:
    ROB1 GGG 0 Slow Bright A_CustomMissile("StrifeReaverBulletTracer", 32, -12, frandom(-5.5,5.5), CMF_OFFSETPITCH, frandom(-0.0,0.0))
    goto EndMissile
	
  EndMissile:
    ROB1 G 11
    Goto See
  Pain:
    ROB1 A 2 Slow
    ROB1 A 2 A_Pain
    Goto See

  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 A_GiveToTarget ("Coin", random(5,10))
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    ROB1 J 6
    ROB1 K 6 A_Scream
    ROB1 L 5
    ROB1 M 5 A_NoBlocking
    ROB1 NOP 5
    ROB1 Q 6 A_Explode(32, 32, 1, 1)
    ROB1 R -1
    Stop
  XDeath:
    TNT1 A 0 A_GiveToTarget ("Coin", random(5,10))
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    ROB1 L 5 A_TossGib
    ROB1 M 5 A_Scream
    ROB1 N 5 A_TossGib
    ROB1 O 5 A_NoBlocking
    ROB1 P 5 A_TossGib
    Goto Death+10
  Raise:
    ROB1 Q 6 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    ROB1 PONML 5 
    ROB1 KJ 6 
    goto See

  }
}

ACTOR CrusaderNew : Crusader replaces Crusader
{
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
  DamageFactor "PoisonBolt", 0.05

  DamageFactor "Fire", 0.5
  DamageFactor "Ice", 0.75
  DamageFactor "Thunder", 1.75

  ConversationID 63
  Painchance 128
  Painchance "Fist", 192 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 255 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 192 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 32
  Painchance "GravityMP", 32
  Painchance "GravityHPMP", 32 

  +FLOORCLIP
  +DONTMORPH
  +MISSILEMORE
  +INCOMBAT
  +NOICEDEATH
  +NOBLOOD

  States
  {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    ROB2 A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    ROB2 Q 10 A_Look
    goto Spawn+1
  See:
    ROB2 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    ROB2 AABBCCDD 3 A_Chase
    Loop
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    ROB2 E 3 Slow A_FaceTarget
    ROB2 F 2 Slow Bright A_CrusaderChoose
    ROB2 E 2 Slow Bright A_CrusaderSweepLeft
    ROB2 F 3 Slow Bright A_CrusaderSweepLeft
    ROB2 EF 2 Slow Bright A_CrusaderSweepLeft
    ROB2 EFE 2 Slow Bright A_CrusaderSweepRight
    ROB2 F 2 Slow A_CrusaderRefire
    Loop
  Pain:
    ROB2 D 1 Slow A_Pain
    Goto See

  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 A_GiveToTarget ("Coin", random(7,16))
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    ROB2 G 3 A_Scream
    ROB2 H 5 A_TossGib
    ROB2 I 4 Bright A_TossGib
    ROB2 J 4 Bright A_Explode(64, 64, 1, 1)
    ROB2 K 4 Bright A_Fall
    ROB2 L 4 A_Explode(64, 64, 1, 1)
    ROB2 MN 4 A_TossGib
    ROB2 O 4 A_Explode(64, 64, 1, 1)
    ROB2 P -1 A_CrusaderDeath
    Stop

  Raise:
    ROB2 O 6 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    ROB2 NMLKJI 6 
    ROB2 H 5 
    ROB2 G 3 
    goto See
  }
}

ACTOR SentinelNew : Sentinel replaces Sentinel
{
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
  DamageFactor "PoisonBolt", 0.05

  DamageFactor "Fire", 0.75
  DamageFactor "Ice", 0.875
  DamageFactor "Thunder", 1.75

  ConversationID 91
  Painchance 255
  Painchance "Fist", 255 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 255 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 255 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 32
  Painchance "GravityMP", 32
  Painchance "GravityHPMP", 32

  +SPAWNCEILING
  +NOGRAVITY
  +DROPOFF
  +NOBLOOD
  +NOBLOCKMONST
  +INCOMBAT
  +MISSILEMORE
  +LOOKALLAROUND
  +NEVERRESPAWN

  States
  {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    SEWR A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    SEWR A 10 A_Look
    goto Spawn+1
  See:
    SEWR A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    SEWR A 6 A_SentinelBob
    SEWR A 6 A_Chase
    Loop
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    SEWR B 4 A_FaceTarget
    SEWR C 8 Bright A_SentinelAttack
    SEWR C 4 Bright A_SentinelRefire
    Goto Missile+2
  Pain:
    SEWR D 5 A_Pain
    Goto Missile+3

  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
	TNT1 A 0 A_GiveToTarget ("Coin", random(4,7))
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    SEWR D 7 A_Fall
    SEWR E 8 Bright A_TossGib
    SEWR F 5 Bright A_Scream
    SEWR GH 4 Bright A_TossGib
    SEWR I 4
    SEWR J 5
    Stop
  }
}

ACTOR OStalkerNew : Stalker replaces Stalker
{
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
  DamageFactor "PoisonBolt", 0.05

  DamageFactor "Fire", 0.75
  DamageFactor "Ice", 0.875
  DamageFactor "Thunder", 1.75

  ConversationID 92
  PainChance 40
  Painchance "Fist", 60 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 100 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 60 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 32
  Painchance "GravityMP", 32
  Painchance "GravityHPMP", 32

  +NOGRAVITY
  +DROPOFF
  +NOBLOOD
  +SPAWNCEILING
  +INCOMBAT
  +NOVERTICALMELEERANGE

  States
  {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    STLK A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    STLK A 1 A_StalkerLookInit
    goto Spawn+1
  LookCeiling:
    STLK A 10 A_Look
    Loop
  LookFloor:
    STLK J 10 A_Look
    Loop
  See:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    STLK A 1 Slow A_StalkerChaseDecide
    STLK ABB 3 Slow A_Chase
    STLK C 3 Slow A_StalkerWalk
    STLK C 3 Slow A_Chase
    Loop
  Melee:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    STLK J 3 Slow A_FaceTarget
    STLK K 3 Slow A_StalkerAttack
  SeeFloor:
    STLK J 3 A_StalkerWalk
    STLK KK 3 A_Chase
    STLK L 3 A_StalkerWalk
    STLK L 3 A_Chase
    Loop
  Pain:
    STLK L 1 A_Pain
    Goto See
  Drop:
    STLK C 2 A_StalkerDrop
    STLK IHGFED 3
    Goto SeeFloor

  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    STLK O 0 A_GiveToTarget ("Coin", random(3,6))
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    STLK O 4
    STLK P 4 A_Scream
    STLK QRST 4
    STLK U 4 A_NoBlocking
    STLK VW 4
    STLK "XYZ[" 4 Bright
    Stop
  }
}

ACTOR CeilingTurretNew : CeilingTurret replaces CeilingTurret
{
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
  DamageFactor "PoisonBolt", 0.05

  DamageFactor "Fire", 0.85
  DamageFactor "Ice", 0.9375
  DamageFactor "Thunder", 1.25

  ConversationID 92
  PainChance 0
  Painchance "Fist", 0 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 0 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 0 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 0
  Painchance "GravityMP", 0
  Painchance "GravityHPMP", 0

  -SOLID
  -CANPASS
  +AMBUSH
  +SPAWNCEILING
  +NOGRAVITY
  +NOBLOOD
  +NOSPLASHALERT
  +DONTFALL

  States
  {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    TURT A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    TURT A 5 A_TurretLook
    goto Spawn+1
  See:
    TURT A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    TURT A 2 A_Chase
    Loop
  Missile:
  Pain:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    TNT1 A 0 A_PlaySound ("monsters/rifle", CHAN_WEAPON)
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckHitscanType") == 0, "BulletShot")
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckHitscanType") == 1, "TracerShot")

  BulletShot:
    TURT B 0 A_CustomBulletAttack (8, 0, 1, 3*random(1,5), "StrifePuff", 2048, CBAF_NORANDOM)
    goto EndAttack
  TracerShot:
    TURT B 0 A_CustomMissile("StrifeGenBulletTracer", 0, 0, frandom(-4.0,4.0), CMF_OFFSETPITCH, frandom(-0.0,0.0))
    goto EndAttack

  EndAttack:
    TURT B 4 Slow 
    TURT D 3 Slow A_SentinelRefire
    TURT A 4 A_SentinelRefire
    Loop

  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 A_GiveToTarget ("Coin", random(4,7))
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    BALL A 6 Bright A_Scream
    BALL BCDE 6 Bright
    TURT C -1
    Stop
  }
}

// ORDER LEADERS/ETC
ACTOR ProgrammerNew : Programmer replaces Programmer
{
 var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
 var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
 var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
 DamageFactor "PoisonBolt", 0.25
 
  ConversationID 95
  Health 1100
  PainChance 50
  Painchance "Fist", 75 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 125 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 75 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 4
  Painchance "GravityMP", 4
  Painchance "GravityHPMP", 4
  Speed 26
  FloatSpeed 5
  Radius 45
  Height 60
  Mass 800
  Damage 4
  Monster
  +NOGRAVITY
  +FLOAT
  +NOBLOOD
  +NOTDMATCH
  +DONTMORPH
  +NOBLOCKMONST
  +LOOKALLAROUND
  +NOICEDEATH
  +NOTARGETSWITCH
  +NOFEAR
  DamageFactor "Fire", 0.5
  DamageFactor "Ice", 0.75
  MinMissileChance 150
  AttackSound "programmer/attack"
  PainSound "programmer/pain"
  DeathSound "programmer/death"
  ActiveSound "programmer/active"
  Obituary "$OB_PROGRAMMER" // "%o was deleted by the Programmer."
  //DropItem "Sigil1"

  States
  {
  Spawn:
    PRGR A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    PRGR A 5 A_Look
    PRGR A 1 A_SentinelBob
    goto Spawn+1
  See:
    PRGR A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
    PRGR A 160 A_SentinelBob
    PRGR BCD 5 A_SentinelBob
	PRGR A 0 Thing_ChangeTID(0,1222)
    PRGR EF 2 A_SentinelBob
    PRGR EF 3 A_Chase
    Goto See+6
  Melee:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    PRGR E 2 A_SentinelBob
    PRGR F 3 A_SentinelBob
    PRGR E 3 A_FaceTarget
    PRGR F 4 A_ProgrammerMelee
    Goto See+6
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    PRGR G 5 A_FaceTarget
    PRGR H 5 A_SentinelBob
    PRGR I 5 Bright A_FaceTarget
    PRGR J 5 Bright A_SpotLightning
    Goto See+6
  Pain:
    PRGR K 5 A_Pain
    PRGR L 5 A_SentinelBob
    Goto See+6
  Pain.GravityHP: Goto See
  Pain.GravityMP: Goto See
  Pain.GravityHPMP: Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    PRGR L 0 A_GiveToTarget ("Coin", random(1350,1800))
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    PRGR L 7 Bright A_TossGib
    PRGR M 7 Bright A_Scream
    PRGR N 7 Bright A_TossGib
    PRGR O 7 Bright A_NoBlocking
    PRGR P 7 Bright A_TossGib
    PRGR Q 7 Bright A_SpawnProgrammerBase
    PRGR R 7 Bright
    PRGR S 6 Bright
    PRGR TUVW 5 Bright
    PRGR X 32 Bright
    PRGR X -1 Bright // A_ProgrammerDeath
	{
 	 A_GiveInventory("Sigil1",1,AAPTR_PLAYER1); // Programmer dead
 	 A_GiveInventory("ProgLevelEnder",1,AAPTR_PLAYER1); // Programmer dead
	 A_BossDeath;
	}
    Stop
  XDeath:
    goto Death
  }
}

ACTOR StrifeBishopNew : StrifeBishop replaces StrifeBishop
{
 var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
 var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
 var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
 DamageFactor "PoisonBolt", 0.15
 
  ConversationID 64
  Health 500
  PainChance 128
  Painchance "Fist", 192 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 255 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 192 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 4
  Painchance "GravityMP", 4
  Painchance "GravityHPMP", 4
  Speed 8
  Radius 40
  Height 56
  Mass 500
  Monster
  +NOBLOOD
  +NOTDMATCH
  +FLOORCLIP
  +INCOMBAT
  +NOICEDEATH
  +NEVERRESPAWN
  +NOFEAR
  DamageFactor "Fire", 0.5
  DamageFactor "Ice", 0.75
  DamageFactor "Thunder", 1.5
  MinMissileChance 150
  MaxDropoffHeight 32
  SeeSound "bishop/sight"
  PainSound "bishop/pain"
  DeathSound "bishop/death"
  ActiveSound "bishop/active"
  DropItem "CrateOfMissiles", 256, 20
  Obituary "$OB_STFBISHOP" // "%o was blown away by the Bishop."
  States
  {
  Spawn:
    MLDR A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    MLDR A 10 A_Look
    goto Spawn+1
  See:
    MLDR A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
	MLDR A 0 Thing_ChangeTID(0,1222)
    MLDR AABBCCDD 3 A_Chase
    Loop
  Missile:
    MLDR E 3 A_FaceTarget
    MLDR F 2 Bright A_CustomMissile("BishopMissile", 64, 0, 0, CMF_AIMOFFSET)
    Goto See+2
  Pain:
    MLDR D 1 A_Pain
    Goto See+2
  Pain.GravityHP: Goto See
  Pain.GravityMP: Goto See
  Pain.GravityHPMP: Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    MLDR G 0 A_GiveToTarget ("Coin", random(1350,1800))
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    MLDR G 3 Bright
    MLDR H 5 Bright A_Scream
    MLDR I 4 Bright A_TossGib
    MLDR J 4 Bright A_Explode(64, 64, 1, 1)
    MLDR KL 3 Bright
    MLDR M 4 Bright A_NoBlocking
    MLDR N 4 Bright
    MLDR O 4 Bright A_TossGib
    MLDR P 4 Bright
    MLDR Q 4 Bright A_TossGib
    MLDR R 4 Bright
    MLDR S 4 Bright A_TossGib
    MLDR T 4 Bright
    MLDR U 4 Bright A_TossGib
    MLDR V 4 Bright A_SpawnItemEx("AlienSpectre2", 0, 0, 0, 0, 0, random[spectrespawn](0, 255)*0.0078125,
                                  0, SXF_NOCHECKPOSITION)
    Stop
  XDeath:
    goto Death
  }
}

ACTOR OracleNew : Oracle replaces Oracle
{
 var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
 var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
 var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
 DamageFactor "PoisonBolt", 0.05
 
  ConversationID 65
  Health 250
  Radius 15
  Height 56
  Monster
  +NOTDMATCH
  +NOBLOOD
  +NEVERRESPAWN
  +NOFEAR
  DamageFactor "Fire", 0.5
  DamageFactor "Ice", 0.75
  DamageFactor "SpectralLow", 0.25 // Sigil level 1 can barely hurt them
  MaxDropoffHeight 32
  Tag "$TAG_ORACLE" // "Oracle"
  DropItem "Meat"

  States
  {
  Spawn:
    ORCL A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
  Idle:
    ORCL A -1
    Stop
  Pain:
    ORCL A 1 A_Pain
    Goto Idle
  Pain.GravityHP: Goto Idle
  Pain.GravityMP: Goto Idle
  Pain.GravityHPMP: Goto Idle
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    ORCL B 0 A_GiveToTarget ("Coin", random(675,900))
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    ORCL BCDEFGHIJK 5
    ORCL L 5 A_NoBlocking
    ORCL M 5
    ORCL N 5 A_WakeOracleSpectre
    ORCL OP 5
    ORCL Q -1
    Stop
  XDeath:
    goto Death
  }
}

ACTOR Macil1New : Macil1 replaces Macil1
{
 var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
 var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
 var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
 DamageFactor "PoisonBolt", 0.25
 
  ConversationID 49
  Health 285
  Radius 20
  Height 56
  Speed 8
  PainChance 250
  Painchance "Fist", 255 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 255 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 255 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 4
  Painchance "GravityMP", 4
  Painchance "GravityHPMP", 4
  Monster
  -COUNTKILL
  +NOTDMATCH
  +NOICEDEATH
  +NOSPLASHALERT
  +NODAMAGE
  +NEVERRESPAWN
  +NOFEAR
  DamageFactor "Normal", 0.001
  DamageFactor "Fire", 0.5
  DamageFactor "Ice", 0.75
  MinMissileChance 150
  SeeSound "macil/sight"
  PainSound "macil/pain"
  ActiveSound "macil/active"
  CrushPainSound "misc/pcrush"
  Tag "$TAG_MACIL1" // "MACIL"
  Obituary "$OB_MACIL" // "%o should have never rebelled against Macil."
  DropItem "BoxOfBullets"
  MaxStepHeight 16
  MaxDropoffHeight 32
  States
  {
  Spawn:
    LEDR C 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    LEDR C 5 A_Look2
    goto Spawn+1
    LEDR A 8
    goto Spawn+1
    LEDR B 8
    goto Spawn+1
    LEAD ABCD 6 A_Wander
    goto Spawn+1
  See:
    LEAD A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
	LEAD A 0 Thing_ChangeTID(0,1222)
    LEAD AABBCCDD 3 A_Chase
    Loop
  Missile:
  Death:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    LEAD E 2 A_FaceTarget
    LEAD F 0 A_PlaySound ("monsters/rifle", CHAN_WEAPON)
    LEAD F 0 A_FaceTarget
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckHitscanType") == 0, "BulletShot")
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckHitscanType") == 1, "TracerShot")

   BulletShot:
    LEAD F 0 A_CustomBulletAttack (8, 0, 1, 3*random(1,5), "StrifePuff", 2048, CBAF_NORANDOM)
    goto EndShot
   TracerShot:
    LEAD F 0 A_CustomMissile("StrifeGenBulletTracer", 32, 12, frandom(-4.0,4.0), CMF_OFFSETPITCH, frandom(-0.0,0.0))
    goto EndShot

   EndShot:
    LEAD F 2
    LEAD E 1
    LEAD E 0 A_MonsterRefire(30,"See")
    Goto Missile

  Pain:
    LEAD Y 3
    LEAD Y 3 A_Pain
    Goto See
  }
}

ACTOR Macil2New : Macil2 replaces Macil2
{
 var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
 var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
 var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
 DamageFactor "PoisonBolt", 0.25
 
  DamageFactor "Fire", 0.5
  DamageFactor "Ice", 0.75

  ConversationID 50
  PainChance 200
  Painchance "Fist", 255 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 255 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 255 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 4
  Painchance "GravityMP", 4
  Painchance "GravityHPMP", 4
  +COUNTKILL
  -NODAMAGE
  Tag "$TAG_MACIL2" // "MACIL"
  DeathSound "macil/slop"
  DropItem "None"
  +NOFEAR
  -SPECTRAL

  DamageFactor "SpectralLow", 0.125 // Sigil level 1 cannot hurt them
  DamageFactor "Normal", 0.0001 // 0.01% damage from most attacks. :P
  // After this, set all vulnerablities to what you want them to have to what you want. :P
  DamageFactor "Sceptre", 1
  DamageFactor "Magic", 1
  DamageFactor "Sigil", 1
  DamageFactor "ImpClaw", 1
  DamageFactor "DarkImpClaw", 1
  DamageFactor "CacodemonEye", 1
  DamageFactor "CacolanternEye", 1
  DamageFactor "AbaddonEye", 1
  DamageFactor "KnightFist", 1
  DamageFactor "BaronFist", 1
  DamageFactor "BelphegorFist", 1
  DamageFactor "BrusierFist", 1
  DamageFactor "ArchonFist", 1
  DamageFactor "PyroFist", 1
  DamageFactor "IncarnateSkull", 1
  DamageFactor "DiabloistHand", 1
  DamageFactor "BalrogFist", 1

  States
  {
  Spawn:
    LEDR C 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    LEDR C 5 A_Look2
    goto Spawn+1
    LEDR A 8
    goto Spawn+1
    LEDR B 8
    goto Spawn+1
    LEAD ABCD 6 A_Wander
    goto Spawn+1
  See:
    LEAD A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
	LEAD A 0 Thing_ChangeTID(0,1222)
    LEAD AABBCCDD 3 A_Chase
    Loop
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    LEAD E 4 A_FaceTarget
    LEAD F 0 A_PlaySound ("monsters/rifle", CHAN_WEAPON)
    LEAD F 0 A_FaceTarget
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckHitscanType") == 0, "BulletShot")
    TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("CheckHitscanType") == 1, "TracerShot")

   BulletShot:
    LEAD F 0 A_CustomBulletAttack (8, 0, 1, 3*random(1,5), "StrifePuff", 2048, CBAF_NORANDOM)
    goto EndShot
   TracerShot:
    LEAD F 0 A_CustomMissile("StrifeGenBulletTracer", 32, 12, frandom(-4.0,4.0), CMF_OFFSETPITCH, frandom(-0.0,0.0))
    goto EndShot

   EndShot:
    LEAD F 4
    LEAD E 2
    LEAD E 0 A_MonsterRefire(30,"See")
    Goto Missile

  Pain:
    LEAD Y 3
    LEAD Y 3 A_Pain
    Goto See
  Pain.GravityHP: Goto See
  Pain.GravityMP: Goto See
  Pain.GravityHPMP: Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    LEAD G 0 A_GiveToTarget ("Coin", random(1350,1800))
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    LEAD G 5
    LEAD H 5 A_Scream
    LEAD IJ 4
    LEAD K 3
    LEAD L 3 A_NoBlocking
    LEAD MNOPQRSTUV 3
    LEAD W 3 A_SpawnItemEx("AlienSpectre4", 0, 0, 0, 0, 0, random[spectrespawn](0, 255)*0.0078125, 0, SXF_NOCHECKPOSITION)
    LEAD X -1
    Stop
  XDeath:
    goto Death
  }
}

ACTOR LoremasterNew : Loremaster replaces Loremaster
{
 var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
 var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
 var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
 DamageFactor "PoisonBolt", 0.25
 
  ConversationID 66
  Health 800
  Speed 10
  Radius 15
  Height 56
  FloatSpeed 5
  Painchance "GravityHP", 4
  Painchance "GravityMP", 4
  Painchance "GravityHPMP", 4
  Monster
  +FLOAT
  +NOBLOOD
  +NOGRAVITY
  +NOTDMATCH
  +FLOORCLIP
  +NOBLOCKMONST
  +INCOMBAT
  +LOOKALLAROUND
  +NOICEDEATH
  +NEVERRESPAWN
  +NOFEAR
  DamageFactor "Fire", 0.5
  DamageFactor "Ice", 0.75
  MinMissileChance 150
  Tag "$TAG_PRIEST" // "PRIEST"
  SeeSound "loremaster/sight"
  AttackSound "loremaster/attack"
  PainSound "loremaster/pain"
  DeathSound "loremaster/death"
  ActiveSound "loremaster/active"
  Obituary "$OB_LOREMASTER" // "%o couldn't escape from the Lore Master's grasp."
  DropItem "Junk"
  States
  {
  Spawn:
    PRST A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    PRST A 10 A_Look
    PRST B 10 A_SentinelBob
    goto Spawn+1
  See:
    PRST A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
	PRST A 0 Thing_ChangeTID(0,1222)
    PRST A 4 A_Chase
    PRST A 4 A_SentinelBob
    PRST B 4 A_Chase
    PRST B 4 A_SentinelBob
    PRST C 4 A_Chase
    PRST C 4 A_SentinelBob
    PRST D 4 A_Chase
    PRST D 4 A_SentinelBob
    Loop
  Melee:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    PRST E 4 A_FaceTarget
    PRST F 4 A_CustomMeleeAttack((random[SpectreMelee](0, 255)&9)*5)
    PRST E 4 A_SentinelBob
    Goto See
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    PRST E 4 A_FaceTarget
    PRST F 4 A_CustomMissile("LoreShot", 32, 0)
    PRST E 4 A_SentinelBob
    Goto See
  Pain:
    Goto See
  Pain.GravityHP: Goto See
  Pain.GravityMP: Goto See
  Pain.GravityHPMP: Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    PDED A 0 A_GiveToTarget ("Coin", random(1350,1800))
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    PDED A 6
    PDED B 6 A_Scream
    PDED C 6
    PDED D 6 A_Fall
    PDED E 6
    PDED FGHIJIJIJKL 5
    PDED MNOP 4
    PDED Q 4 A_SpawnItemEx("AlienSpectre5", 0, 0, 0, 0, 0, random[spectrespawn](0, 255)*0.0078125, 0, SXF_NOCHECKPOSITION)
    PDED RS 4
    PDED T -1
    Stop
  XDeath:
    goto Death
  }
}

// SPECTRES
ACTOR AlienSpectre1New : AlienSpectre1 replaces AlienSpectre1
{
 var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
 var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
 var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
 DamageFactor "PoisonBolt", 0.001
 
  ConversationID 67
  Health 1000
  PainChance 250
  Painchance "Fist", 255 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 255 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 255 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 1
  Painchance "GravityMP", 1
  Painchance "GravityHPMP", 1
  Speed 12
  Radius 64
  Height 64
  FloatSpeed 5
  Mass 500000000
  MinMissileChance 150
  RenderStyle Translucent
  Alpha 0.666
  SeeSound "alienspectre/sight"
  AttackSound "alienspectre/blade"
  PainSound "alienspectre/pain"
  DeathSound "alienspectre/death"
  ActiveSound "alienspectre/active"
  Obituary "$OB_ALIENSPECTRE" // "%o was struck down by the Spectre."
  +NOGRAVITY
  +FLOAT
  +SHADOW
  +NOTDMATCH
  +DONTMORPH
  +NOBLOCKMONST
  +INCOMBAT
  +LOOKALLAROUND
  +NOICEDEATH
  +NOFEAR
  -SPECTRAL

  DamageFactor "SpectralLow", 1 // Sigil level 1 can hurt them
  DamageFactor "Normal", 0.0001 // 0.01% damage from most attacks. :P
  // After this, set all vulnerablities to what you want them to have to what you want. :P
  DamageFactor "Sceptre", 1
  DamageFactor "Magic", 1
  DamageFactor "Fire", 0.375
  DamageFactor "Ice", 0.375
  DamageFactor "Thunder", 0.375
  DamageFactor "Holy", 1
  DamageFactor "Sigil", 1
  DamageFactor "ImpClaw", 1
  DamageFactor "DarkImpClaw", 1
  DamageFactor "CacodemonEye", 1
  DamageFactor "CacolanternEye", 1
  DamageFactor "AbaddonEye", 1
  DamageFactor "KnightFist", 1
  DamageFactor "BaronFist", 1
  DamageFactor "BelphegorFist", 1
  DamageFactor "BrusierFist", 1
  DamageFactor "ArchonFist", 1
  DamageFactor "PyroFist", 1
  DamageFactor "IncarnateSkull", 1
  DamageFactor "DiabloistHand", 1
  DamageFactor "BalrogFist", 1

  States
  {
  Spawn:
    ALN1 A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    ALN1 A 10 A_Look
    ALN1 B 10 A_SentinelBob
    goto Spawn+1
  See:
    ALN1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
	ALN1 A 0 Thing_ChangeTID(0,1222)
    ALN1 AB 4 Bright A_Chase
    ALN1 C 4 Bright A_SentinelBob
    ALN1 DEF 4 Bright A_Chase
    ALN1 G 4 Bright A_SentinelBob
    ALN1 HIJ 4 Bright A_Chase
    ALN1 K 4 Bright A_SentinelBob
    Loop
  Melee:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    ALN1 J 4 Bright A_FaceTarget
    ALN1 I 4 Bright A_CustomMeleeAttack((random[SpectreMelee](0, 255)&9)*5)
    ALN1 H 4 Bright
    Goto See
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    ALN1 J 4 Bright A_FaceTarget
    ALN1 I 4 Bright A_SpotLightning
    ALN1 H 4 Bright
    Goto See+12
  Pain:
    ALN1 J 2 A_Pain
    Goto See+8
  Pain.GravityHP: Goto See
  Pain.GravityMP: Goto See
  Pain.GravityHPMP: Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    AL1P A 0 A_GiveToTarget ("Coin", random(1350,1800))
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    AL1P A 6 Bright A_SpectreChunkSmall
    AL1P B 6 Bright A_Scream
    AL1P C 6 Bright A_SpectreChunkSmall
    AL1P DE 6 Bright
    AL1P F 6 Bright A_SpectreChunkSmall
    AL1P G 6 Bright
    AL1P H 6 Bright A_SpectreChunkSmall
    AL1P IJK 6 Bright
    AL1P LM 5 Bright
    AL1P N 5 Bright A_SpectreChunkLarge
    AL1P OPQ 5 Bright
    AL1P R 5 Bright // A_AlienSpectreDeath
	{
	 Floor_LowerToLowest(999, 8);
	 A_PlaySound("svox/voc95",2,1.0,0,ATTN_NONE);
	 SendToCommunicator(95,0,0,0);
	}
    Stop
  XDeath:
    goto Death
  }
}

ACTOR AlienSpectre2New : AlienSpectre2 replaces AlienSpectre2
{
 var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
 var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
 var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
 DamageFactor "PoisonBolt", 0.01
 
  ConversationID 70
  Health 1200
  Mass 500000000
  PainChance 50
  Painchance "Fist", 75 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 125 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 125 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 1
  Painchance "GravityMP", 1
  Painchance "GravityHPMP", 1
  Radius 24
  //DropItem "Sigil2"
  +NOFEAR
  -SPECTRAL

  DamageFactor "SpectralLow", 0.75 // Sigil level 1 can mostly hurt them
  DamageFactor "Normal", 0.0001 // 0.01% damage from most attacks. :P
  // After this, set all vulnerablities to what you want them to have to what you want. :P
  DamageFactor "Sceptre", 1
  DamageFactor "Magic", 1
  DamageFactor "Fire", 0.375
  DamageFactor "Ice", 0.375
  DamageFactor "Thunder", 0.375
  DamageFactor "Holy", 1
  DamageFactor "Sigil", 1
  DamageFactor "ImpClaw", 1
  DamageFactor "DarkImpClaw", 1
  DamageFactor "CacodemonEye", 1
  DamageFactor "CacolanternEye", 1
  DamageFactor "AbaddonEye", 1
  DamageFactor "KnightFist", 1
  DamageFactor "BaronFist", 1
  DamageFactor "BelphegorFist", 1
  DamageFactor "BrusierFist", 1
  DamageFactor "ArchonFist", 1
  DamageFactor "PyroFist", 1
  DamageFactor "IncarnateSkull", 1
  DamageFactor "DiabloistHand", 1
  DamageFactor "BalrogFist", 1

  States
  {
  Spawn:
    ALN1 A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    ALN1 A 10 A_Look
    ALN1 B 10 A_SentinelBob
    goto Spawn+1
  See:
    ALN1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
	ALN1 A 0 Thing_ChangeTID(0,1222)
    ALN1 AB 4 Bright A_Chase
    ALN1 C 4 Bright A_SentinelBob
    ALN1 DEF 4 Bright A_Chase
    ALN1 G 4 Bright A_SentinelBob
    ALN1 HIJ 4 Bright A_Chase
    ALN1 K 4 Bright A_SentinelBob
    Loop
  Melee:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    ALN1 J 4 Bright A_FaceTarget
    ALN1 I 4 Bright A_CustomMeleeAttack((random[SpectreMelee](0, 255)&9)*5)
    ALN1 H 4 Bright
    Goto See
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    ALN1 F 4 A_FaceTarget
    ALN1 I 4 A_CustomMissile("SpectralLightningH3", 32, 0)
    ALN1 E 4
    Goto See+12
  Pain:
    ALN1 J 2 A_Pain
    Goto See+8
  Pain.GravityHP: Goto See
  Pain.GravityMP: Goto See
  Pain.GravityHPMP: Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    AL1P A 0 A_GiveToTarget ("Coin", random(1350,1800))
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    AL1P A 6 Bright A_SpectreChunkSmall
    AL1P B 6 Bright A_Scream
    AL1P C 6 Bright A_SpectreChunkSmall
    AL1P DE 6 Bright
    AL1P F 6 Bright A_SpectreChunkSmall
    AL1P G 6 Bright
    AL1P H 6 Bright A_SpectreChunkSmall
    AL1P IJK 6 Bright
    AL1P LM 5 Bright
    AL1P N 5 Bright A_SpectreChunkLarge
    AL1P OPQ 5 Bright
    AL1P R 5 Bright // A_AlienSpectreDeath
	{
	 A_PrintBold("YOU HAVE SLAIN THE BISHOP!");
	 A_PlaySound("svox/voc74",2,1.0,0,ATTN_NONE);
	 SendToCommunicator(74,0,0,0);
 	 A_GiveInventory("Sigil2",1,AAPTR_PLAYER1); // Bishop dead
 	 A_GiveInventory("QuestItem21",1,AAPTR_PLAYER1); // Bishop dead
	}
    Stop
  XDeath:
    goto Death
  }
}

ACTOR AlienSpectre3New : AlienSpectre3 replaces AlienSpectre3
{
 var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
 var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
 var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
 DamageFactor "PoisonBolt", 0.01
 
  ConversationID 71
  Health 1500
  Mass 500000000
  PainChance 50
  Painchance "Fist", 75 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 125 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 125 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 1
  Painchance "GravityMP", 1
  Painchance "GravityHPMP", 1
  Radius 24
  +SPAWNCEILING
  //DropItem "Sigil3"
  +NOFEAR
  -SPECTRAL

  DamageFactor "SpectralLow", 0.5 // Sigil level 1 can somewhat hurt them
  DamageFactor "Normal", 0.0001 // 0.01% damage from most attacks. :P
  // After this, set all vulnerablities to what you want them to have to what you want. :P
  DamageFactor "Sceptre", 1
  DamageFactor "Magic", 1
  DamageFactor "Fire", 0.375
  DamageFactor "Ice", 0.375
  DamageFactor "Thunder", 0.375
  DamageFactor "Holy", 1
  DamageFactor "Sigil", 1
  DamageFactor "ImpClaw", 1
  DamageFactor "DarkImpClaw", 1
  DamageFactor "CacodemonEye", 1
  DamageFactor "CacolanternEye", 1
  DamageFactor "AbaddonEye", 1
  DamageFactor "KnightFist", 1
  DamageFactor "BaronFist", 1
  DamageFactor "BelphegorFist", 1
  DamageFactor "BrusierFist", 1
  DamageFactor "ArchonFist", 1
  DamageFactor "PyroFist", 1
  DamageFactor "IncarnateSkull", 1
  DamageFactor "DiabloistHand", 1
  DamageFactor "BalrogFist", 1

  States
  {
  Spawn:
    ALN1 A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    ALN1 ABCDEFGHIJK 5
    goto Spawn+1
  See:
    ALN1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
	ALN1 A 0 Thing_ChangeTID(0,1222)
    ALN1 AB 5 A_Chase
    ALN1 C 5 A_SentinelBob
    ALN1 DEF 5 A_Chase
    ALN1 G 5 A_SentinelBob
    ALN1 HIJ 5 A_Chase
    ALN1 K 5 A_SentinelBob
    Loop
  Melee:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    ALN1 J 4 A_FaceTarget
    ALN1 I 4 A_CustomMeleeAttack((random[SpectreMelee](0, 255)&9)*5)
    ALN1 C 4
    Goto See+4
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    ALN1 F 4 A_FaceTarget
    ALN1 I 4 A_Spectre3Attack
    ALN1 E 4
    Goto See+12
  Pain:
    ALN1 J 2 A_Pain
    Goto See+8
  Pain.GravityHP: Goto See
  Pain.GravityMP: Goto See
  Pain.GravityHPMP: Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    AL1P A 0 A_GiveToTarget ("Coin", random(1350,1800))
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    AL1P A 6 Bright A_SpectreChunkSmall
    AL1P B 6 Bright A_Scream
    AL1P C 6 Bright A_SpectreChunkSmall
    AL1P DE 6 Bright
    AL1P F 6 Bright A_SpectreChunkSmall
    AL1P G 6 Bright
    AL1P H 6 Bright A_SpectreChunkSmall
    AL1P IJK 6 Bright
    AL1P LM 5 Bright
    AL1P N 5 Bright A_SpectreChunkLarge
    AL1P OPQ 5 Bright
    AL1P R 5 Bright // A_AlienSpectreDeath
	{
	 A_PrintBold("THE ORACLE HAS FALLEN!");
	 Thing_Destroy(900, 0); // Kill all Oracles.
	 Door_Open(222, 8);
	 A_GiveInventory("QuestItem23",1,AAPTR_PLAYER1); // Oracle dead
	 
     // If bishop is dead, mark Oracle as dead.
	 if(CountInv("QuestItem21",AAPTR_PLAYER1) > 0)
	 {
	  A_GiveInventory("QuestItem22",1,AAPTR_PLAYER1); // Oracle dead
	 }

	 if(CountInv("QuestItem24",AAPTR_PLAYER1) > 0) // If Macil is already dead...
	 {
 	  A_PlaySound("svox/voc85",2,1.0,0,ATTN_NONE);
  	  A_GiveInventory("Sigil5",1,AAPTR_PLAYER1);
  	  A_GiveInventory("SigilComplete",1,AAPTR_PLAYER1);
	  SendToCommunicator(85,0,0,0); // You wield the power of the complete sigil.
	 }
	 else // If Macil still alive...
	 {
 	  A_PlaySound("svox/voc87",2,1.0,0,ATTN_NONE);
 	  A_GiveInventory("Sigil3",1,AAPTR_PLAYER1);
	  SendToCommunicator(87,0,0,0); // Macil is calling us back...
	 }
	}
    Stop
  XDeath:
    goto Death
  }
}

ACTOR AlienSpectre4New : AlienSpectre4 replaces AlienSpectre4
{
 var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
 var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
 var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
 DamageFactor "PoisonBolt", 0.01
 
  ConversationID 72
  Health 1700
  Mass 500000000
  PainChance 50
  Painchance "Fist", 75 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 125 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 125 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 1
  Painchance "GravityMP", 1
  Painchance "GravityHPMP", 1
  Radius 24
  DropItem "Sigil4"
  +NOFEAR
  -SPECTRAL

  DamageFactor "SpectralLow", 0.25 // Sigil level 1 can barely hurt them
  DamageFactor "Normal", 0.0001 // 0.01% damage from most attacks. :P
  // After this, set all vulnerablities to what you want them to have to what you want. :P
  DamageFactor "Sceptre", 1
  DamageFactor "Magic", 1
  DamageFactor "Fire", 0.375
  DamageFactor "Ice", 0.375
  DamageFactor "Thunder", 0.375
  DamageFactor "Holy", 1
  DamageFactor "Sigil", 1
  DamageFactor "ImpClaw", 1
  DamageFactor "DarkImpClaw", 1
  DamageFactor "CacodemonEye", 1
  DamageFactor "CacolanternEye", 1
  DamageFactor "AbaddonEye", 1
  DamageFactor "KnightFist", 1
  DamageFactor "BaronFist", 1
  DamageFactor "BelphegorFist", 1
  DamageFactor "BrusierFist", 1
  DamageFactor "ArchonFist", 1
  DamageFactor "PyroFist", 1
  DamageFactor "IncarnateSkull", 1
  DamageFactor "DiabloistHand", 1
  DamageFactor "BalrogFist", 1

  States
  {
  Spawn:
    ALN1 A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    ALN1 A 10 A_Look
    ALN1 B 10 A_SentinelBob
    goto Spawn+1
  See:
    ALN1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
	ALN1 A 0 Thing_ChangeTID(0,1222)
    ALN1 AB 4 Bright A_Chase
    ALN1 C 4 Bright A_SentinelBob
    ALN1 DEF 4 Bright A_Chase
    ALN1 G 4 Bright A_SentinelBob
    ALN1 HIJ 4 Bright A_Chase
    ALN1 K 4 Bright A_SentinelBob
    Loop
  Melee:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    ALN1 J 4 Bright A_FaceTarget
    ALN1 I 4 Bright A_CustomMeleeAttack((random[SpectreMelee](0, 255)&9)*5)
    ALN1 H 4 Bright
    Goto See
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    ALN1 F 4 A_FaceTarget
    ALN1 I 4 A_CustomMissile("SpectralLightningBigV2", 32, 0)
    ALN1 E 4
    Goto See+12
  Pain:
    ALN1 J 2 A_Pain
    Goto See+8
  Pain.GravityHP: Goto See
  Pain.GravityMP: Goto See
  Pain.GravityHPMP: Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    AL1P A 0 A_GiveToTarget ("Coin", random(1350,1800))
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    AL1P A 6 Bright A_SpectreChunkSmall
    AL1P B 6 Bright A_Scream
    AL1P C 6 Bright A_SpectreChunkSmall
    AL1P DE 6 Bright
    AL1P F 6 Bright A_SpectreChunkSmall
    AL1P G 6 Bright
    AL1P H 6 Bright A_SpectreChunkSmall
    AL1P IJK 6 Bright
    AL1P LM 5 Bright
    AL1P N 5 Bright A_SpectreChunkLarge
    AL1P OPQ 5 Bright
    AL1P R 5 Bright // A_AlienSpectreDeath
	{
	 A_PrintBold("MACIL HAS BEEN PUT OUT OF HIS MISERY!");
	 A_GiveInventory("QuestItem24",1,AAPTR_PLAYER1); // Oracle dead
	 
	 if(CountInv("QuestItem23",AAPTR_PLAYER1) > 0) // If Oracle is already dead...
	 {
 	  A_GiveInventory("Sigil4",1,AAPTR_PLAYER1);
	 }
	 else
	 {
 	  A_GiveInventory("Sigil3",1,AAPTR_PLAYER1);
	 }

	 if(CountInv("QuestItem25",AAPTR_PLAYER1) > 0) // If Converter was destroyed
	 {
 	  A_PlaySound("svox/voc106",2,1.0,0,ATTN_NONE);
	  SendToCommunicator(106,0,0,0); // Back to the factory for another Sigil!
	 }
	 else // If Conversion Chapel mission not complete...
	 {
 	  A_PlaySound("svox/voc79",2,1.0,0,ATTN_NONE);
	  SendToCommunicator(79,0,0,0); // Richter has taken over. Macil is a snake.
	 }
	}
    Stop
  XDeath:
    goto Death
  }
}

ACTOR AlienSpectre5New : AlienSpectre5 replaces AlienSpectre5
{
 var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
 var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
 var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
 DamageFactor "PoisonBolt", 0.01
 
  ConversationID 73
  Health 2000
  Mass 500000000
  PainChance 50
  Painchance "Fist", 75 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 125 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 125 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 1
  Painchance "GravityMP", 1
  Painchance "GravityHPMP", 1
  Radius 24
  DropItem "Sigil5"
  -SPECTRAL

  DamageFactor "SpectralLow", 0 // Sigil level 1 cannot hurt them at all
  DamageFactor "Normal", 0.0001 // 0.01% damage from most attacks. :P
  // After this, set all vulnerablities to what you want them to have to what you want. :P
  DamageFactor "Sceptre", 1
  DamageFactor "Magic", 1
  DamageFactor "Fire", 0.375
  DamageFactor "Ice", 0.375
  DamageFactor "Thunder", 0.375
  DamageFactor "Holy", 1
  DamageFactor "Sigil", 1
  DamageFactor "ImpClaw", 1
  DamageFactor "DarkImpClaw", 1
  DamageFactor "CacodemonEye", 1
  DamageFactor "CacolanternEye", 1
  DamageFactor "AbaddonEye", 1
  DamageFactor "KnightFist", 1
  DamageFactor "BaronFist", 1
  DamageFactor "BelphegorFist", 1
  DamageFactor "BrusierFist", 1
  DamageFactor "ArchonFist", 1
  DamageFactor "PyroFist", 1
  DamageFactor "IncarnateSkull", 1
  DamageFactor "DiabloistHand", 1
  DamageFactor "BalrogFist", 1

  States
  {
  Spawn:
    ALN1 A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    ALN1 A 10 A_Look
    ALN1 B 10 A_SentinelBob
    goto Spawn+1
  See:
    ALN1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
	ALN1 A 0 Thing_ChangeTID(0,1222)
    ALN1 AB 4 Bright A_Chase
    ALN1 C 4 Bright A_SentinelBob
    ALN1 DEF 4 Bright A_Chase
    ALN1 G 4 Bright A_SentinelBob
    ALN1 HIJ 4 Bright A_Chase
    ALN1 K 4 Bright A_SentinelBob
    Loop
  Melee:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    ALN1 J 4 Bright A_FaceTarget
    ALN1 I 4 Bright A_CustomMeleeAttack((random[SpectreMelee](0, 255)&9)*5)
    ALN1 H 4 Bright
    Goto See
  Missile:
    ALN1 F 4 A_FaceTarget
    ALN1 I 4 A_CustomMissile("SpectralLightningBigBall2", 32, 0)
    ALN1 E 4
    Goto See+12
  Pain:
    ALN1 J 2 A_Pain
    Goto See+8
  Pain.GravityHP: Goto See
  Pain.GravityMP: Goto See
  Pain.GravityHPMP: Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    AL1P A 0 A_GiveToTarget ("Coin", random(1350,1800))
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    AL1P A 6 Bright A_SpectreChunkSmall
    AL1P B 6 Bright A_Scream
    AL1P C 6 Bright A_SpectreChunkSmall
    AL1P DE 6 Bright
    AL1P F 6 Bright A_SpectreChunkSmall
    AL1P G 6 Bright
    AL1P H 6 Bright A_SpectreChunkSmall
    AL1P IJK 6 Bright
    AL1P LM 5 Bright
    AL1P N 5 Bright A_SpectreChunkLarge
    AL1P OPQ 5 Bright
    AL1P R 5 Bright // A_AlienSpectreDeath
	{
	 A_PrintBold("THE LOREMASTER NOW FOREVER RESTS!");
	 Floor_LowerToLowest(666, 8);
	 A_GiveInventory("QuestItem26",1,AAPTR_PLAYER1); // Loremaster dead
     ACS_NamedExecuteAlways("StrifeComboUpgrade",0,1);
	 
	 if(CountInv("QuestItem24",AAPTR_PLAYER1) > 0) // If Oracle is already dead...
	 {
 	  A_GiveInventory("Sigil5",1,AAPTR_PLAYER1);
  	  A_GiveInventory("SigilComplete",1,AAPTR_PLAYER1);
 	  A_PlaySound("svox/voc85",2,1.0,0,ATTN_NONE);
	  SendToCommunicator(85,0,0,0); // Back to the factory for another Sigil!
	 }
	 else
	 {
 	  A_GiveInventory("Sigil4",1,AAPTR_PLAYER1);
 	  A_PlaySound("svox/voc83",2,1.0,0,ATTN_NONE);
	  SendToCommunicator(83,0,0,0); // Another Sigil piece. Woohoo!
	 }
	}
    Stop
  XDeath:
    goto Death
  }
}

// ENTITY
ACTOR EntityBossNew : EntityBoss replaces EntityBoss
{
 var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
 var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
 var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
 DamageFactor "PoisonBolt", 0.01
 
  ConversationID 74
  Health 2500
  PainChance 255
  Painchance "Fist", 255 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 255 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 255 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 1
  Painchance "GravityMP", 1
  Painchance "GravityHPMP", 1
  Speed 13
  Radius 130
  Height 200
  FloatSpeed 5
  Mass 500000000
  Monster
  +SPECIAL
  +NOGRAVITY
  +FLOAT
  +SHADOW
  +NOTDMATCH
  +DONTMORPH
  +NOTARGET
  +NOBLOCKMONST
  +INCOMBAT
  +LOOKALLAROUND
  +NOICEDEATH
  +NOFEAR
  -SPECTRAL

  DamageFactor "Normal", 0.0001 // 0.01% damage from most attacks. :P
  // After this, set all vulnerablities to what you want them to have to what you want. :P
  DamageFactor "Sceptre", 1
  DamageFactor "Magic", 1
  DamageFactor "Fire", 0.25
  DamageFactor "Ice", 0.25
  DamageFactor "Thunder", 0.25
  DamageFactor "Holy", 1
  DamageFactor "Sigil", 1
  DamageFactor "ImpClaw", 1
  DamageFactor "DarkImpClaw", 1
  DamageFactor "CacodemonEye", 1
  DamageFactor "CacolanternEye", 1
  DamageFactor "AbaddonEye", 1
  DamageFactor "KnightFist", 1
  DamageFactor "BaronFist", 1
  DamageFactor "BelphegorFist", 1
  DamageFactor "BrusierFist", 1
  DamageFactor "ArchonFist", 1
  DamageFactor "PyroFist", 1
  DamageFactor "IncarnateSkull", 1
  DamageFactor "DiabloistHand", 1
  DamageFactor "BalrogFist", 1

  MinMissileChance 150
  RenderStyle Translucent
  Alpha 0.5
  SeeSound "entity/sight"
  AttackSound "entity/melee"
  PainSound "entity/pain"
  DeathSound "entity/death"
  ActiveSound "entity/active"
  Obituary "$OB_ENTITY" // "%o felt the wrath of The One God."

  States
  {
  Spawn:
    ALN1 A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    MNAM A 100
    MNAM B 60 Bright
    MNAM CDEFGHIJKL 4 Bright
    MNAL A 4 Bright A_Look
    MNAL B 4 Bright A_SentinelBob
    Goto Spawn+13
  See:
    ALN1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
	ALN1 A 0 Thing_ChangeTID(0,1222)
    MNAL AB 4 Bright A_Chase
    MNAL C 4 Bright A_SentinelBob
    MNAL DEF 4 Bright A_Chase
    MNAL G 4 Bright A_SentinelBob
    MNAL HIJ 4 Bright A_Chase
    MNAL K 4 Bright A_SentinelBob
    Loop
  Melee:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    MNAL J 4 Bright A_FaceTarget
    MNAL I 4 Bright A_CustomMeleeAttack((random[SpectreMelee](0, 255)&9)*5)
    MNAL C 4 Bright
    Goto See+4
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    MNAL F 4 Bright A_FaceTarget
    MNAL I 4 Bright A_EntityAttack
    MNAL E 4 Bright
    Goto See+12
  Pain:
    MNAL J 2 Bright A_Pain
    Goto See+8
  Pain.GravityHP: Goto See
  Pain.GravityMP: Goto See
  Pain.GravityHPMP: Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    MNAL L 0 A_GiveToTarget ("Coin", random(2250,3000))
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    MNAL L 7 Bright A_SpectreChunkSmall
    MNAL M 7 Bright A_Scream
    MNAL NO 7 Bright A_SpectreChunkSmall
    MNAL P 7 Bright A_SpectreChunkLarge
    MNAL Q 64 Bright A_SpectreChunkSmall
    MNAL Q 6 Bright A_EntityDeath
    Stop
  XDeath:
    goto Death
  }
}

ACTOR EntitySecondNew : EntitySecond replaces EntitySecond
{
 var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
 var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
 var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
 DamageFactor "PoisonBolt", 0.01
 
  ConversationID 75
  Health 990
  PainChance 255
  Painchance "Fist", 255 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 255 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 255 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 1
  Painchance "GravityMP", 1
  Painchance "GravityHPMP", 1
  Speed 14
  Radius 130
  Height 200
  FloatSpeed 5
  Mass 500000000
  Monster
  +SPECIAL
  +NOGRAVITY
  +FLOAT
  +SHADOW
  +NOTDMATCH
  +DONTMORPH
  +NOBLOCKMONST
  +INCOMBAT
  +LOOKALLAROUND
  +NOICEDEATH
  +NOFEAR
  -SPECTRAL

  DamageFactor "Normal", 0.0001 // 0.01% damage from most attacks. :P
  // After this, set all vulnerablities to what you want them to have to what you want. :P
  DamageFactor "Sceptre", 1
  DamageFactor "Magic", 1
  DamageFactor "Fire", 0.25
  DamageFactor "Ice", 0.25
  DamageFactor "Thunder", 0.25
  DamageFactor "Holy", 1
  DamageFactor "Sigil", 1
  DamageFactor "ImpClaw", 1
  DamageFactor "DarkImpClaw", 1
  DamageFactor "CacodemonEye", 1
  DamageFactor "CacolanternEye", 1
  DamageFactor "AbaddonEye", 1
  DamageFactor "KnightFist", 1
  DamageFactor "BaronFist", 1
  DamageFactor "BelphegorFist", 1
  DamageFactor "BrusierFist", 1
  DamageFactor "ArchonFist", 1
  DamageFactor "PyroFist", 1
  DamageFactor "IncarnateSkull", 1
  DamageFactor "DiabloistHand", 1
  DamageFactor "BalrogFist", 1

  MinMissileChance 150
  RenderStyle Translucent
  Alpha 0.25
  SeeSound "alienspectre/sight"
  AttackSound "alienspectre/blade"
  PainSound "alienspectre/pain"
  DeathSound "alienspectre/death"
  ActiveSound "alienspectre/active"
  Obituary "$OB_ENTITY" // "%o felt the wrath of The One God."

  States
  {
  Spawn:
    MNAL R 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    MNAL R 10 Bright A_Look
    goto Spawn+1
  See:
    MNAL R 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
	MNAL R 0 Thing_ChangeTID(0,1222)
    MNAL R 5 Bright A_SentinelBob
    MNAL ST 5 Bright A_Chase
    MNAL U 5 Bright A_SentinelBob
    MNAL V 5 Bright A_Chase
    MNAL W 5 Bright A_SentinelBob
    Loop
  Melee:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    MNAL S 4 Bright A_FaceTarget
    MNAL R 4 Bright A_CustomMeleeAttack((random[SpectreMelee](0, 255)&9)*5)
    MNAL T 4 Bright A_SentinelBob
    Goto See+3
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    MNAL W 4 Bright A_FaceTarget
    MNAL U 4 Bright A_CustomMissile("SpectralLightningH3", 32, 0)
    MNAL V 4 Bright A_SentinelBob
    Goto See+6
  Pain:
    MNAL R 2 Bright A_Pain
    Goto See
  Pain.GravityHP: Goto See
  Pain.GravityMP: Goto See
  Pain.GravityHPMP: Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    MDTH O 0 A_GiveToTarget ("Coin", random(1350,1800))
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
	TNT1 A 0 A_JumpIfInventory("BestEndingFlag",1,"Asension",AAPTR_PLAYER1)
  TrueDeath:
    MDTH A 3 Bright A_Scream
    MDTH B 3 Bright A_TossGib
    MDTH C 3 Bright A_NoBlocking
    MDTH DEFGHIJKLMN 3 Bright A_TossGib
    MDTH O 3 Bright A_SubEntityDeath
    Stop
  Asension:
	MNAL P 0 A_Scream
	MNAL P 0 A_NoBlocking
	MNAL PONML 7
    MNAL L 0 Bright A_SpawnItemEx("EntityAscended", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
    Stop

  XDeath:
    goto Death
  }
}

ACTOR EntityAscended : EntityBoss
{
 var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
 var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
 var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
 DamageFactor "PoisonBolt", 0.01
 
  Health 3250
  PainChance 64
  Painchance "Fist", 96 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "Kick", 160 // Kick attacks have a +150% chance of stunning an enemy
  Painchance "Gauntlets", 96 // Fist attacks have a +50% chance of stunning an enemy
  Painchance "GravityHP", 0
  Painchance "GravityMP", 0
  Painchance "GravityHPMP", 0
  Speed 17
  Radius 130
  Height 200
  FloatSpeed 5
  Mass 500000000
  Monster
  +SPECIAL
  +NOGRAVITY
  +FLOAT
  +SHADOW
  +NOTDMATCH
  +DONTMORPH
  +NOTARGET
  +NOBLOCKMONST
  +INCOMBAT
  +LOOKALLAROUND
  +NOICEDEATH
  +MISSILEMORE
  +NOFEAR
  -SPECTRAL

  DamageFactor "Normal", 0.0001 // 0.01% damage from most attacks. :P
  // After this, set all vulnerablities to what you want them to have to what you want. :P
  DamageFactor "Sceptre", 0.75
  DamageFactor "Magic", 0.75
  DamageFactor "Fire", 0.1875
  DamageFactor "Ice", 0.1875
  DamageFactor "Thunder", 0.1875
  DamageFactor "Holy", 0.75
  DamageFactor "Sigil", 0.75
  DamageFactor "ImpClaw", 0.75
  DamageFactor "DarkImpClaw", 0.75
  DamageFactor "CacodemonEye", 0.75
  DamageFactor "CacolanternEye", 0.75
  DamageFactor "AbaddonEye", 0.75
  DamageFactor "KnightFist", 0.75
  DamageFactor "BaronFist", 0.75
  DamageFactor "BelphegorFist", 0.75
  DamageFactor "BrusierFist", 0.75
  DamageFactor "ArchonFist", 0.75
  DamageFactor "PyroFist", 0.75
  DamageFactor "IncarnateSkull", 0.75
  DamageFactor "DiabloistHand", 0.75
  DamageFactor "BalrogFist", 0.75

  MinMissileChance 150
  RenderStyle Translucent
  Alpha 0.5
  SeeSound "entity/sight"
  AttackSound "entity/melee"
  PainSound "entity/pain"
  DeathSound "entity/death"
  ActiveSound "entity/active"
  Obituary "$OB_ENTITY" // "%o felt the truest wrath of The One God Ascended."

  States
  {
  Spawn:
    MNAL A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    MNAL A 4 Bright A_Look
    MNAL B 4 Bright A_SentinelBob
    goto Spawn+1
  See:
    MNAL A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
	MNAL A 0 Thing_ChangeTID(0,1222)
    MNAL AB 4 Bright A_Chase
    MNAL C 4 Bright A_SentinelBob
    MNAL DEF 4 Bright A_Chase
    MNAL G 4 Bright A_SentinelBob
    MNAL HIJ 4 Bright A_Chase
    MNAL K 4 Bright A_SentinelBob
    Loop
  Melee:
    MNAL A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    MNAL J 4 Bright A_FaceTarget
    MNAL I 4 Bright A_CustomMeleeAttack((random[SpectreMelee](0, 255)&9)*5)
    MNAL C 4 Bright
    Goto See+4
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
    MNAL F 4 Bright A_FaceTarget
    MNAL I 4 Bright A_EntityAttack
    MNAL E 4 Bright
    Goto See+12
  Pain:
    MNAL J 2 Bright A_Pain
    Goto See+8
  Pain.GravityHP: Goto See
  Pain.GravityMP: Goto See
  Pain.GravityHPMP: Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto Pain
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto Pain
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    MNAL L 0 A_GiveToTarget ("Coin", random(3000,4000))
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
    MNAL L 7 Bright A_SpectreChunkSmall
    MNAL M 7 Bright A_Scream
    MNAL NO 7 Bright A_SpectreChunkSmall
    MNAL P 7 Bright A_SpectreChunkLarge
    MNAL Q 6 Bright A_SpectreChunkSmall
    MDTH A 3 Bright A_Scream
    MDTH B 3 Bright A_TossGib
    MDTH C 3 Bright A_NoBlocking
    MDTH DEFGHIJKLMN 3 Bright A_TossGib
    MDTH O 3 ACS_NamedExecuteAlways("EntityAscendantDies")
    Stop
  XDeath:
    goto Death
  }
}

// The base actor for the NPC spectres that appear in Flora's best ending path only in MAP29.
actor AlienSpectreModel
{
  Radius 64
  Height 64
  Health 1000000
  PainChance 0
  Speed 12
  FloatSpeed 5
  Mass 500000000
  RenderStyle Translucent
  Alpha 0.333
  Monster
  -SOLID
  +NODAMAGE
  +NOBLOOD
  +NEVERTARGET
  +NOGRAVITY
  +FLOAT
  +SHADOW
  +NOTDMATCH
  +DONTMORPH
  +NOBLOCKMONST
  +LOOKALLAROUND
  +NOICEDEATH
  +NOFEAR
  -SPECTRAL

  States
  {
  Spawn:
    TNT1 A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
    TNT1 A 0 A_JumpIfInventory("FloraInPlay",1,"Check1",AAPTR_PLAYER1)
    TNT1 A 0 A_FadeOut(1.0)
	stop
  Check1:
    TNT1 A 0 A_JumpIfInventory("BestEndingFlag",1,"StickAround",AAPTR_PLAYER1)
    TNT1 A 0 A_FadeOut(1.0)
	stop
  StickAround:
    ALN1 ABCDEFGHIJK 5
	{
	 A_FadeIn(0.03,0);
	 A_Wander;
	}
    ALN1 ABCDEFGHIJK 5
    {
	 A_FadeOut(0.03,0);
	 A_Wander;
	}
	loop
  }
}

actor AlienSpectre1Model : AlienSpectreModel 27401
{
 var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
 var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
 var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
  //$NotAngled
  //$Color 12
  //$Category "DV-DS Strife Patch/Models"
  Tag "Programmer's Spectre [NPC]"
  ConversationID 666
  Health 1000
}

actor AlienSpectre2Model : AlienSpectreModel 27402
{
 var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
 var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
 var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
  //$NotAngled
  //$Color 12
  //$Category "DV-DS Strife Patch/Models"
  Tag "Bishop's Spectre [NPC]"
  ConversationID 667
  Health 1200
}

actor AlienSpectre3Model : AlienSpectreModel 27403
{
 var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
 var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
 var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
  //$NotAngled
  //$Color 12
  //$Category "DV-DS Strife Patch/Models"
  Tag "The Oracle's Spectre [NPC]"
  ConversationID 668
  Health 1500
}

actor AlienSpectre4Model : AlienSpectreModel 27404
{
 var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
 var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
 var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
  //$NotAngled
  //$Color 12
  //$Category "DV-DS Strife Patch/Models"
  Tag "Macil's Spectre [NPC]"
  ConversationID 669
  Health 1700
}

actor AlienSpectre5Model : AlienSpectreModel 27405
{
 var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
 var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
 var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
  //$NotAngled
  //$Color 12
  //$Category "DV-DS Strife Patch/Models"
  Tag "The Loremaster's Spectre [NPC]"
  ConversationID 670
  Health 2000
}

// DARK INQUISITOR
ACTOR DarkInquisitor : Inquisitor 27406
{
  var int user_theta; var int user_dormant; var int user_isstealth; var int user_basespeed; var int user_baseattack; var int user_basedefense; var int user_basemass; var int user_monsterlevel; var int user_legendaryevolved;
  var int user_MaxHP; var int user_HPLowRange; var int user_HPCritRange; var int user_HPBuffRange; var int user_HPXDeathRange;
  var int user_checkmapskill; var int user_ressurrectstr; // For checking if a monster has been given Skill/Map inventory items yet.
  DamageFactor "PoisonBolt", 0.05

  SeeSound "darkinquisitor/sight"
  ActiveSound "darkinquisitor/active"
  DeathSound "darkinquisitor/death"
  PainSound "darkinquisitor/pain"
  Health 2400 //If using in Strife, reduce to 1200.
  Obituary "%o was executed by a Dark Inquisitor."
  PainChance 1
  Speed 20
  FloatSpeed 15
  +BOSS
  +BOSSDEATH
  +FLOORCLIP
  +NORADIUSDMG
  +DONTMORPH
  +NOICEDEATH
  +MISSILEMORE
  +MISSILEEVENMORE
  +DROPOFF
  Damagefactor "Disintegrate", 0.25
  DamageFactor "Fire", 0.15
  Damagefactor "Ice", 0
  DamageFactor "Thunder", 2.25
  States
  {
  Pain.Charm: TNT1 A 0 { A_PlaySound("Munchies/Charmed"); A_ChangeFlag("FRIENDLY",1); Thing_ChangeTID(0,1000); } Goto See  Pain.Heal1: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,0); } Goto See  Pain.Heal2: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,1); } Goto See  Pain.Heal3: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,2); } Goto See  Pain.Heal4: TNT1 A 0 { ACS_NamedExecuteAlways("Healing_Actor",0,3); } Goto See Goto See
  Spawn:
    ROB4 A 0 NoDelay ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,0)
	ROB4 A 0 A_ChangeFlag("Float", 0)
    ROB4 A 0 A_ChangeFlag("NoGravity", 0)
    ROB4 A 0 A_TakeInventory("FlightToken", 0)
	ROB4 A 10 A_Look
	goto Spawn+1
  See:
    ROB4 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,0)
	ROB4 B 3 A_Chase
	ROB4 C 0 A_playsoundEX("darkinquisitor/step","SoundSlot6")
	ROB4 C 3 A_Chase
	TNT1 A 0 A_JumpIf(z - floorz > 45, "Fly")//Lets it fly if it falls off a high enough ledge.
	ROB4 A 0 A_Jump(5,"TakeOff")
	ROB4 D 3 A_Chase
	TNT1 A 0 A_JumpIf(z - floorz > 45, "Fly")
	ROB4 A 0 A_Jump(5,"TakeOff")
	ROB4 E 3 A_Chase
	TNT1 A 0 A_JumpIf(z - floorz > 45, "Fly")
	ROB4 A 0 A_Jump(5,"TakeOff")
	ROB4 D 0 A_playsoundEX("darkinquisitor/step","SoundSlot6")
	ROB4 D 3 A_chase
	TNT1 A 0 A_JumpIf(z - floorz > 45, "Fly")
	ROB4 A 0 A_Jump(5,"TakeOff")
	ROB4 C 3 A_Chase
	TNT1 A 0 A_JumpIf(z - floorz > 45, "Fly")
	ROB4 A 0 A_Jump(5,"TakeOff")
	Goto See
  TakeOff: //Thanks for the code, Ghastly! ^^
    ROB4 A 4
    ROB4 A 0 A_ChangeFlag("NoPain", 1)
    ROB4 I 4 ThrustThingZ(0, 42, 0, 1)
    ROB4 A 0 A_ChangeFlag(Float, 1)
    ROB4 A 0 A_ChangeFlag(NoGravity, 1)
    ROB4 H 4 
    ROB4 A 0 A_Stop
    ROB4 A 0 A_PlaySound("darkinquisitor/flight")
    ROB4 A 0 A_GiveInventory("FlightToken", 1)
    ROB4 A 0 A_ChangeFlag("NoPain", 0)
    Goto Fly
  Land:
    ROB4 A 0 A_ChangeFlag("NoPain", 1)
    ROB4 A 0 A_ChangeFlag("Float", 0)
    ROB4 A 0 A_ChangeFlag("NoGravity", 0)
    ROB4 A 0 A_TakeInventory("FlightToken", 0)
    ROB4 A 3 A_CheckFloor(1)
    Goto Land+4
	ROB4 A 0 A_ChangeFlag("NoPain", 0)
    TNT1 A 0 A_StopSoundEx("SoundSlot6")
    Goto See
  Fly:
	ROB4 H 1 Bright A_PlaySoundEx("darkinquisitor/flight","SoundSlot6",1,0)
	ROB4 H 3 Bright A_Chase ("", "Missile", 1)
	TNT1 A 0 Bright A_JumpIf(z - floorz < 45, "Land")	//If low enough, it lands safely on the ground.
	ROB4 A 0 A_Jump(1,"Land")
	ROB4 I 4 Bright A_Chase ("", "Missile")
	TNT1 A 0 Bright A_JumpIf(z - floorz < 45, "Land")
	ROB4 A 0 A_Jump(1,"Land")
	ROB4 H 4 Bright A_Chase ("", "Missile", 1)
	TNT1 A 0 Bright A_JumpIf(z - floorz < 45, "Land")
	ROB4 A 0 A_Jump(1,"Land")
	ROB4 I 4 Bright A_Chase ("", "Missile")
	TNT1 A 0 Bright A_JumpIf(z - floorz < 45, "Land")
	ROB4 A 0 A_Jump(1,"Land")
	ROB4 H 4 Bright A_Chase ("", "Missile", 1)
	TNT1 A 0 Bright A_JumpIf(z - floorz < 45, "Land")
	ROB4 A 0 A_Jump(1,"Land")
	Loop
  Missile:
    TNT1 A 0 ACS_NamedExecuteAlways("RefreshStealthInfo",0,1) // makes a Stealth Monster become more visible
	TNT1 A 0 A_Jump(80,2)
	ROB4 A 0 A_JumpIfCloser(850,"EMP")
	ROB4 A 6 A_FaceTarget
	ROB4 F 0 Bright A_PlaySound("darkinquisitor/darkmatterfire")
	ROB4 F 4 Bright A_CustomMissile("DarkMatterBall",64,-32,0)
	ROB4 G 6
	TNT1 A 0 A_JumpIfInventory("FlightToken", 1, "Fly")
	Goto See
  EMP:
	ROB4 A 6 A_FaceTarget
	ROB4 J 0 Bright A_PlaySound("darkinquisitor/empfire")
	ROB4 J 0 Bright A_CustomMissile("EMPGrenade",100,24,0,1)
	ROB4 J 3 Bright A_CustomMissile("EMPGrenade",100,-24,0,1)
	ROB4 G 6
	TNT1 A 0 A_JumpIfInventory("FlightToken", 1, "Fly")
	Goto See
  Pain:
    ROB4 G 6
    ROB4 G 6 A_Pain
	TNT1 A 0 A_JumpIfInventory("FlightToken", 1, "Fly")
    Goto See
  Pain.GravityHP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,0,0,0)
    Goto See
  Pain.GravityMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,1,0,0)
    Goto See
  Pain.GravityHPMP:
    TNT1 A 0 ACS_NamedExecuteAlways("Hand-GravityAttack",0,2,0,0)
    Goto See
  Pain.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,10) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 
    Goto See
  Death.Sceptre:
    TNT1 A 0 A_CheckFlag("FRIENDLY",2,AAPTR_DEFAULT)
    TNT1 A 0 ACS_NamedExecuteAlways("AddSceptreEXP",0,0,0,1) // Increase EXP for Sceptre [1+(HP/300)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Pain.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,1,0) // Give some life when hurting a monster [1+(HP/500)]
    Goto See
  Death.Gauntlets:
    TNT1 A 0 ACS_NamedExecuteAlways("SauronGauntletsHit",0,0,2,0) // Give some life when killing a monster [3+(HP/100)]
    TNT1 A 0 A_JumpIfHealthLower(user_HPXDeathRange,"XDeath")
    Goto Death
  Death:
    TNT1 A 0 A_GiveToTarget ("Coin", random(100,150))
    TNT1 A 0 ACS_NamedExecuteAlways("AddEXP",0,-2,0,1)
    TNT1 A 0 ACS_NamedExecuteAlways("MonsterStatsHP_ATK_DEF_SPD",0,1)
	ROB4 A 0 A_TakeInventory("FlightToken", 1)
	ROB4 A 0 A_ChangeFlag ("FLOAT", 0)
	ROB4 A 0 A_ChangeFlag ("NOGRAVITY", 0)
	ROB4 A 0 A_StopSoundEx("SoundSlot6")
	ROB4 L 1 A_NoBlocking
	ROB4 LLLLLLLLLLLLLLLLLLLLLLL 5 Bright A_CustomMissile("InquisitorDeathExplosion",0+random(20,120),0,0+random(0,370),0)
	ROB4 L 1 A_Scream
	NULL AAAAAAAAAAAAAAAAAAAAAAA 0 A_CustomMissile("DarkInquisitorGibber",50,0,random(0,359))
	NULL A 0 A_CustomMissile("DarkInquisitorBigExplosion",0,0,0)
	TNT1 A 0 Radius_Quake(8,40,0,35,0)
    Stop
  }
}

actor InquisitorSpawner : CustomInventory replaces Inquisitor
{
 +ISMONSTER
 +RANDOMIZE
 states
 {
    UpgradeClass:
     ETTN A 0 A_SpawnItemEx("DarkInquisitor",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
     stop

  Spawn:
   ETTN A 0 
   ETTN A 0 A_JumpIf( random(1,1024) <= ACS_NamedExecuteWithResult("GetEvolveChance") , "UpgradeClass")
   ETTN A 0 A_SpawnItemEx("InquisitorNew",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG | SXF_NOCHECKPOSITION | SXF_TRANSFERSPECIAL | SXF_TRANSFERSPECIAL | SXF_CLEARCALLERSPECIAL,0,tid)
   stop
 }
}
